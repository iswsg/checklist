var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var n={exports:{}},r={},i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var u=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,r,u=s(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))a.call(n,l)&&(u[l]=n[l]);if(i){r=i(n);for(var f=0;f<r.length;f++)o.call(n,r[f])&&(u[r[f]]=n[r[f]])}}return u},c=u,l=60103,f=60106;
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */r.Fragment=60107,r.StrictMode=60108,r.Profiler=60114;var h=60109,p=60110,d=60112;r.Suspense=60113;var v=60115,m=60116;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;l=g("react.element"),f=g("react.portal"),r.Fragment=g("react.fragment"),r.StrictMode=g("react.strict_mode"),r.Profiler=g("react.profiler"),h=g("react.provider"),p=g("react.context"),d=g("react.forward_ref"),r.Suspense=g("react.suspense"),v=g("react.memo"),m=g("react.lazy")}var y="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function S(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||_}function T(){}function x(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||_}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=S.prototype;var A=x.prototype=new T;A.constructor=x,c(A,S.prototype),A.isPureReactComponent=!0;var w={current:null},O=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:l,type:e,key:a,ref:o,props:i,_owner:w.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var P=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case l:case f:o=!0}}if(o)return i=i(o=e),e=""===r?"."+I(o,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(P,"$&/")+"/"),N(i,t,n,"",(function(e){return e}))):null!=i&&(R(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+I(a=e[s],s);o+=N(a,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(a=e.next()).done;)o+=N(a=a.value,t,n,u=r+I(a,s++),i);else if("object"===a)throw t=""+e,Error(b(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function L(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function F(){var e=D.current;if(null===e)throw Error(b(321));return e}var B={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:c};r.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error(b(143));return e}},r.Component=S,r.PureComponent=x,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,r.cloneElement=function(e,t,n){if(null==e)throw Error(b(267,e));var r=c({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=w.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)O.call(t,u)&&!C.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var f=0;f<u;f++)s[f]=arguments[f+2];r.children=s}return{$$typeof:l,type:e.type,key:i,ref:a,props:r,_owner:o}},r.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},r.createElement=k,r.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:d,render:e}},r.isValidElement=R,r.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},r.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},r.useCallback=function(e,t){return F().useCallback(e,t)},r.useContext=function(e,t){return F().useContext(e,t)},r.useDebugValue=function(){},r.useEffect=function(e,t){return F().useEffect(e,t)},r.useImperativeHandle=function(e,t,n){return F().useImperativeHandle(e,t,n)},r.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},r.useMemo=function(e,t){return F().useMemo(e,t)},r.useReducer=function(e,t,n){return F().useReducer(e,t,n)},r.useRef=function(e){return F().useRef(e)},r.useState=function(e){return F().useState(e)},r.version="17.0.2",n.exports=r;var U=n.exports,j={exports:{}},V={},H={exports:{}},G={};
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(n){throw setTimeout(l,0),n}};t=function(e){null!==u?setTimeout(t,0,e):(u=e,setTimeout(l,0))},n=function(e,t){c=setTimeout(e,t)},r=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var d=!1,v=null,m=-1,g=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();y=t+g;try{v(!0,t)?_.postMessage(null):(d=!1,v=null)}catch(n){throw _.postMessage(null),n}}else d=!1},t=function(e){v=e,d||(d=!0,_.postMessage(null))},n=function(t,n){m=f((function(){t(e.unstable_now())}),n)},r=function(){h(m),m=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<x(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>x(o,n))void 0!==u&&0>x(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>x(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function x(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],w=[],O=1,C=null,k=3,R=!1,P=!1,I=!1;function N(e){for(var t=S(w);null!==t;){if(null===t.callback)T(w);else{if(!(t.startTime<=e))break;T(w),t.sortIndex=t.expirationTime,E(A,t)}t=S(w)}}function L(e){if(I=!1,N(e),!P)if(null!==S(A))P=!0,t(M);else{var r=S(w);null!==r&&n(L,r.startTime-e)}}function M(t,i){P=!1,I&&(I=!1,r()),R=!0;var a=k;try{for(N(i),C=S(A);null!==C&&(!(C.expirationTime>i)||t&&!e.unstable_shouldYield());){var o=C.callback;if("function"==typeof o){C.callback=null,k=C.priorityLevel;var s=o(C.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?C.callback=s:C===S(A)&&T(A),N(i)}else T(A);C=S(A)}if(null!==C)var u=!0;else{var c=S(w);null!==c&&n(L,c.startTime-i),u=!1}return u}finally{C=null,k=a,R=!1}}var D=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){P||R||(P=!0,t(M))},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return S(A)},e.unstable_next=function(e){switch(k){case 1:case 2:case 3:var t=3;break;default:t=k}var n=k;k=t;try{return e()}finally{k=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=D,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=k;k=e;try{return t()}finally{k=n}},e.unstable_scheduleCallback=function(i,a,o){var s=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,i){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return i={id:O++,callback:a,priorityLevel:i,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(i.sortIndex=o,E(w,i),null===S(A)&&i===S(w)&&(I?r():I=!0,n(L,o-s))):(i.sortIndex=u,E(A,i),P||R||(P=!0,t(M))),i},e.unstable_wrapCallback=function(e){var t=k;return function(){var n=k;k=t;try{return e.apply(this,arguments)}finally{k=n}}}}(G),H.exports=G;
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var z=n.exports,X=u,W=H.exports;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!z)throw Error(q(227));var Y=new Set,K={};function Z(e,t){Q(e,t),Q(e+"Capture",t)}function Q(e,t){for(K[e]=t,e=0;e<t.length;e++)Y.add(t[e])}var J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ee=Object.prototype.hasOwnProperty,te={},ne={};function re(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ie[e]=new re(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ie[t]=new re(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ie[e]=new re(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ie[e]=new re(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ie[e]=new re(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ie[e]=new re(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ie[e]=new re(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ie[e]=new re(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ie[e]=new re(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ae=/[\-:]([a-z])/g;function oe(e){return e[1].toUpperCase()}function se(e,t,n,r){var i=ie.hasOwnProperty(t)?ie[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ee.call(ne,e)||!ee.call(te,e)&&($.test(e)?ne[e]=!0:(te[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ae,oe);ie[t]=new re(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ae,oe);ie[t]=new re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ae,oe);ie[t]=new re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ie[e]=new re(e,1,!1,e.toLowerCase(),null,!1,!1)})),ie.xlinkHref=new re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ie[e]=new re(e,1,!1,e.toLowerCase(),null,!0,!0)}));var ue=z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=60103,le=60106,fe=60107,he=60108,pe=60114,de=60109,ve=60110,me=60112,ge=60113,ye=60120,be=60115,_e=60116,Ee=60121,Se=60128,Te=60129,xe=60130,Ae=60131;if("function"==typeof Symbol&&Symbol.for){var we=Symbol.for;ce=we("react.element"),le=we("react.portal"),fe=we("react.fragment"),he=we("react.strict_mode"),pe=we("react.profiler"),de=we("react.provider"),ve=we("react.context"),me=we("react.forward_ref"),ge=we("react.suspense"),ye=we("react.suspense_list"),be=we("react.memo"),_e=we("react.lazy"),Ee=we("react.block"),we("react.scope"),Se=we("react.opaque.id"),Te=we("react.debug_trace_mode"),xe=we("react.offscreen"),Ae=we("react.legacy_hidden")}var Oe,Ce="function"==typeof Symbol&&Symbol.iterator;function ke(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ce&&e[Ce]||e["@@iterator"])?e:null}function Re(e){if(void 0===Oe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oe=t&&t[1]||""}return"\n"+Oe+e}var Pe=!1;function Ie(e,t){if(!e||Pe)return"";Pe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{Pe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Re(e):""}function Ne(e){switch(e.tag){case 5:return Re(e.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 2:case 15:return e=Ie(e.type,!1);case 11:return e=Ie(e.type.render,!1);case 22:return e=Ie(e.type._render,!1);case 1:return e=Ie(e.type,!0);default:return""}}function Le(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case fe:return"Fragment";case le:return"Portal";case pe:return"Profiler";case he:return"StrictMode";case ge:return"Suspense";case ye:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ve:return(e.displayName||"Context")+".Consumer";case de:return(e._context.displayName||"Context")+".Provider";case me:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case be:return Le(e.type);case Ee:return Le(e._render);case _e:t=e._payload,e=e._init;try{return Le(e(t))}catch(n){}}return null}function Me(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function De(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Fe(e){e._valueTracker||(e._valueTracker=function(e){var t=De(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=De(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ue(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function je(e,t){var n=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ve(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Me(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function He(e,t){null!=(t=t.checked)&&se(e,"checked",t,!1)}function Ge(e,t){He(e,t);var n=Me(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xe(e,t.type,Me(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ze(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xe(e,t,n){"number"===t&&Ue(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function We(e,t){return e=X({children:void 0},t),(t=function(e){var t="";return z.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function qe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Me(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ye(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(q(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ke(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(q(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(q(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Me(n)}}function Ze(e,t){var n=Me(t.value),r=Me(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Qe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Je="http://www.w3.org/1999/xhtml",$e="http://www.w3.org/2000/svg";function et(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?et(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nt,rt,it=(rt=function(e,t){if(e.namespaceURI!==$e||"innerHTML"in e)e.innerHTML=t;else{for((nt=nt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return rt(e,t)}))}:rt);function at(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ot={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},st=["Webkit","ms","Moz","O"];function ut(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ot.hasOwnProperty(e)&&ot[e]?(""+t).trim():t+"px"}function ct(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ut(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ot).forEach((function(e){st.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ot[t]=ot[e]}))}));var lt=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ft(e,t){if(t){if(lt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(q(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(q(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(q(62))}}function ht(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var dt=null,vt=null,mt=null;function gt(e){if(e=Vi(e)){if("function"!=typeof dt)throw Error(q(280));var t=e.stateNode;t&&(t=Gi(t),dt(e.stateNode,e.type,t))}}function yt(e){vt?mt?mt.push(e):mt=[e]:vt=e}function bt(){if(vt){var e=vt,t=mt;if(mt=vt=null,gt(e),t)for(e=0;e<t.length;e++)gt(t[e])}}function _t(e,t){return e(t)}function Et(e,t,n,r,i){return e(t,n,r,i)}function St(){}var Tt=_t,xt=!1,At=!1;function wt(){null===vt&&null===mt||(St(),bt())}function Ot(e,t){var n=e.stateNode;if(null===n)return null;var r=Gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(q(231,t,typeof n));return n}var Ct=!1;if(J)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){Ct=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch(rt){Ct=!1}function Rt(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Pt=!1,It=null,Nt=!1,Lt=null,Mt={onError:function(e){Pt=!0,It=e}};function Dt(e,t,n,r,i,a,o,s,u){Pt=!1,It=null,Rt.apply(Mt,arguments)}function Ft(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Bt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ut(e){if(Ft(e)!==e)throw Error(q(188))}function jt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ft(e)))throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ut(i),e;if(a===r)return Ut(i),t;a=a.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(3!==n.tag)throw Error(q(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Vt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ht,Gt,zt,Xt,Wt=!1,qt=[],Yt=null,Kt=null,Zt=null,Qt=new Map,Jt=new Map,$t=[],en="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tn(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function nn(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":Qt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jt.delete(t.pointerId)}}function rn(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=tn(t,n,r,i,a),null!==t&&(null!==(t=Vi(t))&&Gt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function an(e){var t=ji(e.target);if(null!==t){var n=Ft(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Bt(n)))return e.blockedOn=t,void Xt(e.lanePriority,(function(){W.unstable_runWithPriority(e.priority,(function(){zt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function on(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Vi(n))&&Gt(t),e.blockedOn=n,!1;t.shift()}return!0}function sn(e,t,n){on(e)&&n.delete(t)}function un(){for(Wt=!1;0<qt.length;){var e=qt[0];if(null!==e.blockedOn){null!==(e=Vi(e.blockedOn))&&Ht(e);break}for(var t=e.targetContainers;0<t.length;){var n=Vn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&qt.shift()}null!==Yt&&on(Yt)&&(Yt=null),null!==Kt&&on(Kt)&&(Kt=null),null!==Zt&&on(Zt)&&(Zt=null),Qt.forEach(sn),Jt.forEach(sn)}function cn(e,t){e.blockedOn===t&&(e.blockedOn=null,Wt||(Wt=!0,W.unstable_scheduleCallback(W.unstable_NormalPriority,un)))}function ln(e){function t(t){return cn(t,e)}if(0<qt.length){cn(qt[0],e);for(var n=1;n<qt.length;n++){var r=qt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Yt&&cn(Yt,e),null!==Kt&&cn(Kt,e),null!==Zt&&cn(Zt,e),Qt.forEach(t),Jt.forEach(t),n=0;n<$t.length;n++)(r=$t[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$t.length&&null===(n=$t[0]).blockedOn;)an(n),null===n.blockedOn&&$t.shift()}function fn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hn={animationend:fn("Animation","AnimationEnd"),animationiteration:fn("Animation","AnimationIteration"),animationstart:fn("Animation","AnimationStart"),transitionend:fn("Transition","TransitionEnd")},pn={},dn={};function vn(e){if(pn[e])return pn[e];if(!hn[e])return e;var t,n=hn[e];for(t in n)if(n.hasOwnProperty(t)&&t in dn)return pn[e]=n[t];return e}J&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);var mn=vn("animationend"),gn=vn("animationiteration"),yn=vn("animationstart"),bn=vn("transitionend"),_n=new Map,En=new Map,Sn=["abort","abort",mn,"animationEnd",gn,"animationIteration",yn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",bn,"transitionEnd","waiting","waiting"];function Tn(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),En.set(r,t),_n.set(r,i),Z(i,[r])}}(0,W.unstable_now)();var xn=8;function An(e){if(0!=(1&e))return xn=15,1;if(0!=(2&e))return xn=14,2;if(0!=(4&e))return xn=13,4;var t=24&e;return 0!==t?(xn=12,t):0!=(32&e)?(xn=11,32):0!==(t=192&e)?(xn=10,t):0!=(256&e)?(xn=9,256):0!==(t=3584&e)?(xn=8,t):0!=(4096&e)?(xn=7,4096):0!==(t=4186112&e)?(xn=6,t):0!==(t=62914560&e)?(xn=5,t):67108864&e?(xn=4,67108864):0!=(134217728&e)?(xn=3,134217728):0!==(t=805306368&e)?(xn=2,t):0!=(1073741824&e)?(xn=1,1073741824):(xn=8,e)}function wn(e,t){var n=e.pendingLanes;if(0===n)return xn=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=xn=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=An(u),i=xn):0!==(s&=a)&&(r=An(s),i=xn)}else 0!==(a=n&~o)?(r=An(a),i=xn):0!==s&&(r=An(s),i=xn);if(0===r)return 0;if(r=n&((0>(r=31-In(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(An(t),i<=xn)return t;xn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-In(t)),r|=e[n],t&=~i;return r}function On(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Cn(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=kn(24&~t))?Cn(10,t):e;case 10:return 0===(e=kn(192&~t))?Cn(8,t):e;case 8:return 0===(e=kn(3584&~t))&&(0===(e=kn(4186112&~t))&&(e=512)),e;case 2:return 0===(t=kn(805306368&~t))&&(t=268435456),t}throw Error(q(358,e))}function kn(e){return e&-e}function Rn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pn(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-In(t)]=n}var In=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Nn(e)/Ln|0)|0},Nn=Math.log,Ln=Math.LN2;var Mn=W.unstable_UserBlockingPriority,Dn=W.unstable_runWithPriority,Fn=!0;function Bn(e,t,n,r){xt||St();var i=jn,a=xt;xt=!0;try{Et(i,e,t,n,r)}finally{(xt=a)||wt()}}function Un(e,t,n,r){Dn(Mn,jn.bind(null,e,t,n,r))}function jn(e,t,n,r){var i;if(Fn)if((i=0==(4&t))&&0<qt.length&&-1<en.indexOf(e))e=tn(null,e,t,n,r),qt.push(e);else{var a=Vn(e,t,n,r);if(null===a)i&&nn(e,r);else{if(i){if(-1<en.indexOf(e))return e=tn(a,e,t,n,r),void qt.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Yt=rn(Yt,e,t,n,r,i),!0;case"dragenter":return Kt=rn(Kt,e,t,n,r,i),!0;case"mouseover":return Zt=rn(Zt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Qt.set(a,rn(Qt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Jt.set(a,rn(Jt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;nn(e,r)}bi(e,t,r,null,n)}}}function Vn(e,t,n,r){var i=pt(r);if(null!==(i=ji(i))){var a=Ft(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Bt(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return bi(e,t,r,i,n),null}var Hn=null,Gn=null,zn=null;function Xn(){if(zn)return zn;var e,t,n=Gn,r=n.length,i="value"in Hn?Hn.value:Hn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return zn=i.slice(e,1<t?1-t:void 0)}function Wn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qn(){return!0}function Yn(){return!1}function Kn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?qn:Yn,this.isPropagationStopped=Yn,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),t}var Zn,Qn,Jn,$n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},er=Kn($n),tr=X({},$n,{view:0,detail:0}),nr=Kn(tr),rr=X({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jn&&(Jn&&"mousemove"===e.type?(Zn=e.screenX-Jn.screenX,Qn=e.screenY-Jn.screenY):Qn=Zn=0,Jn=e),Zn)},movementY:function(e){return"movementY"in e?e.movementY:Qn}}),ir=Kn(rr),ar=Kn(X({},rr,{dataTransfer:0})),or=Kn(X({},tr,{relatedTarget:0})),sr=Kn(X({},$n,{animationName:0,elapsedTime:0,pseudoElement:0})),ur=Kn(X({},$n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cr=Kn(X({},$n,{data:0})),lr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hr[e])&&!!t[e]}function dr(){return pr}var vr=Kn(X({},tr,{key:function(e){if(e.key){var t=lr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(e){return"keypress"===e.type?Wn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mr=Kn(X({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gr=Kn(X({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr})),yr=Kn(X({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0})),br=Kn(X({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_r=[9,13,27,32],Er=J&&"CompositionEvent"in window,Sr=null;J&&"documentMode"in document&&(Sr=document.documentMode);var Tr=J&&"TextEvent"in window&&!Sr,xr=J&&(!Er||Sr&&8<Sr&&11>=Sr),Ar=String.fromCharCode(32),wr=!1;function Or(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var kr=!1;var Rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rr[e.type]:"textarea"===t}function Ir(e,t,n,r){yt(r),0<(t=Ei(t,"onChange")).length&&(n=new er("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nr=null,Lr=null;function Mr(e){pi(e,0)}function Dr(e){if(Be(Hi(e)))return e}function Fr(e,t){if("change"===e)return t}var Br=!1;if(J){var Ur;if(J){var jr="oninput"in document;if(!jr){var Vr=document.createElement("div");Vr.setAttribute("oninput","return;"),jr="function"==typeof Vr.oninput}Ur=jr}else Ur=!1;Br=Ur&&(!document.documentMode||9<document.documentMode)}function Hr(){Nr&&(Nr.detachEvent("onpropertychange",Gr),Lr=Nr=null)}function Gr(e){if("value"===e.propertyName&&Dr(Lr)){var t=[];if(Ir(t,Lr,e,pt(e)),e=Mr,xt)e(t);else{xt=!0;try{_t(e,t)}finally{xt=!1,wt()}}}}function zr(e,t,n){"focusin"===e?(Hr(),Lr=n,(Nr=t).attachEvent("onpropertychange",Gr)):"focusout"===e&&Hr()}function Xr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dr(Lr)}function Wr(e,t){if("click"===e)return Dr(t)}function qr(e,t){if("input"===e||"change"===e)return Dr(t)}var Yr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Kr=Object.prototype.hasOwnProperty;function Zr(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}function Qr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jr(e,t){var n,r=Qr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qr(r)}}function $r(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(){for(var e=window,t=Ue();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ue((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=J&&"documentMode"in document&&11>=document.documentMode,ri=null,ii=null,ai=null,oi=!1;function si(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;oi||null==ri||ri!==Ue(r)||("selectionStart"in(r=ri)&&ti(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ai&&Zr(ai,r)||(ai=r,0<(r=Ei(ii,"onSelect")).length&&(t=new er("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ri)))}Tn("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Tn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Tn(Sn,2);for(var ui="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ci=0;ci<ui.length;ci++)En.set(ui[ci],0);Q("onMouseEnter",["mouseout","mouseover"]),Q("onMouseLeave",["mouseout","mouseover"]),Q("onPointerEnter",["pointerout","pointerover"]),Q("onPointerLeave",["pointerout","pointerover"]),Z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Z("onBeforeInput",["compositionend","keypress","textInput","paste"]),Z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(li));function hi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,s,u){if(Dt.apply(this,arguments),Pt){if(!Pt)throw Error(q(198));var c=It;Pt=!1,It=null,Nt||(Nt=!0,Lt=c)}}(r,t,void 0,e),e.currentTarget=null}function pi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;hi(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;hi(i,s,c),a=u}}}if(Nt)throw e=Lt,Nt=!1,Lt=null,e}function di(e,t){var n=zi(t),r=e+"__bubble";n.has(r)||(yi(t,e,2,!1),n.add(r))}var vi="_reactListening"+Math.random().toString(36).slice(2);function mi(e){e[vi]||(e[vi]=!0,Y.forEach((function(t){fi.has(t)||gi(t,!1,e,null),gi(t,!0,e,null)})))}function gi(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&fi.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=zi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),yi(a,e,i,t),o.add(s))}function yi(e,t,n,r){var i=En.get(t);switch(void 0===i?2:i){case 0:i=Bn;break;case 1:i=Un;break;default:i=jn}n=i.bind(null,t,n,e),i=void 0,!Ct||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function bi(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ji(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(At)return e(t,n);At=!0;try{Tt(e,t,n)}finally{At=!1,wt()}}((function(){var r=a,i=pt(n),o=[];e:{var s=_n.get(e);if(void 0!==s){var u=er,c=e;switch(e){case"keypress":if(0===Wn(n))break e;case"keydown":case"keyup":u=vr;break;case"focusin":c="focus",u=or;break;case"focusout":c="blur",u=or;break;case"beforeblur":case"afterblur":u=or;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=gr;break;case mn:case gn:case yn:u=sr;break;case bn:u=yr;break;case"scroll":u=nr;break;case"wheel":u=br;break;case"copy":case"cut":case"paste":u=ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mr}var l=0!=(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=r;null!==d;){var v=(p=d).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==h&&(null!=(v=Ot(d,h))&&l.push(_i(d,v,p)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!ji(c)&&!c[Bi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ji(c):null)&&(c!==(f=Ft(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=ir,v="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=mr,v="onPointerLeave",h="onPointerEnter",d="pointer"),f=null==u?s:Hi(u),p=null==c?s:Hi(c),(s=new l(v,d+"leave",u,n,i)).target=f,s.relatedTarget=p,v=null,ji(i)===r&&((l=new l(h,d+"enter",c,n,i)).target=p,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,d=0,p=l=u;p;p=Si(p))d++;for(p=0,v=h;v;v=Si(v))p++;for(;0<d-p;)l=Si(l),d--;for(;0<p-d;)h=Si(h),p--;for(;d--;){if(l===h||null!==h&&l===h.alternate)break e;l=Si(l),h=Si(h)}l=null}else l=null;null!==u&&Ti(o,s,u,l,!1),null!==c&&null!==f&&Ti(o,f,c,l,!0)}if("select"===(u=(s=r?Hi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Fr;else if(Pr(s))if(Br)m=qr;else{m=Xr;var g=zr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=Wr);switch(m&&(m=m(e,r))?Ir(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&Xe(s,"number",s.value)),g=r?Hi(r):window,e){case"focusin":(Pr(g)||"true"===g.contentEditable)&&(ri=g,ii=r,ai=null);break;case"focusout":ai=ii=ri=null;break;case"mousedown":oi=!0;break;case"contextmenu":case"mouseup":case"dragend":oi=!1,si(o,n,i);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":si(o,n,i)}var y;if(Er)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else kr?Or(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(xr&&"ko"!==n.locale&&(kr||"onCompositionStart"!==b?"onCompositionEnd"===b&&kr&&(y=Xn()):(Gn="value"in(Hn=i)?Hn.value:Hn.textContent,kr=!0)),0<(g=Ei(r,b)).length&&(b=new cr(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Cr(n))&&(b.data=y))),(y=Tr?function(e,t){switch(e){case"compositionend":return Cr(t);case"keypress":return 32!==t.which?null:(wr=!0,Ar);case"textInput":return(e=t.data)===Ar&&wr?null:e;default:return null}}(e,n):function(e,t){if(kr)return"compositionend"===e||!Er&&Or(e,t)?(e=Xn(),zn=Gn=Hn=null,kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ei(r,"onBeforeInput")).length&&(i=new cr("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}pi(o,t)}))}function _i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ei(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ot(e,n))&&r.unshift(_i(e,a,i)),null!=(a=Ot(e,t))&&r.push(_i(e,a,i))),e=e.return}return r}function Si(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ti(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ot(n,a))&&o.unshift(_i(n,u,s)):i||null!=(u=Ot(n,a))&&o.push(_i(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function xi(){}var Ai=null,wi=null;function Oi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ci(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ki="function"==typeof setTimeout?setTimeout:void 0,Ri="function"==typeof clearTimeout?clearTimeout:void 0;function Pi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Ii(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ni(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Li=0;var Mi=Math.random().toString(36).slice(2),Di="__reactFiber$"+Mi,Fi="__reactProps$"+Mi,Bi="__reactContainer$"+Mi,Ui="__reactEvents$"+Mi;function ji(e){var t=e[Di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bi]||n[Di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ni(e);null!==e;){if(n=e[Di])return n;e=Ni(e)}return t}n=(e=n).parentNode}return null}function Vi(e){return!(e=e[Di]||e[Bi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Hi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(q(33))}function Gi(e){return e[Fi]||null}function zi(e){var t=e[Ui];return void 0===t&&(t=e[Ui]=new Set),t}var Xi=[],Wi=-1;function qi(e){return{current:e}}function Yi(e){0>Wi||(e.current=Xi[Wi],Xi[Wi]=null,Wi--)}function Ki(e,t){Wi++,Xi[Wi]=e.current,e.current=t}var Zi={},Qi=qi(Zi),Ji=qi(!1),$i=Zi;function ea(e,t){var n=e.type.contextTypes;if(!n)return Zi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ta(e){return null!=(e=e.childContextTypes)}function na(){Yi(Ji),Yi(Qi)}function ra(e,t,n){if(Qi.current!==Zi)throw Error(q(168));Ki(Qi,t),Ki(Ji,n)}function ia(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(q(108,Le(t)||"Unknown",i));return X({},n,r)}function aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zi,$i=Qi.current,Ki(Qi,e),Ki(Ji,Ji.current),!0}function oa(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=ia(e,t,$i),r.__reactInternalMemoizedMergedChildContext=e,Yi(Ji),Yi(Qi),Ki(Qi,e)):Yi(Ji),Ki(Ji,n)}var sa=null,ua=null,ca=W.unstable_runWithPriority,la=W.unstable_scheduleCallback,fa=W.unstable_cancelCallback,ha=W.unstable_shouldYield,pa=W.unstable_requestPaint,da=W.unstable_now,va=W.unstable_getCurrentPriorityLevel,ma=W.unstable_ImmediatePriority,ga=W.unstable_UserBlockingPriority,ya=W.unstable_NormalPriority,ba=W.unstable_LowPriority,_a=W.unstable_IdlePriority,Ea={},Sa=void 0!==pa?pa:function(){},Ta=null,xa=null,Aa=!1,wa=da(),Oa=1e4>wa?da:function(){return da()-wa};function Ca(){switch(va()){case ma:return 99;case ga:return 98;case ya:return 97;case ba:return 96;case _a:return 95;default:throw Error(q(332))}}function ka(e){switch(e){case 99:return ma;case 98:return ga;case 97:return ya;case 96:return ba;case 95:return _a;default:throw Error(q(332))}}function Ra(e,t){return e=ka(e),ca(e,t)}function Pa(e,t,n){return e=ka(e),la(e,t,n)}function Ia(){if(null!==xa){var e=xa;xa=null,fa(e)}Na()}function Na(){if(!Aa&&null!==Ta){Aa=!0;var e=0;try{var t=Ta;Ra(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ta=null}catch(n){throw null!==Ta&&(Ta=Ta.slice(e+1)),la(ma,Ia),n}finally{Aa=!1}}}var La=ue.ReactCurrentBatchConfig;function Ma(e,t){if(e&&e.defaultProps){for(var n in t=X({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Da=qi(null),Fa=null,Ba=null,Ua=null;function ja(){Ua=Ba=Fa=null}function Va(e){var t=Da.current;Yi(Da),e.type._context._currentValue=t}function Ha(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Ga(e,t){Fa=e,Ua=Ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Es=!0),e.firstContext=null)}function za(e,t){if(Ua!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ua=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ba){if(null===Fa)throw Error(q(308));Ba=t,Fa.dependencies={lanes:0,firstContext:t,responders:null}}else Ba=Ba.next=t;return e._currentValue}var Xa=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function qa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ya(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ka(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Za(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qa(e,t,n,r){var i=e.updateQueue;Xa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;if(null!==l){var f=(l=l.updateQueue).lastBaseUpdate;f!==o&&(null===f?l.firstBaseUpdate=c:f.next=c,l.lastBaseUpdate=u)}}if(null!==a){for(f=i.baseState,o=0,l=c=u=null;;){s=a.lane;var h=a.eventTime;if((r&s)===s){null!==l&&(l=l.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,d=a;switch(s=t,h=n,d.tag){case 1:if("function"==typeof(p=d.payload)){f=p.call(h,f,s);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(s="function"==typeof(p=d.payload)?p.call(h,f,s):p))break e;f=X({},f,s);break e;case 2:Xa=!0}}null!==a.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[a]:s.push(a))}else h={eventTime:h,lane:s,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(c=l=h,u=f):l=l.next=h,o|=s;if(null===(a=a.next)){if(null===(s=i.shared.pending))break;a=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,Au|=o,e.lanes=o,e.memoizedState=f}}function Ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(q(191,i));i.call(r)}}}var $a=(new z.Component).refs;function eo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:X({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var to={isMounted:function(e){return!!(e=e._reactInternals)&&Ft(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zu(),i=Qu(e),a=Ya(r,i);a.payload=t,null!=n&&(a.callback=n),Ka(e,a),Ju(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zu(),i=Qu(e),a=Ya(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),Ka(e,a),Ju(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zu(),r=Qu(e),i=Ya(n,r);i.tag=2,null!=t&&(i.callback=t),Ka(e,i),Ju(e,r,n)}};function no(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zr(n,r)||!Zr(i,a))}function ro(e,t,n){var r=!1,i=Zi,a=t.contextType;return"object"==typeof a&&null!==a?a=za(a):(i=ta(t)?$i:Qi.current,a=(r=null!=(r=t.contextTypes))?ea(e,i):Zi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=to,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&to.enqueueReplaceState(t,t.state,null)}function ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=$a,Wa(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=za(a):(a=ta(t)?$i:Qi.current,i.context=ea(e,a)),Qa(e,n,i,r),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(eo(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&to.enqueueReplaceState(i,i.state,null),Qa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var oo=Array.isArray;function so(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===$a&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function uo(e,t){if("textarea"!==e.type)throw Error(q(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function co(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=so(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=so(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function l(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ce:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=so(e,null,t),n.return=e,n;case le:return(t=Mc(t,e.mode,n)).return=e,t}if(oo(t)||ke(t))return(t=Ic(t,e.mode,n,null)).return=e,t;uo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ce:return n.key===i?n.type===fe?l(e,t,n.props.children,r,i):u(e,t,n,r):null;case le:return n.key===i?c(e,t,n,r):null}if(oo(n)||ke(n))return null!==i?null:l(e,t,n,r,null);uo(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ce:return e=e.get(null===r.key?n:r.key)||null,r.type===fe?l(t,e,r.props.children,i,r.key):u(t,e,r,i);case le:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(oo(r)||ke(r))return l(t,e=e.get(n)||null,r,i,null);uo(t,r)}return null}return function(s,u,c,l){var d="object"==typeof c&&null!==c&&c.type===fe&&null===c.key;d&&(c=c.props.children);var v="object"==typeof c&&null!==c;if(v)switch(c.$$typeof){case ce:e:{for(v=c.key,d=u;null!==d;){if(d.key===v){switch(d.tag){case 7:if(c.type===fe){n(s,d.sibling),(u=i(d,c.props.children)).return=s,s=u;break e}break;default:if(d.elementType===c.type){n(s,d.sibling),(u=i(d,c.props)).ref=so(s,d,c),u.return=s,s=u;break e}}n(s,d);break}t(s,d),d=d.sibling}c.type===fe?((u=Ic(c.props.children,s.mode,l,c.key)).return=s,s=u):((l=Pc(c.type,c.key,c.props,null,s.mode,l)).ref=so(s,u,c),l.return=s,s=l)}return o(s);case le:e:{for(d=c.key;null!==u;){if(u.key===d){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(s,u.sibling),(u=i(u,c.children||[])).return=s,s=u;break e}n(s,u);break}t(s,u),u=u.sibling}(u=Mc(c,s.mode,l)).return=s,s=u}return o(s)}if("string"==typeof c||"number"==typeof c)return c=""+c,null!==u&&6===u.tag?(n(s,u.sibling),(u=i(u,c)).return=s,s=u):(n(s,u),(u=Lc(c,s.mode,l)).return=s,s=u),o(s);if(oo(c))return function(i,o,s,u){for(var c=null,l=null,d=o,v=o=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=h(i,d,s[v],u);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g,d=m}if(v===s.length)return n(i,d),c;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(o=a(d,o,v),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(i,d);v<s.length;v++)null!==(m=p(d,i,v,s[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),c}(s,u,c,l);if(ke(c))return function(i,o,s,u){var c=ke(s);if("function"!=typeof c)throw Error(q(150));if(null==(s=c.call(s)))throw Error(q(151));for(var l=c=null,d=o,v=o=0,m=null,g=s.next();null!==d&&!g.done;v++,g=s.next()){d.index>v?(m=d,d=null):m=d.sibling;var y=h(i,d,g.value,u);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,d=m}if(g.done)return n(i,d),c;if(null===d){for(;!g.done;v++,g=s.next())null!==(g=f(i,g.value,u))&&(o=a(g,o,v),null===l?c=g:l.sibling=g,l=g);return c}for(d=r(i,d);!g.done;v++,g=s.next())null!==(g=p(d,i,v,g.value,u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),c}(s,u,c,l);if(v&&uo(s,c),void 0===c&&!d)switch(s.tag){case 1:case 22:case 0:case 11:case 15:throw Error(q(152,Le(s.type)||"Component"))}return n(s,u)}}var lo=co(!0),fo=co(!1),ho={},po=qi(ho),vo=qi(ho),mo=qi(ho);function go(e){if(e===ho)throw Error(q(174));return e}function yo(e,t){switch(Ki(mo,t),Ki(vo,e),Ki(po,ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tt(null,"");break;default:t=tt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Yi(po),Ki(po,t)}function bo(){Yi(po),Yi(vo),Yi(mo)}function _o(e){go(mo.current);var t=go(po.current),n=tt(t,e.type);t!==n&&(Ki(vo,e),Ki(po,n))}function Eo(e){vo.current===e&&(Yi(po),Yi(vo))}var So=qi(0);function To(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=null,Ao=null,wo=!1;function Oo(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ko(e){if(wo){var t=Ao;if(t){var n=t;if(!Co(e,t)){if(!(t=Ii(n.nextSibling))||!Co(e,t))return e.flags=-1025&e.flags|2,wo=!1,void(xo=e);Oo(xo,n)}xo=e,Ao=Ii(t.firstChild)}else e.flags=-1025&e.flags|2,wo=!1,xo=e}}function Ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xo=e}function Po(e){if(e!==xo)return!1;if(!wo)return Ro(e),wo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ci(t,e.memoizedProps))for(t=Ao;t;)Oo(e,t),t=Ii(t.nextSibling);if(Ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ao=Ii(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ao=null}}else Ao=xo?Ii(e.stateNode.nextSibling):null;return!0}function Io(){Ao=xo=null,wo=!1}var No=[];function Lo(){for(var e=0;e<No.length;e++)No[e]._workInProgressVersionPrimary=null;No.length=0}var Mo=ue.ReactCurrentDispatcher,Do=ue.ReactCurrentBatchConfig,Fo=0,Bo=null,Uo=null,jo=null,Vo=!1,Ho=!1;function Go(){throw Error(q(321))}function zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function Xo(e,t,n,r,i,a){if(Fo=a,Bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=null===e||null===e.memoizedState?gs:ys,e=n(r,i),Ho){a=0;do{if(Ho=!1,!(25>a))throw Error(q(301));a+=1,jo=Uo=null,t.updateQueue=null,Mo.current=bs,e=n(r,i)}while(Ho)}if(Mo.current=ms,t=null!==Uo&&null!==Uo.next,Fo=0,jo=Uo=Bo=null,Vo=!1,t)throw Error(q(300));return e}function Wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jo?Bo.memoizedState=jo=e:jo=jo.next=e,jo}function qo(){if(null===Uo){var e=Bo.alternate;e=null!==e?e.memoizedState:null}else e=Uo.next;var t=null===jo?Bo.memoizedState:jo.next;if(null!==t)jo=t,Uo=e;else{if(null===e)throw Error(q(310));e={memoizedState:(Uo=e).memoizedState,baseState:Uo.baseState,baseQueue:Uo.baseQueue,queue:Uo.queue,next:null},null===jo?Bo.memoizedState=jo=e:jo=jo.next=e}return jo}function Yo(e,t){return"function"==typeof t?t(e):t}function Ko(e){var t=qo(),n=t.queue;if(null===n)throw Error(q(311));n.lastRenderedReducer=e;var r=Uo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=o=a=null,u=i;do{var c=u.lane;if((Fo&c)===c)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var l={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(o=s=l,a=r):s=s.next=l,Bo.lanes|=c,Au|=c}u=u.next}while(null!==u&&u!==i);null===s?a=r:s.next=o,Yr(r,t.memoizedState)||(Es=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Zo(e){var t=qo(),n=t.queue;if(null===n)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Yr(a,t.memoizedState)||(Es=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Qo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Fo&e)===e)&&(t._workInProgressVersionPrimary=r,No.push(t))),e)return n(t._source);throw No.push(t),Error(q(350))}function Jo(e,t,n,r){var i=gu;if(null===i)throw Error(q(349));var a=t._getVersion,o=a(t._source),s=Mo.current,u=s.useState((function(){return Qo(i,t,n)})),c=u[1],l=u[0];u=jo;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,d=f.source;f=f.subscribe;var v=Bo;return e.memoizedState={refs:h,source:t,subscribe:r},s.useEffect((function(){h.getSnapshot=n,h.setSnapshot=c;var e=a(t._source);if(!Yr(o,e)){e=n(t._source),Yr(l,e)||(c(e),e=Qu(v),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-In(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=Qu(v);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),Yr(p,n)&&Yr(d,t)&&Yr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:l}).dispatch=c=vs.bind(null,Bo,e),u.queue=e,u.baseQueue=null,l=Qo(i,t,n),u.memoizedState=u.baseState=l),l}function $o(e,t,n){return Jo(qo(),e,t,n)}function es(e){var t=Wo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:e}).dispatch=vs.bind(null,Bo,e),[t.memoizedState,e]}function ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Bo.updateQueue)?(t={lastEffect:null},Bo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ns(e){return e={current:e},Wo().memoizedState=e}function rs(){return qo().memoizedState}function is(e,t,n,r){var i=Wo();Bo.flags|=e,i.memoizedState=ts(1|t,n,void 0,void 0===r?null:r)}function as(e,t,n,r){var i=qo();r=void 0===r?null:r;var a=void 0;if(null!==Uo){var o=Uo.memoizedState;if(a=o.destroy,null!==r&&zo(r,o.deps))return void ts(t,n,a,r)}Bo.flags|=e,i.memoizedState=ts(1|t,n,a,r)}function os(e,t){return is(516,4,e,t)}function ss(e,t){return as(516,4,e,t)}function us(e,t){return as(4,2,e,t)}function cs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ls(e,t,n){return n=null!=n?n.concat([e]):null,as(4,2,cs.bind(null,t,e),n)}function fs(){}function hs(e,t){var n=qo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ps(e,t){var n=qo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ds(e,t){var n=Ca();Ra(98>n?98:n,(function(){e(!0)})),Ra(97<n?97:n,(function(){var n=Do.transition;Do.transition=1;try{e(!1),t()}finally{Do.transition=n}}))}function vs(e,t,n){var r=Zu(),i=Qu(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Bo||null!==o&&o===Bo)Ho=Vo=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,Yr(u,s))return}catch(c){}Ju(e,i,r)}}var ms={readContext:za,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useOpaqueIdentifier:Go,unstable_isNewReconciler:!1},gs={readContext:za,useCallback:function(e,t){return Wo().memoizedState=[e,void 0===t?null:t],e},useContext:za,useEffect:os,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,is(4,2,cs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return is(4,2,e,t)},useMemo:function(e,t){var n=Wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=vs.bind(null,Bo,e),[r.memoizedState,e]},useRef:ns,useState:es,useDebugValue:fs,useDeferredValue:function(e){var t=es(e),n=t[0],r=t[1];return os((function(){var t=Do.transition;Do.transition=1;try{r(e)}finally{Do.transition=t}}),[e]),n},useTransition:function(){var e=es(!1),t=e[0];return ns(e=ds.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Wo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Jo(r,e,t,n)},useOpaqueIdentifier:function(){if(wo){var e=!1,t=function(e){return{$$typeof:Se,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Li++).toString(36))),Error(q(355))})),n=es(t)[1];return 0==(2&Bo.mode)&&(Bo.flags|=516,ts(5,(function(){n("r:"+(Li++).toString(36))}),void 0,null)),t}return es(t="r:"+(Li++).toString(36)),t},unstable_isNewReconciler:!1},ys={readContext:za,useCallback:hs,useContext:za,useEffect:ss,useImperativeHandle:ls,useLayoutEffect:us,useMemo:ps,useReducer:Ko,useRef:rs,useState:function(){return Ko(Yo)},useDebugValue:fs,useDeferredValue:function(e){var t=Ko(Yo),n=t[0],r=t[1];return ss((function(){var t=Do.transition;Do.transition=1;try{r(e)}finally{Do.transition=t}}),[e]),n},useTransition:function(){var e=Ko(Yo)[0];return[rs().current,e]},useMutableSource:$o,useOpaqueIdentifier:function(){return Ko(Yo)[0]},unstable_isNewReconciler:!1},bs={readContext:za,useCallback:hs,useContext:za,useEffect:ss,useImperativeHandle:ls,useLayoutEffect:us,useMemo:ps,useReducer:Zo,useRef:rs,useState:function(){return Zo(Yo)},useDebugValue:fs,useDeferredValue:function(e){var t=Zo(Yo),n=t[0],r=t[1];return ss((function(){var t=Do.transition;Do.transition=1;try{r(e)}finally{Do.transition=t}}),[e]),n},useTransition:function(){var e=Zo(Yo)[0];return[rs().current,e]},useMutableSource:$o,useOpaqueIdentifier:function(){return Zo(Yo)[0]},unstable_isNewReconciler:!1},_s=ue.ReactCurrentOwner,Es=!1;function Ss(e,t,n,r){t.child=null===e?fo(t,null,n,r):lo(t,e.child,n,r)}function Ts(e,t,n,r,i){n=n.render;var a=t.ref;return Ga(t,i),r=Xo(e,t,n,r,a,i),null===e||Es?(t.flags|=1,Ss(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Gs(e,t,i))}function xs(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||kc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i,a))}return o=e.child,0==(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Zr)(i,r)&&e.ref===t.ref)?Gs(e,t,a):(t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e)}function As(e,t,n,r,i,a){if(null!==e&&Zr(e.memoizedProps,r)&&e.ref===t.ref){if(Es=!1,0==(a&i))return t.lanes=e.lanes,Gs(e,t,a);0!=(16384&e.flags)&&(Es=!0)}return Cs(e,t,n,r,a)}function ws(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},oc(t,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},oc(t,e),null;t.memoizedState={baseLanes:0},oc(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,oc(t,r);return Ss(e,t,i,n),t.child}function Os(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Cs(e,t,n,r,i){var a=ta(n)?$i:Qi.current;return a=ea(t,a),Ga(t,i),n=Xo(e,t,n,r,a,i),null===e||Es?(t.flags|=1,Ss(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Gs(e,t,i))}function ks(e,t,n,r,i){if(ta(n)){var a=!0;aa(t)}else a=!1;if(Ga(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ro(t,n,r),ao(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=za(c):c=ea(t,c=ta(n)?$i:Qi.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==c)&&io(t,o,r,c),Xa=!1;var h=t.memoizedState;o.state=h,Qa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ji.current||Xa?("function"==typeof l&&(eo(t,n,l,r),u=t.memoizedState),(s=Xa||no(t,n,s,r,h,u,c))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,qa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=za(u):u=ea(t,u=ta(n)?$i:Qi.current);var p=n.getDerivedStateFromProps;(l="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==f||h!==u)&&io(t,o,r,u),Xa=!1,h=t.memoizedState,o.state=h,Qa(t,r,o,i);var d=t.memoizedState;s!==f||h!==d||Ji.current||Xa?("function"==typeof p&&(eo(t,n,p,r),d=t.memoizedState),(c=Xa||no(t,n,c,r,h,d,u))?(l||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Rs(e,t,n,r,a,i)}function Rs(e,t,n,r,i,a){Os(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&oa(t,n,!1),Gs(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=lo(t,e.child,null,a),t.child=lo(t,null,s,a)):Ss(e,t,s,a),t.memoizedState=r.state,i&&oa(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ra(0,t.context,!1),yo(e,t.containerInfo)}var Is,Ns,Ls,Ms={dehydrated:null,retryLane:0};function Ds(e,t,n){var r,i=t.pendingProps,a=So.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),Ki(So,1&a),null===e?(void 0!==i.fallback&&ko(t),e=i.children,a=i.fallback,o?(e=Fs(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ms,e):"number"==typeof i.unstable_expectedLoadTime?(e=Fs(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ms,t.lanes=33554432,e):((n=Nc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=Us(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Ms,i):(n=Bs(e,t,i.children,n),t.memoizedState=null,n))}function Fs(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Nc(t,i,0,null),n=Ic(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Bs(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Us(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0==(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Rc(o,s),null!==e?r=Rc(e,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function js(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ha(e.return,t)}function Vs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ss(e,t,r.children,n),0!=(2&(r=So.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n);else if(19===e.tag)js(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ki(So,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===To(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===To(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a,t.lastEffect);break;case"together":Vs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Au|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(q(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function zs(e,t){if(!wo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ta(t.type)&&na(),null;case 3:return bo(),Yi(Ji),Yi(Qi),Lo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Po(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Eo(t);var i=go(mo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(q(166));return null}if(e=go(po.current),Po(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Di]=t,r[Fi]=a,n){case"dialog":di("cancel",r),di("close",r);break;case"iframe":case"object":case"embed":di("load",r);break;case"video":case"audio":for(e=0;e<li.length;e++)di(li[e],r);break;case"source":di("error",r);break;case"img":case"image":case"link":di("error",r),di("load",r);break;case"details":di("toggle",r);break;case"input":Ve(r,a),di("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},di("invalid",r);break;case"textarea":Ke(r,a),di("invalid",r)}for(var o in ft(n,a),e=null,a)a.hasOwnProperty(o)&&(i=a[o],"children"===o?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):K.hasOwnProperty(o)&&null!=i&&"onScroll"===o&&di("scroll",r));switch(n){case"input":Fe(r),ze(r,a,!0);break;case"textarea":Fe(r),Qe(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=xi)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(o=9===i.nodeType?i:i.ownerDocument,e===Je&&(e=et(n)),e===Je?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Di]=t,e[Fi]=r,Is(e,t),t.stateNode=e,o=ht(n,r),n){case"dialog":di("cancel",e),di("close",e),i=r;break;case"iframe":case"object":case"embed":di("load",e),i=r;break;case"video":case"audio":for(i=0;i<li.length;i++)di(li[i],e);i=r;break;case"source":di("error",e),i=r;break;case"img":case"image":case"link":di("error",e),di("load",e),i=r;break;case"details":di("toggle",e),i=r;break;case"input":Ve(e,r),i=je(e,r),di("invalid",e);break;case"option":i=We(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=X({},r,{value:void 0}),di("invalid",e);break;case"textarea":Ke(e,r),i=Ye(e,r),di("invalid",e);break;default:i=r}ft(n,i);var s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?ct(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&it(e,u):"children"===a?"string"==typeof u?("textarea"!==n||""!==u)&&at(e,u):"number"==typeof u&&at(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(K.hasOwnProperty(a)?null!=u&&"onScroll"===a&&di("scroll",e):null!=u&&se(e,a,u,o))}switch(n){case"input":Fe(e),ze(e,r,!1);break;case"textarea":Fe(e),Qe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Me(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?qe(e,!!r.multiple,a,!1):null!=r.defaultValue&&qe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=xi)}Oi(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(q(166));n=go(mo.current),go(po.current),Po(t)?(r=t.stateNode,n=t.memoizedProps,r[Di]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Di]=t,t.stateNode=r)}return null;case 13:return Yi(So),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Po(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&So.current)?0===Su&&(Su=3):(0!==Su&&3!==Su||(Su=4),null===gu||0==(134217727&Au)&&0==(134217727&wu)||nc(gu,bu))),(r||n)&&(t.flags|=4),null);case 4:return bo(),null===e&&mi(t.stateNode.containerInfo),null;case 10:return Va(t),null;case 17:return ta(t.type)&&na(),null;case 19:if(Yi(So),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(o=r.rendering))if(a)zs(r,!1);else{if(0!==Su||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(o=To(e))){for(t.flags|=64,zs(r,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(o=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ki(So,1&So.current|2),t.child}e=e.sibling}null!==r.tail&&Oa()>Ru&&(t.flags|=64,a=!0,zs(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=To(o))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),zs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!wo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Oa()-r.renderingStartTime>Ru&&1073741824!==n&&(t.flags|=64,a=!0,zs(r,!1),t.lanes=33554432);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Oa(),n.sibling=null,t=So.current,Ki(So,a?1&t|2:1&t),n):null;case 23:case 24:return sc(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(q(156,t.tag))}function Ws(e){switch(e.tag){case 1:ta(e.type)&&na();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(bo(),Yi(Ji),Yi(Qi),Lo(),0!=(64&(t=e.flags)))throw Error(q(285));return e.flags=-4097&t|64,e;case 5:return Eo(e),null;case 13:return Yi(So),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Yi(So),null;case 4:return bo(),null;case 10:return Va(e),null;case 23:case 24:return sc(),null;default:return null}}function qs(e,t){try{var n="",r=t;do{n+=Ne(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function Ys(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,go(po.current);var a,o=null;switch(n){case"input":i=je(e,i),r=je(e,r),o=[];break;case"option":i=We(e,i),r=We(e,r),o=[];break;case"select":i=X({},i,{value:void 0}),r=X({},r,{value:void 0}),o=[];break;case"textarea":i=Ye(e,i),r=Ye(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=xi)}for(c in ft(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(K.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(K.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&di("scroll",e),o||s===u||(o=[])):"object"==typeof u&&null!==u&&u.$$typeof===Se?u.toString():(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks="function"==typeof WeakMap?WeakMap:Map;function Zs(e,t,n){(n=Ya(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lu||(Lu=!0,Mu=r),Ys(0,t)},n}function Qs(e,t,n){(n=Ya(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Ys(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Du?Du=new Set([this]):Du.add(this),Ys(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Js="function"==typeof WeakSet?WeakSet:Set;function $s(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){xc(e,n)}else t.current=null}function eu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ma(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Pi(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(q(163))}function tu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ec(n,e),_c(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ma(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Ja(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Ja(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Oi(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&ln(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(q(163))}function nu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ut("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ru(e,t){if(ua&&"function"==typeof ua.onCommitFiberUnmount)try{ua.onCommitFiberUnmount(sa,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ec(t,n);else{r=t;try{i()}catch(a){xc(r,a)}}n=n.next}while(n!==e)}break;case 1:if($s(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){xc(t,a)}break;case 5:$s(t);break;case 4:cu(e,t)}}function iu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function ou(e){e:{for(var t=e.return;null!==t;){if(au(t))break e;t=t.return}throw Error(q(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(q(161))}16&n.flags&&(at(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||au(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?su(e,n,t):uu(e,n,t)}function su(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=xi));else if(4!==r&&null!==(e=e.child))for(su(e,t,n),e=e.sibling;null!==e;)su(e,t,n),e=e.sibling}function uu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(q(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var o=e,s=i,u=s;;)if(ru(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(o=n,s=i.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ru(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function lu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Fi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&He(n,r),ht(e,i),t=ht(e,r),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];"style"===o?ct(n,s):"dangerouslySetInnerHTML"===o?it(n,s):"children"===o?at(n,s):se(n,o,s,t)}switch(e){case"input":Ge(n,r);break;case"textarea":Ze(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?qe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?qe(n,!!r.multiple,r.defaultValue,!0):qe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(q(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,ln(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(ku=Oa(),nu(t.child,!0)),void fu(t);case 19:return void fu(t);case 17:return;case 23:case 24:return void nu(t,null!==t.memoizedState)}throw Error(q(163))}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=wc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var pu=Math.ceil,du=ue.ReactCurrentDispatcher,vu=ue.ReactCurrentOwner,mu=0,gu=null,yu=null,bu=0,_u=0,Eu=qi(0),Su=0,Tu=null,xu=0,Au=0,wu=0,Ou=0,Cu=null,ku=0,Ru=1/0;function Pu(){Ru=Oa()+500}var Iu,Nu=null,Lu=!1,Mu=null,Du=null,Fu=!1,Bu=null,Uu=90,ju=[],Vu=[],Hu=null,Gu=0,zu=null,Xu=-1,Wu=0,qu=0,Yu=null,Ku=!1;function Zu(){return 0!=(48&mu)?Oa():-1!==Xu?Xu:Xu=Oa()}function Qu(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Ca()?1:2;if(0===Wu&&(Wu=xu),0!==La.transition){0!==qu&&(qu=null!==Cu?Cu.pendingLanes:0),e=Wu;var t=4186112&~qu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ca(),0!=(4&mu)&&98===e?e=Cn(12,Wu):e=Cn(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Wu),e}function Ju(e,t,n){if(50<Gu)throw Gu=0,zu=null,Error(q(185));if(null===(e=$u(e,t)))return null;Pn(e,t,n),e===gu&&(wu|=t,4===Su&&nc(e,bu));var r=Ca();1===t?0!=(8&mu)&&0==(48&mu)?rc(e):(ec(e,n),0===mu&&(Pu(),Ia())):(0==(4&mu)||98!==r&&99!==r||(null===Hu?Hu=new Set([e]):Hu.add(e)),ec(e,n)),Cu=e}function $u(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ec(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-In(o),u=1<<s,c=a[s];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,An(u);var l=xn;a[s]=10<=l?c+250:6<=l?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);o&=~u}if(r=wn(e,e===gu?bu:0),t=xn,0===r)null!==n&&(n!==Ea&&fa(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ea&&fa(n)}15===t?(n=rc.bind(null,e),null===Ta?(Ta=[n],xa=la(ma,Na)):Ta.push(n),n=Ea):14===t?n=Pa(99,rc.bind(null,e)):n=Pa(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(q(358,e))}}(t),tc.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function tc(e){if(Xu=-1,qu=Wu=0,0!=(48&mu))throw Error(q(327));var t=e.callbackNode;if(bc()&&e.callbackNode!==t)return null;var n=wn(e,e===gu?bu:0);if(0===n)return null;var r=n,i=mu;mu|=16;var a=lc();for(gu===e&&bu===r||(Pu(),uc(e,r));;)try{pc();break}catch(s){cc(e,s)}if(ja(),du.current=a,mu=i,null!==yu?r=0:(gu=null,bu=0,r=Su),0!=(xu&wu))uc(e,0);else if(0!==r){if(2===r&&(mu|=64,e.hydrate&&(e.hydrate=!1,Pi(e.containerInfo)),0!==(n=On(e))&&(r=fc(e,n))),1===r)throw t=Tu,uc(e,0),nc(e,n),ec(e,Oa()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(q(345));case 2:mc(e);break;case 3:if(nc(e,n),(62914560&n)===n&&10<(r=ku+500-Oa())){if(0!==wn(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Zu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ki(mc.bind(null,e),r);break}mc(e);break;case 4:if(nc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var o=31-In(n);a=1<<o,(o=r[o])>i&&(i=o),n&=~a}if(n=i,10<(n=(120>(n=Oa()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pu(n/1960))-n)){e.timeoutHandle=ki(mc.bind(null,e),n);break}mc(e);break;case 5:mc(e);break;default:throw Error(q(329))}}return ec(e,Oa()),e.callbackNode===t?tc.bind(null,e):null}function nc(e,t){for(t&=~Ou,t&=~wu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-In(t),r=1<<n;e[n]=-1,t&=~r}}function rc(e){if(0!=(48&mu))throw Error(q(327));if(bc(),e===gu&&0!=(e.expiredLanes&bu)){var t=bu,n=fc(e,t);0!=(xu&wu)&&(n=fc(e,t=wn(e,t)))}else n=fc(e,t=wn(e,0));if(0!==e.tag&&2===n&&(mu|=64,e.hydrate&&(e.hydrate=!1,Pi(e.containerInfo)),0!==(t=On(e))&&(n=fc(e,t))),1===n)throw n=Tu,uc(e,0),nc(e,t),ec(e,Oa()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,mc(e),ec(e,Oa()),null}function ic(e,t){var n=mu;mu|=1;try{return e(t)}finally{0===(mu=n)&&(Pu(),Ia())}}function ac(e,t){var n=mu;mu&=-2,mu|=8;try{return e(t)}finally{0===(mu=n)&&(Pu(),Ia())}}function oc(e,t){Ki(Eu,_u),_u|=t,xu|=t}function sc(){_u=Eu.current,Yi(Eu)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Ri(n)),null!==yu)for(n=yu.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&na();break;case 3:bo(),Yi(Ji),Yi(Qi),Lo();break;case 5:Eo(r);break;case 4:bo();break;case 13:case 19:Yi(So);break;case 10:Va(r);break;case 23:case 24:sc()}n=n.return}gu=e,yu=Rc(e.current,null),bu=_u=xu=t,Su=0,Tu=null,Ou=wu=Au=0}function cc(e,t){for(;;){var n=yu;try{if(ja(),Mo.current=ms,Vo){for(var r=Bo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Vo=!1}if(Fo=0,jo=Uo=Bo=null,Ho=!1,vu.current=null,null===n||null===n.return){Su=1,Tu=t,yu=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=bu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&So.current),h=o;do{var p;if(p=13===h.tag){var d=h.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var v=h.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(p){var m=h.updateQueue;if(null===m){var g=new Set;g.add(c),h.updateQueue=g}else m.add(c);if(0==(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=Ya(-1,1);y.tag=2,Ka(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new Ks,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var _=Ac.bind(null,a,c,s);c.then(_,_)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((Le(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Su&&(Su=2),u=qs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,Za(h,Zs(0,a,t));break e;case 1:a=u;var E=h.type,S=h.stateNode;if(0==(64&h.flags)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Du||!Du.has(S)))){h.flags|=4096,t&=-t,h.lanes|=t,Za(h,Qs(h,a,t));break e}}h=h.return}while(null!==h)}vc(n)}catch(T){t=T,yu===n&&null!==n&&(yu=n=n.return);continue}break}}function lc(){var e=du.current;return du.current=ms,null===e?ms:e}function fc(e,t){var n=mu;mu|=16;var r=lc();for(gu===e&&bu===t||uc(e,t);;)try{hc();break}catch(i){cc(e,i)}if(ja(),mu=n,du.current=r,null!==yu)throw Error(q(261));return gu=null,bu=0,Su}function hc(){for(;null!==yu;)dc(yu)}function pc(){for(;null!==yu&&!ha();)dc(yu)}function dc(e){var t=Iu(e.alternate,e,_u);e.memoizedProps=e.pendingProps,null===t?vc(e):yu=t,vu.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=Xs(n,t,_u)))return void(yu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&_u)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Ws(t)))return n.flags&=2047,void(yu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(yu=t);yu=t=e}while(null!==t);0===Su&&(Su=5)}function mc(e){var t=Ca();return Ra(99,gc.bind(null,e,t)),null}function gc(e,t){do{bc()}while(null!==Bu);if(0!=(48&mu))throw Error(q(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var o=e.eventTimes,s=e.expirationTimes;0<a;){var u=31-In(a),c=1<<u;i[u]=0,o[u]=-1,s[u]=-1,a&=~c}if(null!==Hu&&0==(24&r)&&Hu.has(e)&&Hu.delete(e),e===gu&&(yu=gu=null,bu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=mu,mu|=32,vu.current=null,Ai=Fn,ti(o=ei())){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(c=s.getSelection&&s.getSelection())&&0!==c.rangeCount){s=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{s.nodeType,u.nodeType}catch(A){s=null;break e}var l=0,f=-1,h=-1,p=0,d=0,v=o,m=null;t:for(;;){for(var g;v!==s||0!==a&&3!==v.nodeType||(f=l+a),v!==u||0!==c&&3!==v.nodeType||(h=l+c),3===v.nodeType&&(l+=v.nodeValue.length),null!==(g=v.firstChild);)m=v,v=g;for(;;){if(v===o)break t;if(m===s&&++p===a&&(f=l),m===u&&++d===c&&(h=l),null!==(g=v.nextSibling))break;m=(v=m).parentNode}v=g}s=-1===f||-1===h?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;wi={focusedElem:o,selectionRange:s},Fn=!1,Yu=null,Ku=!1,Nu=r;do{try{yc()}catch(A){if(null===Nu)throw Error(q(330));xc(Nu,A),Nu=Nu.nextEffect}}while(null!==Nu);Yu=null,Nu=r;do{try{for(o=e;null!==Nu;){var y=Nu.flags;if(16&y&&at(Nu.stateNode,""),128&y){var b=Nu.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&y){case 2:ou(Nu),Nu.flags&=-3;break;case 6:ou(Nu),Nu.flags&=-3,lu(Nu.alternate,Nu);break;case 1024:Nu.flags&=-1025;break;case 1028:Nu.flags&=-1025,lu(Nu.alternate,Nu);break;case 4:lu(Nu.alternate,Nu);break;case 8:cu(o,s=Nu);var E=s.alternate;iu(s),null!==E&&iu(E)}Nu=Nu.nextEffect}}catch(A){if(null===Nu)throw Error(q(330));xc(Nu,A),Nu=Nu.nextEffect}}while(null!==Nu);if(_=wi,b=ei(),y=_.focusedElem,o=_.selectionRange,b!==y&&y&&y.ownerDocument&&$r(y.ownerDocument.documentElement,y)){null!==o&&ti(y)&&(b=o.start,void 0===(_=o.end)&&(_=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(_,y.value.length)):(_=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),s=y.textContent.length,E=Math.min(o.start,s),o=void 0===o.end?E:Math.min(o.end,s),!_.extend&&E>o&&(s=o,o=E,E=s),s=Jr(y,E),a=Jr(y,o),s&&a&&(1!==_.rangeCount||_.anchorNode!==s.node||_.anchorOffset!==s.offset||_.focusNode!==a.node||_.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),_.removeAllRanges(),E>o?(_.addRange(b),_.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),_.addRange(b))))),b=[];for(_=y;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<b.length;y++)(_=b[y]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Fn=!!Ai,wi=Ai=null,e.current=n,Nu=r;do{try{for(y=e;null!==Nu;){var S=Nu.flags;if(36&S&&tu(y,Nu.alternate,Nu),128&S){b=void 0;var T=Nu.ref;if(null!==T){var x=Nu.stateNode;switch(Nu.tag){case 5:b=x;break;default:b=x}"function"==typeof T?T(b):T.current=b}}Nu=Nu.nextEffect}}catch(A){if(null===Nu)throw Error(q(330));xc(Nu,A),Nu=Nu.nextEffect}}while(null!==Nu);Nu=null,Sa(),mu=i}else e.current=n;if(Fu)Fu=!1,Bu=e,Uu=t;else for(Nu=r;null!==Nu;)t=Nu.nextEffect,Nu.nextEffect=null,8&Nu.flags&&((S=Nu).sibling=null,S.stateNode=null),Nu=t;if(0===(r=e.pendingLanes)&&(Du=null),1===r?e===zu?Gu++:(Gu=0,zu=e):Gu=0,n=n.stateNode,ua&&"function"==typeof ua.onCommitFiberRoot)try{ua.onCommitFiberRoot(sa,n,void 0,64==(64&n.current.flags))}catch(A){}if(ec(e,Oa()),Lu)throw Lu=!1,e=Mu,Mu=null,e;return 0!=(8&mu)||Ia(),null}function yc(){for(;null!==Nu;){var e=Nu.alternate;Ku||null===Yu||(0!=(8&Nu.flags)?Vt(Nu,Yu)&&(Ku=!0):13===Nu.tag&&hu(e,Nu)&&Vt(Nu,Yu)&&(Ku=!0));var t=Nu.flags;0!=(256&t)&&eu(e,Nu),0==(512&t)||Fu||(Fu=!0,Pa(97,(function(){return bc(),null}))),Nu=Nu.nextEffect}}function bc(){if(90!==Uu){var e=97<Uu?97:Uu;return Uu=90,Ra(e,Sc)}return!1}function _c(e,t){ju.push(t,e),Fu||(Fu=!0,Pa(97,(function(){return bc(),null})))}function Ec(e,t){Vu.push(t,e),Fu||(Fu=!0,Pa(97,(function(){return bc(),null})))}function Sc(){if(null===Bu)return!1;var e=Bu;if(Bu=null,0!=(48&mu))throw Error(q(331));var t=mu;mu|=32;var n=Vu;Vu=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],o=i.destroy;if(i.destroy=void 0,"function"==typeof o)try{o()}catch(u){if(null===a)throw Error(q(330));xc(a,u)}}for(n=ju,ju=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(u){if(null===a)throw Error(q(330));xc(a,u)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return mu=t,Ia(),!0}function Tc(e,t,n){Ka(e,t=Zs(0,t=qs(n,t),1)),t=Zu(),null!==(e=$u(e,1))&&(Pn(e,1,t),ec(e,t))}function xc(e,t){if(3===e.tag)Tc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Tc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Du||!Du.has(r))){var i=Qs(n,e=qs(t,e),1);if(Ka(n,i),i=Zu(),null!==(n=$u(n,1)))Pn(n,1,i),ec(n,i);else if("function"==typeof r.componentDidCatch&&(null===Du||!Du.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zu(),e.pingedLanes|=e.suspendedLanes&n,gu===e&&(bu&n)===n&&(4===Su||3===Su&&(62914560&bu)===bu&&500>Oa()-ku?uc(e,0):Ou|=n),ec(e,t)}function wc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Ca()?1:2:(0===Wu&&(Wu=xu),0===(t=kn(62914560&~Wu))&&(t=4194304))),n=Zu(),null!==(e=$u(e,t))&&(Pn(e,t,n),ec(e,n))}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new Oc(e,t,n,r)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var o=2;if(r=e,"function"==typeof e)kc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case fe:return Ic(n.children,i,a,t);case Te:o=8,i|=16;break;case he:o=8,i|=1;break;case pe:return(e=Cc(12,n,t,8|i)).elementType=pe,e.type=pe,e.lanes=a,e;case ge:return(e=Cc(13,n,t,i)).type=ge,e.elementType=ge,e.lanes=a,e;case ye:return(e=Cc(19,n,t,i)).elementType=ye,e.lanes=a,e;case xe:return Nc(n,i,a,t);case Ae:return(e=Cc(24,n,t,i)).elementType=Ae,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case de:o=10;break e;case ve:o=9;break e;case me:o=11;break e;case be:o=14;break e;case _e:o=16,r=null;break e;case Ee:o=22;break e}throw Error(q(130,null==e?e:typeof e,""))}return(t=Cc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ic(e,t,n,r){return(e=Cc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Cc(23,e,r,t)).elementType=xe,e.lanes=n,e}function Lc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Rn(0),this.expirationTimes=Rn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rn(0),this.mutableSourceEagerHydrationData=null}function Fc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:le,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e,t,n,r){var i=t.current,a=Zu(),o=Qu(i);e:if(n){t:{if(Ft(n=n._reactInternals)!==n||1!==n.tag)throw Error(q(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ta(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(q(171))}if(1===n.tag){var u=n.type;if(ta(u)){n=ia(n,u,s);break e}}n=s}else n=Zi;return null===t.context?t.context=n:t.pendingContext=n,(t=Ya(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Ka(i,t),Ju(i,o,a),o}function Uc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function jc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}function Hc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Dc(e,t,null!=n&&!0===n.hydrate),t=Cc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,Wa(t),e[Bi]=n.current,mi(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Uc(o);s.call(e)}}Bc(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Hc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Uc(o);u.call(e)}}ac((function(){Bc(t,o,e,i)}))}return Uc(o)}function Xc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(q(200));return Fc(e,t,null,n)}Iu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Ji.current)Es=!0;else{if(0==(n&r)){switch(Es=!1,t.tag){case 3:Ps(t),Io();break;case 5:_o(t);break;case 1:ta(t.type)&&aa(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Ki(Da,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ds(e,t,n):(Ki(So,1&So.current),null!==(t=Gs(e,t,n))?t.sibling:null);Ki(So,1&So.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Hs(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ki(So,So.current),r)break;return null;case 23:case 24:return t.lanes=0,ws(e,t,n)}return Gs(e,t,n)}Es=0!=(16384&e.flags)}else Es=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=ea(t,Qi.current),Ga(t,n),i=Xo(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ta(r)){var a=!0;aa(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Wa(t);var o=r.getDerivedStateFromProps;"function"==typeof o&&eo(t,r,o,e),i.updater=to,t.stateNode=i,i._reactInternals=t,ao(t,r,e,n),t=Rs(null,t,r,!0,a,n)}else t.tag=0,Ss(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"==typeof e)return kc(e)?1:0;if(null!=e){if((e=e.$$typeof)===me)return 11;if(e===be)return 14}return 2}(i),e=Ma(i,e),a){case 0:t=Cs(null,t,i,e,n);break e;case 1:t=ks(null,t,i,e,n);break e;case 11:t=Ts(null,t,i,e,n);break e;case 14:t=xs(null,t,i,Ma(i.type,e),r,n);break e}throw Error(q(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:Ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:Ma(r,i),n);case 3:if(Ps(t),r=t.updateQueue,null===e||null===r)throw Error(q(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,qa(e,t),Qa(t,r,null,n),(r=t.memoizedState.element)===i)Io(),t=Gs(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ao=Ii(t.stateNode.containerInfo.firstChild),xo=t,a=wo=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],No.push(a);for(n=fo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ss(e,t,r,n),Io();t=t.child}return t;case 5:return _o(t),null===e&&ko(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,Ci(r,i)?o=null:null!==a&&Ci(r,a)&&(t.flags|=16),Os(e,t),Ss(e,t,o,n),t.child;case 6:return null===e&&ko(t),null;case 13:return Ds(e,t,n);case 4:return yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=lo(t,null,r,n):Ss(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:Ma(r,i),n);case 7:return Ss(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ss(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;var s=t.type._context;if(Ki(Da,s._currentValue),s._currentValue=a,null!==o)if(s=o.value,0===(a=Yr(s,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(o.children===i.children&&!Ji.current){t=Gs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){o=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===s.tag&&((c=Ya(-1,n&-n)).tag=2,Ka(s,c)),s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ha(s.return,n),u.lanes|=n;break}c=c.next}}else o=10===s.tag&&s.type===t.type?null:s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Ss(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Ga(t,n),r=r(i=za(i,a.unstable_observedBits)),t.flags|=1,Ss(e,t,r,n),t.child;case 14:return a=Ma(i=t.type,t.pendingProps),xs(e,t,i,a=Ma(i.type,a),r,n);case 15:return As(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ma(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ta(r)?(e=!0,aa(t)):e=!1,Ga(t,n),ro(t,r,i),ao(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 23:case 24:return ws(e,t,n)}throw Error(q(156,t.tag))},Hc.prototype.render=function(e){Bc(e,this._internalRoot,null,null)},Hc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Bc(null,e,null,(function(){t[Bi]=null}))},Ht=function(e){13===e.tag&&(Ju(e,4,Zu()),Vc(e,4))},Gt=function(e){13===e.tag&&(Ju(e,67108864,Zu()),Vc(e,67108864))},zt=function(e){if(13===e.tag){var t=Zu(),n=Qu(e);Ju(e,n,t),Vc(e,n)}},Xt=function(e,t){return t()},dt=function(e,t,n){switch(t){case"input":if(Ge(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Gi(r);if(!i)throw Error(q(90));Be(r),Ge(r,i)}}}break;case"textarea":Ze(e,n);break;case"select":null!=(t=n.value)&&qe(e,!!n.multiple,t,!1)}},_t=ic,Et=function(e,t,n,r,i){var a=mu;mu|=4;try{return Ra(98,e.bind(null,t,n,r,i))}finally{0===(mu=a)&&(Pu(),Ia())}},St=function(){0==(49&mu)&&(function(){if(null!==Hu){var e=Hu;Hu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ec(e,Oa())}))}Ia()}(),bc())},Tt=function(e,t){var n=mu;mu|=2;try{return e(t)}finally{0===(mu=n)&&(Pu(),Ia())}};var Wc={Events:[Vi,Hi,Gi,yt,bt,bc,{current:!1}]},qc={findFiberByHostInstance:ji,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Yc={bundleType:qc.bundleType,version:qc.version,rendererPackageName:qc.rendererPackageName,rendererConfig:qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=jt(e))?null:e.stateNode},findFiberByHostInstance:qc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{sa=Kc.inject(Yc),ua=Kc}catch(rt){}}V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,V.createPortal=Xc,V.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(q(188));throw Error(q(268,Object.keys(e)))}return e=null===(e=jt(t))?null:e.stateNode},V.flushSync=function(e,t){var n=mu;if(0!=(48&n))return e(t);mu|=1;try{if(e)return Ra(99,e.bind(null,t))}finally{mu=n,Ia()}},V.hydrate=function(e,t,n){if(!Gc(t))throw Error(q(200));return zc(null,e,t,!0,n)},V.render=function(e,t,n){if(!Gc(t))throw Error(q(200));return zc(null,e,t,!1,n)},V.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(q(40));return!!e._reactRootContainer&&(ac((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Bi]=null}))})),!0)},V.unstable_batchedUpdates=ic,V.unstable_createPortal=function(e,t){return Xc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},V.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gc(n))throw Error(q(200));if(null==e||void 0===e._reactInternals)throw Error(q(38));return zc(e,t,n,!1,r)},V.version="17.0.2",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),j.exports=V;var Zc=j.exports,Qc=n.exports.createContext({}),Jc={},$c={},el=function(e){return $c[e]},tl=function(e,t){$c[e]=t},nl=function(e,t){Jc[e]=t},rl={},il={};function al(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function ol(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function sl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ul(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+sl(-t,6):t>9999?"+"+sl(t,6):sl(t,4))+"-"+sl(e.getUTCMonth()+1,2)+"-"+sl(e.getUTCDate(),2)+(a?"T"+sl(n,2)+":"+sl(r,2)+":"+sl(i,2)+"."+sl(a,3)+"Z":i?"T"+sl(n,2)+":"+sl(r,2)+":"+sl(i,2)+"Z":r||n?"T"+sl(n,2)+":"+sl(r,2)+"Z":"")}var cl=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,s=0,u=a<=0,c=!1;function l(){if(u)return il;if(c)return c=!1,rl;var t,r,i=o;if(34===e.charCodeAt(i)){for(;o++<a&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=a?u=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(r=l())!==il;){for(var f=[];r!==rl&&r!==il;)f.push(r),r=l();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?ul(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=al(e);return function(r,i){return t(n(r),i,e)}}(e,t):al(e)}));return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=ol(t)),[n.map(o).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=ol(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}}(",").parse;function ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hl(e,t){if(e){if("string"==typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fl(e,t):void 0}}function pl(e){return function(e){if(Array.isArray(e))return fl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dl={},vl={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},ml=vl;function gl(e){var t=0;if(e&&e.length>0){t+=Math.abs(yl(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(yl(e[n]))}return t}function yl(e){var t,n,r,i,a,o,s=0,u=e.length;if(u>2){for(o=0;o<u;o++)o===u-2?(r=u-2,i=u-1,a=0):o===u-1?(r=u-1,i=0,a=1):(r=o,i=o+1,a=o+2),t=e[r],n=e[i],s+=(bl(e[a][0])-bl(t[0]))*Math.sin(bl(n[1]));s=s*ml.RADIUS*ml.RADIUS/2}return s}function bl(e){return e*Math.PI/180}dl.geometry=function e(t){var n,r=0;switch(t.type){case"Polygon":return gl(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=gl(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},dl.ring=yl;var _l=dl,El=function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(Sl(e,n)),t;case"GeometryCollection":return t.geometries=t.geometries.map(Sl(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return function(e,t){"Polygon"===e.type?e.coordinates=Tl(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(Sl(Tl,t)));return e}(t,n);default:return t}};function Sl(e,t){return function(n){return e(n,t)}}function Tl(e,t){t=!!t,e[0]=xl(e[0],t);for(var n=1;n<e.length;n++)e[n]=xl(e[n],!t);return e}function xl(e,t){return function(e){return _l.ring(e)>=0}(e)===t?e:e.reverse()}function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ol(e,t){var n=t.x,r=t.y,i=t.x1,a=t.y1,o=t.coordinates,s=[];return e.forEach((function(e,t){var u=[];(n&&r&&(u=[parseFloat(e[n]),parseFloat(e[r])]),n&&r&&i&&a)&&(u=[[parseFloat(e[n]),parseFloat(e[r])],[parseFloat(e[i]),parseFloat(e[a])]]);if(o){var c="Polygon";Array.isArray(o[0])||(c="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(c="LineString");var l={type:c,coordinates:pl(e[o])};El(l,!0),u=l.coordinates}var f=wl(wl({},e),{},{_id:t,coordinates:u});s.push(f)})),{dataArray:s}}var Cl={centimeters:637100880,centimetres:637100880,degrees:6371008.8/111325,feet:20902260.511392,inches:6371008.8*39.37,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6371008.8*1.0936};function kl(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Rl(e){return e%360*Math.PI/180}function Pl(e,t){!function(e,t){var n,r,i,a,o,s,u,c,l,f,h=0,p="FeatureCollection"===e.type,d="Feature"===e.type,v=p?e.features.length:1;for(n=0;n<v;n++){for(s=p?e.features[n].geometry:d?e.geometry:e,c=p?e.features[n].properties:d?e.properties:{},l=p?e.features[n].bbox:d?e.bbox:void 0,f=p?e.features[n].id:d?e.id:void 0,o=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<o;i++)if(null!==(a=u?s.geometries[i]:s))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,c,l,f))return!1;h++}}(e,(function(e,n,r,i,a){var o,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(kl(e,r,{bbox:i,id:a}),n,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var u=0;u<e.coordinates.length;u++){var c=e.coordinates[u];if(!1===t(kl({type:o,coordinates:c},r),n,u))return!1}}))}function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||hl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Dl(e){this.message=e}function Fl(e){for(var t,n,r,i,a="",o=0,s=(e=String(e)).length%3;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");a+=Ml.charAt((t=n<<16|r<<8|i)>>18&63)+Ml.charAt(t>>12&63)+Ml.charAt(t>>6&63)+Ml.charAt(63&t)}return s?a.slice(0,s-3)+"===".substring(s):a}function Bl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e,t,n){return t&&Ul(e.prototype,t),n&&Ul(e,n),e}Dl.prototype=new Error,Dl.prototype.name="InvalidCharacterError";var Vl,Hl=function(){function e(t,n){Bl(this,e),this.buffers=t,this.type=n}return jl(e,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(e,t,n){throw new Error("not implemented")}}]),e}();Vl="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(e){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(e){return null},clearMeasures:function(e){return null},clearMarks:function(e){return null},measure:function(e,t,n){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(e){return!0},Event:function(e,t){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window;var Gl="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast?my.getSystemInfoSync().pixelRatio:Vl.devicePixelRatio;function zl(e,t){return(zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zl(e,t)}function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yl(e,t){if(t&&("object"===Wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ql(e)}function Kl(e){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zl=function e(t,n){Bl(this,e),ll(this,"cancelBubble",void 0),ll(this,"cancelable",void 0),ll(this,"target",void 0),ll(this,"currentTarget",void 0),ll(this,"preventDefault",void 0),ll(this,"stopPropagation",void 0),ll(this,"type",void 0),ll(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=t,this.timeStamp=Date.now()};function Ql(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $l=new WeakMap,ef=function(){function e(){Bl(this,e),$l.set(this,{})}return jl(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$l.get(this);r||(r={}),r[e]||(r[e]=[]),r[e].push(t),$l.set(this,r),n.capture,n.once,n.passive}},{key:"removeEventListener",value:function(e,t){var n=$l.get(this);if(n){var r=n[e];if(r&&r.length>0)for(var i=r.length;i--;i>0)if(r[i]===t){r.splice(i,1);break}}}},{key:"dispatchEvent",value:function(e){var t=$l.get(this)[e.type];if(t){var n,r=Ql(t);try{for(r.s();!(n=r.n()).done;){(0,n.value)(e)}}catch(i){r.e(i)}finally{r.f()}}}}]),e}();function tf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var nf=function(e){Xl(n,ef);var t=tf(n);function n(){var e;return Bl(this,n),ll(ql(e=t.call(this)),"childNodes",void 0),e.childNodes=[],e}return jl(n,[{key:"appendChild",value:function(e){this.childNodes.push(e)}},{key:"cloneNode",value:function(){var e=Object.create(this);return Object.assign(e,this),e}},{key:"removeChild",value:function(e){var t=this.childNodes.findIndex((function(t){return t===e}));return t>-1?this.childNodes.splice(t,1):null}}]),n}();function rf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var af,of,sf,uf,cf=function(e){Xl(n,nf);var t=rf(n);function n(){var e;return Bl(this,n),ll(ql(e=t.call(this)),"className",void 0),ll(ql(e),"children",void 0),e.className="",e.children=[],e}return jl(n,[{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"setAttributeNS",value:function(e,t){this[e]=t}},{key:"getAttributeNS",value:function(e){return this[e]}}]),n}();if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast){var lf=my.getSystemInfoSync();af=lf.screenWidth,of=lf.screenHeight,sf=lf.windowWidth,uf=lf.windowHeight}else{var ff=Vl.innerWidth,hf=Vl.innerHeight;af=ff,of=hf,sf=ff,uf=hf}var pf={width:af,height:of,availWidth:sf,availHeight:uf,availLeft:0,availTop:0},df=pf.availWidth,vf=pf.availHeight,mf={style:[]};function gf(e,t){var n,r;"parentNode"in e||(n=0===t?function(){return null}:1===t?function(){return mf}:function(){return null},Object.defineProperty(e,"parentNode",{enumerable:!0,get:n}));"parentElement"in e||(r=0===t?function(){return null}:1===t?function(){return mf}:function(){return null},Object.defineProperty(e,"parentElement",{enumerable:!0,get:r}))}function yf(e){e.style=e.style||{},Object.assign(e.style,{top:"0px",left:"0px",width:df+"px",height:vf+"px",margin:"0px",padding:"0px"})}function bf(e){"clientLeft"in e||(e.clientLeft=0,e.clientTop=0),"clientWidth"in e||(e.clientWidth=df,e.clientHeight=vf),"getBoundingClientRect"in e||(e.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function _f(e){"offsetLeft"in e||(e.offsetLeft=0,e.offsetTop=0),"offsetWidth"in e||(e.offsetWidth=df,e.offsetHeight=vf)}function Ef(e){"scrollLeft"in e||(e.scrollLeft=0,e.scrollTop=0),"scrollWidth"in e||(e.scrollWidth=df,e.scrollHeight=vf)}function Sf(e){var t=function(){return!0};e.classList=[],e.classList.add=t,e.classList.remove=t,e.classList.contains=t,e.classList.toggle=t}function Tf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function xf(){}var Af=function(e){Xl(n,cf);var t=Tf(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Bl(this,n),ll(ql(e=t.call(this)),"className",void 0),ll(ql(e),"children",void 0),ll(ql(e),"focus",void 0),ll(ql(e),"blur",void 0),ll(ql(e),"insertBefore",void 0),ll(ql(e),"appendChild",void 0),ll(ql(e),"removeChild",void 0),ll(ql(e),"remove",void 0),ll(ql(e),"innerHTML",void 0),ll(ql(e),"tagName",void 0),e.className="",e.children=[],e.focus=xf,e.blur=xf,e.insertBefore=xf,e.appendChild=xf,e.removeChild=xf,e.remove=xf,e.innerHTML="",e.tagName=r.toUpperCase(),gf(ql(e),i),yf(ql(e)),Sf(ql(e)),bf(ql(e)),_f(ql(e)),Ef(ql(e)),e}return n}();function wf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var Of=function(e){Xl(n,Af);var t=wf(n);function n(e){return Bl(this,n),t.call(this,e)}return jl(n,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),n}();function Cf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var kf=function(e){Xl(n,Of);var t=Cf(n);function n(){return Bl(this,n),t.call(this,"video")}return n}(),Rf={};function Pf(){return Rf}var If=function e(){Bl(this,e);var t=Pf(),n=t.createImage&&t.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=e.prototype),gf(n),Sf(n),Object.assign(n,{addEventListener:function(e,t){n["on".concat(e)]=t.bind(n)},removeEventListener:function(e){n["on".concat(e)]=null}}),n},Nf={href:"",protocol:"",host:""};function Lf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var Mf=function(e){Xl(n,Af);var t=Lf(n);function n(){return Bl(this,n),t.call(this,"body",0)}return jl(n,[{key:"addEventListener",value:function(e,t){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"dispatchEvent",value:function(e){}}]),n}(),Df=function(e){Xl(n,Af);var t=Lf(n);function n(){return Bl(this,n),t.call(this,"html",0)}return jl(n,[{key:"addEventListener",value:function(e,t){}},{key:"removeEventListener",value:function(e,t){}},{key:"dispatchEvent",value:function(e){}}]),n}(),Ff={},Bf={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Nf,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(e){return"canvas"===(e=e.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===e?new If:"video"===e?new kf:new Af(e)},createElementNS:function(e,t){return this.createElement(t)},createTextNode:function(e){return e},getElementById:function(e){return null},getElementsByTagName:function(e){return e=e.toLowerCase(),[]},getElementsByTagNameNS:function(e,t){return this.getElementsByTagName(t)},getElementsByName:function(e){return[]},querySelector:function(e){return null},querySelectorAll:function(e){return[]},addEventListener:function(e,t,n){Ff[e]||(Ff[e]=[]),Ff[e].push(t)},removeEventListener:function(e,t){var n=Ff[e];if(n&&n.length>0)for(var r=n.length;r--;r>0)if(n[r]===t){n.splice(r,1);break}},dispatchEvent:function(e){var t=e.type,n=Ff[t];if(n)for(var r=0;r<n.length;r++)n[r](e);e.target&&"function"==typeof e.target["on"+t]&&e.target["on"+t](e)},createEvent:function(e){return new Zl(e)}};Bf.documentElement=new Df,Bf.head=new Af("head"),Bf.body=new Mf;var Uf,jf,Vf,Hf,Gf=Object,zf=function(){function e(){Bl(this,e),ll(this,"_w",void 0),ll(this,"_h",void 0),ll(this,"_data",void 0);var t=arguments.length;if(2===t){if("number"==typeof arguments[0]&&"number"==typeof arguments[1])return this._w=arguments[0],this._h=arguments[1],void(this._data=new Uint8ClampedArray(this._w*this._h*4))}else 3===t&&"object"===Wl(arguments[0])&&"number"==typeof arguments[1]&&"number"==typeof arguments[2]&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return jl(e,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),e}();if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast){var Xf=my.getSystemInfoSync();Uf=Xf.system,jf=Xf.platform,Vf=Xf.language}else{var Wf={versions:(Hf=Vl.navigator.userAgent,{trident:Hf.indexOf("Trident")>-1,presto:Hf.indexOf("Presto")>-1,webKit:Hf.indexOf("AppleWebKit")>-1,gecko:Hf.indexOf("Gecko")>-1&&-1===Hf.indexOf("KHTML"),mobile:!!Hf.match(/AppleWebKit.*Mobile.*/),ios:!!Hf.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Hf.indexOf("Android")>-1||Hf.indexOf("Linux")>-1,iPhone:Hf.indexOf("iPhone")>-1,iPad:Hf.indexOf("iPad")>-1,webApp:-1===Hf.indexOf("Safari"),weixin:Hf.indexOf("MicroMessenger")>-1,qq:" qq"===Hf.match(/\sQQ/i)}),language:(Vl.navigator.browserLanguage||Vl.navigator.language).toLowerCase()};Wf.versions.android?jf="android":Wf.versions.trident?jf="IE":Wf.versions.presto?jf="Opera":Wf.versions.webKit?jf="webKit":Wf.versions.gecko?jf="Firefox":Wf.versions.mobile?jf="mobile":Wf.versions.ios?jf="ios":Wf.versions.iPhone?jf="iPhone":Wf.versions.iPad?jf="ipad":Wf.versions.webApp?jf="webApp":Wf.versions.weixin?jf="weixin":Wf.versions.qq&&(jf="qq"),Uf=Vl.navigator.userAgent,Vf=Wf.language}var qf=-1!==Uf.toLowerCase().indexOf("android")?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",Yf="Mozilla/5.0 (".concat(qf,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(Vf),Kf={platform:jf,language:Vf,appVersion:"5.0 (".concat(qf,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:Yf},Zf=0;var Qf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Bl(this,e),ll(this,"href",void 0),0!=t.indexOf("http://")&&0!=t.indexOf("https://")?this.href=n+t:this.href=t}return jl(e,null,[{key:"createObjectURL",value:function(e){var t=e.buffers[0],n=e.type,r=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return Fl(t)}(t);return"data:".concat(n,";base64, ")+r}}]),e}();function Jf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var $f=new Map,eh=new Map,th=new Map,nh=function(e){Xl(n,ef);var t=Jf(n);function n(){var e;return Bl(this,n),ll(ql(e=t.call(this)),"onabort",void 0),ll(ql(e),"onerror",void 0),ll(ql(e),"onload",void 0),ll(ql(e),"onloadstart",void 0),ll(ql(e),"onprogress",void 0),ll(ql(e),"ontimeout",void 0),ll(ql(e),"onloadend",void 0),ll(ql(e),"onreadystatechange",void 0),ll(ql(e),"readyState",void 0),ll(ql(e),"response",void 0),ll(ql(e),"responseText",void 0),ll(ql(e),"_responseType",void 0),ll(ql(e),"responseXML",void 0),ll(ql(e),"status",void 0),ll(ql(e),"statusText",void 0),ll(ql(e),"upload",void 0),ll(ql(e),"withCredentials",void 0),ll(ql(e),"timeout",void 0),ll(ql(e),"_url",void 0),ll(ql(e),"_method",void 0),e.onabort=null,e.onerror=null,e.onload=null,e.onloadstart=null,e.onprogress=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,e.readyState=0,e.response=null,e.responseText=null,e._responseType="text",e.responseXML=null,e.status=0,e.statusText="",e.upload={},e.withCredentials=!1,$f.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),e}return jl(n,[{key:"responseType",set:function(e){this._responseType=e}},{key:"abort",value:function(){var e=th.get("requestTask");e&&e.abort()}},{key:"getAllResponseHeaders",value:function(){var e=eh.get("responseHeader");return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n")}},{key:"getResponseHeader",value:function(e){return eh.get("responseHeader")[e]}},{key:"open",value:function(e,t,n){this._method=e,this._url=t}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(e,t){var n=$f.get("requestHeader");n[e]=t,$f.set("requestHeader",n)}},{key:"addEventListener",value:function(e,t){var n=this;"function"==typeof t&&(this["on"+e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target=e.target||n,t.call(n,e)})}},{key:"removeEventListener",value:function(e,t){this["on"+e]===t&&(this["on"+e]=null)}}]),n}();function rh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function ih(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}ll(nh,"UNSEND",void 0),ll(nh,"OPENED",void 0),ll(nh,"HEADERS_RECEIVED",void 0),ll(nh,"LOADING",void 0),ll(nh,"DONE",void 0),nh.UNSEND=0,nh.OPENED=1,nh.HEADERS_RECEIVED=2,nh.LOADING=3,nh.DONE=4,function(e){Xl(n,Zl);var t=rh(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this,e)),"touches",void 0),ll(ql(r),"targetTouches",void 0),ll(ql(r),"changedTouches",void 0),r.touches=[],r.targetTouches=[],r.changedTouches=[],r.target=Pf(),r.currentTarget=Pf(),r}}(),function(e){Xl(n,Zl);var t=ih(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this,e)),"buttons",void 0),ll(ql(r),"which",void 0),ll(ql(r),"pointerId",void 0),ll(ql(r),"bubbles",void 0),ll(ql(r),"button",void 0),ll(ql(r),"width",void 0),ll(ql(r),"height",void 0),ll(ql(r),"pressure",void 0),ll(ql(r),"isPrimary",void 0),ll(ql(r),"pointerType",void 0),ll(ql(r),"altKey",void 0),ll(ql(r),"ctrlKey",void 0),ll(ql(r),"metaKey",void 0),ll(ql(r),"shiftKey",void 0),r.target=Pf(),r.currentTarget=Pf(),r}}(),function(e){Xl(n,Zl);var t=ah(n);function n(e){return Bl(this,n),t.call(this,e)}}();var oh="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast,sh="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),uh=oh||sh,ch={atob:function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Dl("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i="",a=0,o=0;r=t.charAt(o++);~r&&(n=a%4?64*n+r:r,a++%4)?i+=String.fromCharCode(255&n>>(-2*a&6)):0)r=Ml.indexOf(r);return i},btoa:Fl,devicePixelRatio:Gl,Blob:Hl,document:Bf,Element:cf,Event:Zl,EventTarget:ef,HTMLCanvasElement:Gf,HTMLElement:Af,HTMLMediaElement:Of,HTMLVideoElement:kf,Image:If,ImageData:zf,navigator:Kf,Node:nf,requestAnimationFrame:function(e){var t=Pf();return t.requestAnimationFrame?t.requestAnimationFrame(e):function(e){var t=Date.now(),n=Math.max(Zf+23,t);return setTimeout((function(){e(Zf=n)}),n-t)}(e)},cancelAnimationFrame:function(e){var t=Pf();return t.cancelAnimationFrame?t.cancelAnimationFrame(e):clearTimeout(e)},screen:pf,XMLHttpRequest:nh,performance:{mark:function(e){return null},clearMeasures:function(e){return null},clearMarks:function(e){return null},measure:function(e,t,n){return{duration:0}},now:function(){}},URL:Qf,WebGLRenderingContext:{GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0x10000000000000000,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},WebGL2RenderingContext:{},addEventListener:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bf.addEventListener(e,t,n)},removeEventListener:function(e,t,n){Bf.removeEventListener(e,t)},dispatchEvent:function(e){Bf.dispatchEvent(e)},innerWidth:pf.availWidth,innerHeight:pf.availHeight,setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},lh=uh?ch:Vl,fh=uh?nh:Vl.XMLHttpRequest;function hh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ph(e,t,n){var r=lh.document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function dh(e){var t=e.parentNode;t&&t.removeChild(e)}function vh(e,t){if(void 0!==e.classList)for(var n=hh(t).split(/\s+/),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!function(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=yh(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}(e,t)){var a=yh(e);gh(e,(a?a+" ":"")+t)}}function mh(e,t){void 0!==e.classList?e.classList.remove(t):gh(e,hh((" "+yh(e)+" ").replace(" "+t+" "," ")))}function gh(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function yh(e){return e instanceof SVGElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function bh(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}uh||Vl.location;var _h=function(e){var t,n,r=null==lh||null===(t=lh.document)||void 0===t||null===(n=t.documentElement)||void 0===n?void 0:n.style;if(!r)return e[0];for(var i in e)if(e[i]&&e[i]in r)return e[i];return e[0]}(["transform","WebkitTransform"]);function Eh(e,t){e.style[_h]=t}var Sh=function(){var e,t=lh.document.querySelector('meta[name="viewport"]');if(!t)return 1;var n=(null===(e=t.content)||void 0===e?void 0:e.split(",")).find((function(e){var t=Ll(e.split("="),2),n=t[0];return t[1],"initial-scale"===n}));return n?1*n.split("=")[1]:1}()<1?1:lh.devicePixelRatio;function Th(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xh(e,t,n){return(xh=Th()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&zl(i,n.prototype),i}).apply(null,arguments)}function Ah(e){var t="function"==typeof Map?new Map:void 0;return(Ah=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return xh(e,arguments,Kl(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zl(r,e)})(e)}function wh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var Oh=function(e){Xl(n,Ah(Error));var t=wh(n);function n(e,r,i){var a;return Bl(this,n),ll(ql(a=t.call(this,e)),"status",void 0),ll(ql(a),"url",void 0),a.status=r,a.url=i,a.name=a.constructor.name,a.message=e,a}return jl(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}();var Ch=function(e,t){var n=function(e){var t=new fh;for(var n in t.open("GET",e.url,!0),e.headers)e.headers.hasOwnProperty(n)&&t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new Oh(n.statusText,n.status,e.url))},n.send(),n},kh=function(e,t){return Ch(e,(function(e,n){if(e)t(e);else if(n){var r=new lh.Image;r.crossOrigin="anonymous";var i=lh.URL||lh.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var a=new lh.Blob([new Uint8Array(n.data)],{type:"image/png"});r.src=n.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}))};function Rh(e){var t=[1/0,1/0,-1/0,-1/0];return e.forEach((function(e){var n=e.coordinates;Ph(t,n)})),t}function Ph(e,t){return Array.isArray(t[0])?t.forEach((function(t){Ph(e,t)})):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function Ih(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,i=Math.PI/180,a=e[0]*i,o=n*i;o=Math.log(Math.tan(Math.PI/4+o/2));return a=r*(.5/Math.PI*a+.5),o=r*(-.5/Math.PI*o+(i=.5)),[Math.floor(a),Math.floor(o)]}function Nh(e,t,n){var r=Rl(t[1]-e[1]),i=Rl(t[0]-e[0]),a=Rl(e[1]),o=Rl(t[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(a)*Math.cos(o);return function(e,t){void 0===t&&(t="kilometers");var n=Cl[t];if(!n)throw new Error(t+" units is invalid");return e*n}(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function Lh(e,t){var n=Math.abs(e[1][1]-e[0][1])*t,r=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-r,e[0][1]-n],[e[1][0]+r,e[1][1]+n]]}var Mh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Bl(this,e),ll(this,"limit",void 0),ll(this,"cache",void 0),ll(this,"destroy",void 0),ll(this,"order",void 0),this.limit=t,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return jl(e,[{key:"clear",value:function(){var e=this;this.order.forEach((function(t){e.delete(t)})),this.cache={},this.order=[]}},{key:"get",value:function(e){var t=this.cache[e];return t&&(this.deleteOrder(e),this.appendOrder(e)),t}},{key:"set",value:function(e,t){this.cache[e]?(this.delete(e),this.cache[e]=t,this.appendOrder(e)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[e]=t,this.appendOrder(e))}},{key:"delete",value:function(e){var t=this.cache[e];t&&(this.deleteCache(e),this.deleteOrder(e),this.destroy(t,e))}},{key:"deleteCache",value:function(e){delete this.cache[e]}},{key:"deleteOrder",value:function(e){var t=this.order.findIndex((function(t){return t===e}));t>=0&&this.order.splice(t,1)}},{key:"appendOrder",value:function(e){this.order.push(e)}},{key:"defaultDestroy",value:function(e,t){return null}}]),e}();function Dh(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function Fh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Uh(){}var jh,Vh,Hh=1/.7,Gh="\\s*([+-]?\\d+)\\s*",zh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wh=/^#([0-9a-f]{3,8})$/,qh=new RegExp("^rgb\\("+[Gh,Gh,Gh]+"\\)$"),Yh=new RegExp("^rgb\\("+[Xh,Xh,Xh]+"\\)$"),Kh=new RegExp("^rgba\\("+[Gh,Gh,Gh,zh]+"\\)$"),Zh=new RegExp("^rgba\\("+[Xh,Xh,Xh,zh]+"\\)$"),Qh=new RegExp("^hsl\\("+[zh,Xh,Xh]+"\\)$"),Jh=new RegExp("^hsla\\("+[zh,Xh,Xh,zh]+"\\)$"),$h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ep(){return this.rgb().formatHex()}function tp(){return this.rgb().formatRgb()}function np(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rp(t):3===n?new op(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ip(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ip(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qh.exec(e))?new op(t[1],t[2],t[3],1):(t=Yh.exec(e))?new op(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kh.exec(e))?ip(t[1],t[2],t[3],t[4]):(t=Zh.exec(e))?ip(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qh.exec(e))?lp(t[1],t[2]/100,t[3]/100,1):(t=Jh.exec(e))?lp(t[1],t[2]/100,t[3]/100,t[4]):$h.hasOwnProperty(e)?rp($h[e]):"transparent"===e?new op(NaN,NaN,NaN,0):null}function rp(e){return new op(e>>16&255,e>>8&255,255&e,1)}function ip(e,t,n,r){return r<=0&&(e=t=n=NaN),new op(e,t,n,r)}function ap(e){return e instanceof Uh||(e=np(e)),e?new op((e=e.rgb()).r,e.g,e.b,e.opacity):new op}function op(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function sp(){return"#"+cp(this.r)+cp(this.g)+cp(this.b)}function up(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function cp(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function lp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hp(e,t,n,r)}function fp(e){if(e instanceof hp)return new hp(e.h,e.s,e.l,e.opacity);if(e instanceof Uh||(e=np(e)),!e)return new hp;if(e instanceof hp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new hp(o,s,u,e.opacity)}function hp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function pp(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dp(e){return(e&&e[0])+256*(e&&e[1])+65536*(e&&e[2])-1}function vp(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}Fh(Uh,np,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ep,formatHex:ep,formatHsl:function(){return fp(this).formatHsl()},formatRgb:tp,toString:tp}),Fh(op,(function(e,t,n,r){return 1===arguments.length?ap(e):new op(e,t,n,null==r?1:r)}),Bh(Uh,{brighter:function(e){return e=null==e?Hh:Math.pow(Hh,e),new op(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new op(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sp,formatHex:sp,formatRgb:up,toString:up})),Fh(hp,(function(e,t,n,r){return 1===arguments.length?fp(e):new hp(e,t,n,null==r?1:r)}),Bh(Uh,{brighter:function(e){return e=null==e?Hh:Math.pow(Hh,e),new hp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new op(pp(e>=240?e-240:e+120,i,r),pp(e,i,r),pp(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}})),(Vh=jh||(jh={})).CENTER="center",Vh.TOP="top",Vh["TOP-LEFT"]="top-left",Vh["TOP-RIGHT"]="top-right",Vh.BOTTOM="bottom",Vh["BOTTOM-LEFT"]="bottom-left",Vh.LEFT="left",Vh.RIGHT="right";var mp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gp(e,t,n){var r=e.classList;for(var i in mp)mp.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(t))}function yp(e){if(0===e.length)return 0;for(var t=1*e[0],n=1;n<e.length;n++)t+=1*e[n];return t}var bp={min:function(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return 1*t},max:function(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return 1*t},mean:function(e){if(0===e.length)throw new Error("mean requires at least one data point");return yp(e)/e.length},sum:yp,mode:function(e){if(0===e.length)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var t=e[0],n=NaN,r=0,i=1,a=1;a<e.length+1;a++)e[a]!==t?(i>r&&(r=i,n=t),i=1,t=e[a]):i++;return 1*n}};function _p(e,t){return e.map((function(e){return e[t]}))}function Ep(e,t){var n=t.extent,r=void 0===n?[121.168,30.2828,121.384,30.4219]:n,i=new Promise((function(t){!function(e,t){var n=e,r=[];if("string"==typeof n)kh({url:n},(function(e,n){r.push(n),t(r)}));else{var i=n.length,a=0;n.forEach((function(e){kh({url:e},(function(e,n){a++,r.push(n),a===i&&t(r)}))}))}}(e,(function(e){t(e)}))}));return{originData:e,images:i,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]}}var Sp=function(){this.__data__=[],this.size=0};var Tp=function(e,t){return e===t||e!=e&&t!=t},xp=Tp;var Ap=function(e,t){for(var n=e.length;n--;)if(xp(e[n][0],t))return n;return-1},wp=Ap,Op=Array.prototype.splice;var Cp=Ap;var kp=Ap;var Rp=Ap;var Pp=Sp,Ip=function(e){var t=this.__data__,n=wp(t,e);return!(n<0)&&(n==t.length-1?t.pop():Op.call(t,n,1),--this.size,!0)},Np=function(e){var t=this.__data__,n=Cp(t,e);return n<0?void 0:t[n][1]},Lp=function(e){return kp(this.__data__,e)>-1},Mp=function(e,t){var n=this.__data__,r=Rp(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Dp(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dp.prototype.clear=Pp,Dp.prototype.delete=Ip,Dp.prototype.get=Np,Dp.prototype.has=Lp,Dp.prototype.set=Mp;var Fp=Dp,Bp=Fp;var Up=function(){this.__data__=new Bp,this.size=0};var jp=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Vp=function(e){return this.__data__.get(e)};var Hp=function(e){return this.__data__.has(e)},Gp="object"==typeof e&&e&&e.Object===Object&&e,zp=Gp,Xp="object"==typeof self&&self&&self.Object===Object&&self,Wp=zp||Xp||Function("return this")(),qp=Wp.Symbol,Yp=qp,Kp=Object.prototype,Zp=Kp.hasOwnProperty,Qp=Kp.toString,Jp=Yp?Yp.toStringTag:void 0;var $p=function(e){var t=Zp.call(e,Jp),n=e[Jp];try{e[Jp]=void 0;var r=!0}catch(a){}var i=Qp.call(e);return r&&(t?e[Jp]=n:delete e[Jp]),i},ed=Object.prototype.toString;var td=$p,nd=function(e){return ed.call(e)},rd=qp?qp.toStringTag:void 0;var id=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rd&&rd in Object(e)?td(e):nd(e)};var ad=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},od=id,sd=ad;var ud,cd=function(e){if(!sd(e))return!1;var t=od(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ld=Wp["__core-js_shared__"],fd=(ud=/[^.]+$/.exec(ld&&ld.keys&&ld.keys.IE_PROTO||""))?"Symbol(src)_1."+ud:"";var hd=function(e){return!!fd&&fd in e},pd=Function.prototype.toString;var dd=function(e){if(null!=e){try{return pd.call(e)}catch(t){}try{return e+""}catch(t){}}return""},vd=cd,md=hd,gd=ad,yd=dd,bd=/^\[object .+?Constructor\]$/,_d=Function.prototype,Ed=Object.prototype,Sd=_d.toString,Td=Ed.hasOwnProperty,xd=RegExp("^"+Sd.call(Td).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ad=function(e){return!(!gd(e)||md(e))&&(vd(e)?xd:bd).test(yd(e))},wd=function(e,t){return null==e?void 0:e[t]};var Od=function(e,t){var n=wd(e,t);return Ad(n)?n:void 0},Cd=Od(Wp,"Map"),kd=Od(Object,"create"),Rd=kd;var Pd=function(){this.__data__=Rd?Rd(null):{},this.size=0};var Id=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nd=kd,Ld=Object.prototype.hasOwnProperty;var Md=function(e){var t=this.__data__;if(Nd){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ld.call(t,e)?t[e]:void 0},Dd=kd,Fd=Object.prototype.hasOwnProperty;var Bd=kd;var Ud=Pd,jd=Id,Vd=Md,Hd=function(e){var t=this.__data__;return Dd?void 0!==t[e]:Fd.call(t,e)},Gd=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Bd&&void 0===t?"__lodash_hash_undefined__":t,this};function zd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zd.prototype.clear=Ud,zd.prototype.delete=jd,zd.prototype.get=Vd,zd.prototype.has=Hd,zd.prototype.set=Gd;var Xd=zd,Wd=Fp,qd=Cd;var Yd=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Kd=function(e,t){var n=e.__data__;return Yd(t)?n["string"==typeof t?"string":"hash"]:n.map},Zd=Kd;var Qd=Kd;var Jd=Kd;var $d=Kd;var ev=function(){this.size=0,this.__data__={hash:new Xd,map:new(qd||Wd),string:new Xd}},tv=function(e){var t=Zd(this,e).delete(e);return this.size-=t?1:0,t},nv=function(e){return Qd(this,e).get(e)},rv=function(e){return Jd(this,e).has(e)},iv=function(e,t){var n=$d(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function av(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}av.prototype.clear=ev,av.prototype.delete=tv,av.prototype.get=nv,av.prototype.has=rv,av.prototype.set=iv;var ov=av,sv=Fp,uv=Cd,cv=ov;var lv=Fp,fv=Up,hv=jp,pv=Vp,dv=Hp,vv=function(e,t){var n=this.__data__;if(n instanceof sv){var r=n.__data__;if(!uv||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new cv(r)}return n.set(e,t),this.size=n.size,this};function mv(e){var t=this.__data__=new lv(e);this.size=t.size}mv.prototype.clear=fv,mv.prototype.delete=hv,mv.prototype.get=pv,mv.prototype.has=dv,mv.prototype.set=vv;var gv=mv,yv=Od,bv=function(){try{var e=yv(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),_v=bv;var Ev=function(e,t,n){"__proto__"==t&&_v?_v(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Sv=Ev,Tv=Tp;var xv=function(e,t,n){(void 0!==n&&!Tv(e[t],n)||void 0===n&&!(t in e))&&Sv(e,t,n)};var Av,wv,Ov,Cv,kv,Rv,Pv,Iv=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}(),Nv={exports:{}};Av=Nv,Ov=Wp,Cv=(wv=Nv.exports)&&!wv.nodeType&&wv,kv=Cv&&Av&&!Av.nodeType&&Av,Rv=kv&&kv.exports===Cv?Ov.Buffer:void 0,Pv=Rv?Rv.allocUnsafe:void 0,Av.exports=function(e,t){if(t)return e.slice();var n=e.length,r=Pv?Pv(n):new e.constructor(n);return e.copy(r),r};var Lv=Wp.Uint8Array;var Mv=function(e){var t=new e.constructor(e.byteLength);return new Lv(t).set(new Lv(e)),t},Dv=Mv;var Fv=function(e,t){var n=t?Dv(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Bv=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Uv=ad,jv=Object.create,Vv=function(){function e(){}return function(t){if(!Uv(t))return{};if(jv)return jv(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Hv=function(e,t){return function(n){return e(t(n))}},Gv=Hv(Object.getPrototypeOf,Object),zv=Object.prototype;var Xv=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||zv)},Wv=Vv,qv=Gv,Yv=Xv;var Kv=function(e){return"function"!=typeof e.constructor||Yv(e)?{}:Wv(qv(e))};var Zv=function(e){return null!=e&&"object"==typeof e},Qv=id,Jv=Zv;var $v=function(e){return Jv(e)&&"[object Arguments]"==Qv(e)},em=Zv,tm=Object.prototype,nm=tm.hasOwnProperty,rm=tm.propertyIsEnumerable,im=$v(function(){return arguments}())?$v:function(e){return em(e)&&nm.call(e,"callee")&&!rm.call(e,"callee")},am=Array.isArray;var om=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},sm=cd,um=om;var cm=function(e){return null!=e&&um(e.length)&&!sm(e)},lm=cm,fm=Zv;var hm=function(e){return fm(e)&&lm(e)},pm={exports:{}};var dm=function(){return!1};!function(e,t){var n=Wp,r=dm,i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?n.Buffer:void 0,s=(o?o.isBuffer:void 0)||r;e.exports=s}(pm,pm.exports);var vm=id,mm=Gv,gm=Zv,ym=Function.prototype,bm=Object.prototype,_m=ym.toString,Em=bm.hasOwnProperty,Sm=_m.call(Object);var Tm=function(e){if(!gm(e)||"[object Object]"!=vm(e))return!1;var t=mm(e);if(null===t)return!0;var n=Em.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&_m.call(n)==Sm},xm=id,Am=om,wm=Zv,Om={};Om["[object Float32Array]"]=Om["[object Float64Array]"]=Om["[object Int8Array]"]=Om["[object Int16Array]"]=Om["[object Int32Array]"]=Om["[object Uint8Array]"]=Om["[object Uint8ClampedArray]"]=Om["[object Uint16Array]"]=Om["[object Uint32Array]"]=!0,Om["[object Arguments]"]=Om["[object Array]"]=Om["[object ArrayBuffer]"]=Om["[object Boolean]"]=Om["[object DataView]"]=Om["[object Date]"]=Om["[object Error]"]=Om["[object Function]"]=Om["[object Map]"]=Om["[object Number]"]=Om["[object Object]"]=Om["[object RegExp]"]=Om["[object Set]"]=Om["[object String]"]=Om["[object WeakMap]"]=!1;var Cm=function(e){return wm(e)&&Am(e.length)&&!!Om[xm(e)]};var km=function(e){return function(t){return e(t)}},Rm={exports:{}};!function(e,t){var n=Gp,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,a=i&&i.exports===r&&n.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=o}(Rm,Rm.exports);var Pm=Cm,Im=km,Nm=Rm.exports,Lm=Nm&&Nm.isTypedArray,Mm=Lm?Im(Lm):Pm;var Dm=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Fm=Ev,Bm=Tp,Um=Object.prototype.hasOwnProperty;var jm=function(e,t,n){var r=e[t];Um.call(e,t)&&Bm(r,n)&&(void 0!==n||t in e)||Fm(e,t,n)},Vm=jm,Hm=Ev;var Gm=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Hm(n,s,u):Vm(n,s,u)}return n};var zm=/^(?:0|[1-9]\d*)$/;var Xm=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&zm.test(e))&&e>-1&&e%1==0&&e<t},Wm=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},qm=im,Ym=am,Km=pm.exports,Zm=Xm,Qm=Mm,Jm=Object.prototype.hasOwnProperty;var $m=function(e,t){var n=Ym(e),r=!n&&qm(e),i=!n&&!r&&Km(e),a=!n&&!r&&!i&&Qm(e),o=n||r||i||a,s=o?Wm(e.length,String):[],u=s.length;for(var c in e)!t&&!Jm.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Zm(c,u))||s.push(c);return s};var eg=ad,tg=Xv,ng=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},rg=Object.prototype.hasOwnProperty;var ig=$m,ag=function(e){if(!eg(e))return ng(e);var t=tg(e),n=[];for(var r in e)("constructor"!=r||!t&&rg.call(e,r))&&n.push(r);return n},og=cm;var sg=function(e){return og(e)?ig(e,!0):ag(e)},ug=Gm,cg=sg;var lg=xv,fg=Nv.exports,hg=Fv,pg=Bv,dg=Kv,vg=im,mg=am,gg=hm,yg=pm.exports,bg=cd,_g=ad,Eg=Tm,Sg=Mm,Tg=Dm,xg=function(e){return ug(e,cg(e))};var Ag=gv,wg=xv,Og=Iv,Cg=function(e,t,n,r,i,a,o){var s=Tg(e,n),u=Tg(t,n),c=o.get(u);if(c)lg(e,n,c);else{var l=a?a(s,u,n+"",e,t,o):void 0,f=void 0===l;if(f){var h=mg(u),p=!h&&yg(u),d=!h&&!p&&Sg(u);l=u,h||p||d?mg(s)?l=s:gg(s)?l=pg(s):p?(f=!1,l=fg(u,!0)):d?(f=!1,l=hg(u,!0)):l=[]:Eg(u)||vg(u)?(l=s,vg(s)?l=xg(s):_g(s)&&!bg(s)||(l=dg(u))):f=!1}f&&(o.set(u,l),i(l,u,r,a,o),o.delete(u)),lg(e,n,l)}},kg=ad,Rg=sg,Pg=Dm;var Ig=function e(t,n,r,i,a){t!==n&&Og(n,(function(o,s){if(a||(a=new Ag),kg(o))Cg(t,n,s,r,e,i,a);else{var u=i?i(Pg(t,s),o,s+"",t,n,a):void 0;void 0===u&&(u=o),wg(t,s,u)}}),Rg)};var Ng=function(e){return e};var Lg=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Mg=Math.max;var Dg=function(e,t,n){return t=Mg(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Mg(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Lg(e,this,s)}};var Fg=function(e){return function(){return e}},Bg=bv,Ug=Bg?function(e,t){return Bg(e,"toString",{configurable:!0,enumerable:!1,value:Fg(t),writable:!0})}:Ng,jg=Date.now;var Vg=function(e){var t=0,n=0;return function(){var r=jg(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ug),Hg=Ng,Gg=Dg,zg=Vg;var Xg=Tp,Wg=cm,qg=Xm,Yg=ad;var Kg=function(e,t){return zg(Gg(e,t,Hg),e+"")},Zg=function(e,t,n){if(!Yg(n))return!1;var r=typeof t;return!!("number"==r?Wg(n)&&qg(t,n.length):"string"==r&&t in n)&&Xg(n[t],e)};var Qg=function(e){return Kg((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&Zg(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))},Jg=Ig,$g=Qg((function(e,t,n,r){Jg(e,t,n,r)})),ey=id,ty=am,ny=Zv;var ry=function(e){return"string"==typeof e||!ty(e)&&ny(e)&&"[object String]"==ey(e)};var iy=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},ay=Hv(Object.keys,Object),oy=Xv,sy=ay,uy=Object.prototype.hasOwnProperty;var cy=$m,ly=function(e){if(!oy(e))return sy(e);var t=[];for(var n in Object(e))uy.call(e,n)&&"constructor"!=n&&t.push(n);return t},fy=cm;var hy=function(e){return fy(e)?cy(e):ly(e)},py=Gm,dy=hy;var vy=function(e,t){return e&&py(t,dy(t),e)},gy=Gm,yy=sg;var by=function(e,t){return e&&gy(t,yy(t),e)};var _y=function(){return[]},Ey=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a},Sy=_y,Ty=Object.prototype.propertyIsEnumerable,xy=Object.getOwnPropertySymbols,Ay=xy?function(e){return null==e?[]:(e=Object(e),Ey(xy(e),(function(t){return Ty.call(e,t)})))}:Sy,wy=Gm,Oy=Ay;var Cy=function(e,t){return wy(e,Oy(e),t)};var ky=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Ry=ky,Py=Gv,Iy=Ay,Ny=_y,Ly=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ry(t,Iy(e)),e=Py(e);return t}:Ny,My=Gm,Dy=Ly;var Fy=function(e,t){return My(e,Dy(e),t)},By=ky,Uy=am;var jy=function(e,t,n){var r=t(e);return Uy(e)?r:By(r,n(e))},Vy=jy,Hy=Ay,Gy=hy;var zy=function(e){return Vy(e,Gy,Hy)},Xy=jy,Wy=Ly,qy=sg;var Yy=function(e){return Xy(e,qy,Wy)},Ky=Od(Wp,"DataView"),Zy=Od(Wp,"Promise"),Qy=Od(Wp,"Set"),Jy=Ky,$y=Cd,eb=Zy,tb=Qy,nb=Od(Wp,"WeakMap"),rb=id,ib=dd,ab=ib(Jy),ob=ib($y),sb=ib(eb),ub=ib(tb),cb=ib(nb),lb=rb;(Jy&&"[object DataView]"!=lb(new Jy(new ArrayBuffer(1)))||$y&&"[object Map]"!=lb(new $y)||eb&&"[object Promise]"!=lb(eb.resolve())||tb&&"[object Set]"!=lb(new tb)||nb&&"[object WeakMap]"!=lb(new nb))&&(lb=function(e){var t=rb(e),n="[object Object]"==t?e.constructor:void 0,r=n?ib(n):"";if(r)switch(r){case ab:return"[object DataView]";case ob:return"[object Map]";case sb:return"[object Promise]";case ub:return"[object Set]";case cb:return"[object WeakMap]"}return t});var fb=lb,hb=Object.prototype.hasOwnProperty;var pb=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&hb.call(e,"index")&&(n.index=e.index,n.input=e.input),n},db=Mv;var vb=function(e,t){var n=t?db(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},mb=/\w*$/;var gb=function(e){var t=new e.constructor(e.source,mb.exec(e));return t.lastIndex=e.lastIndex,t},yb=qp?qp.prototype:void 0,bb=yb?yb.valueOf:void 0;var _b=Mv,Eb=vb,Sb=gb,Tb=function(e){return bb?Object(bb.call(e)):{}},xb=Fv;var Ab=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return _b(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Eb(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return xb(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Sb(e);case"[object Set]":return new r;case"[object Symbol]":return Tb(e)}},wb=fb,Ob=Zv;var Cb=function(e){return Ob(e)&&"[object Map]"==wb(e)},kb=km,Rb=Rm.exports,Pb=Rb&&Rb.isMap,Ib=Pb?kb(Pb):Cb,Nb=fb,Lb=Zv;var Mb=function(e){return Lb(e)&&"[object Set]"==Nb(e)},Db=km,Fb=Rm.exports,Bb=Fb&&Fb.isSet,Ub=Bb?Db(Bb):Mb,jb=gv,Vb=iy,Hb=jm,Gb=vy,zb=by,Xb=Nv.exports,Wb=Bv,qb=Cy,Yb=Fy,Kb=zy,Zb=Yy,Qb=fb,Jb=pb,$b=Ab,e_=Kv,t_=am,n_=pm.exports,r_=Ib,i_=ad,a_=Ub,o_=hy,s_=sg,u_={};u_["[object Arguments]"]=u_["[object Array]"]=u_["[object ArrayBuffer]"]=u_["[object DataView]"]=u_["[object Boolean]"]=u_["[object Date]"]=u_["[object Float32Array]"]=u_["[object Float64Array]"]=u_["[object Int8Array]"]=u_["[object Int16Array]"]=u_["[object Int32Array]"]=u_["[object Map]"]=u_["[object Number]"]=u_["[object Object]"]=u_["[object RegExp]"]=u_["[object Set]"]=u_["[object String]"]=u_["[object Symbol]"]=u_["[object Uint8Array]"]=u_["[object Uint8ClampedArray]"]=u_["[object Uint16Array]"]=u_["[object Uint32Array]"]=!0,u_["[object Error]"]=u_["[object Function]"]=u_["[object WeakMap]"]=!1;var c_=function e(t,n,r,i,a,o){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=a?r(t,i,a,o):r(t)),void 0!==s)return s;if(!i_(t))return t;var f=t_(t);if(f){if(s=Jb(t),!u)return Wb(t,s)}else{var h=Qb(t),p="[object Function]"==h||"[object GeneratorFunction]"==h;if(n_(t))return Xb(t,u);if("[object Object]"==h||"[object Arguments]"==h||p&&!a){if(s=c||p?{}:e_(t),!u)return c?Yb(t,zb(s,t)):qb(t,Gb(s,t))}else{if(!u_[h])return a?t:{};s=$b(t,h,u)}}o||(o=new jb);var d=o.get(t);if(d)return d;o.set(t,s),a_(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,o))})):r_(t)&&t.forEach((function(i,a){s.set(a,e(i,n,r,a,t,o))}));var v=f?void 0:(l?c?Zb:Kb:c?s_:o_)(t);return Vb(v||t,(function(i,a){v&&(i=t[a=i]),Hb(s,a,e(i,n,r,a,t,o))})),s};var l_=function(e){return c_(e,5)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function f_(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function h_(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function p_(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function d_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function v_(e,t){return e(t={exports:{}},t.exports),t.exports}var m_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0},e.exports=t.default}));d_(m_);var g_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=t.pop();return e.call(this,t,r)}},e.exports=t.default}));d_(g_);var y_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=a,t.wrap=o;var n,r=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,i=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function a(e){setTimeout(e,0)}function o(e){return function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return e((function(){return t.apply(void 0,n)}))}}n=r?setImmediate:i?process.nextTick:a,t.default=o(n)}));d_(y_),y_.fallback,y_.wrap,y_.hasSetImmediate,y_.hasNextTick;var b_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,__.isAsync)(e))return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=t.pop(),i=e.apply(this,t);return a(i,r)};return(0,n.default)((function(t,n){var r;try{r=e.apply(this,t)}catch(i){return n(i)}if(r&&"function"==typeof r.then)return a(r,n);n(null,r)}))};var n=i(g_),r=i(y_);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.then((function(e){o(t,null,e)}),(function(e){o(t,e&&e.message?e:new Error(e))}))}function o(e,t,n){try{e(t,n)}catch(i){(0,r.default)((function(e){throw e}),i)}}e.exports=t.default}));d_(b_);var __=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var n,r=(n=b_)&&n.__esModule?n:{default:n};function i(e){return"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return i(e)?(0,r.default)(e):e},t.isAsync=i,t.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},t.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]}}));d_(__),__.isAsyncIterable,__.isAsyncGenerator,__.isAsync;var E_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=e.length);if(!t)throw new Error("arity is undefined");function n(){for(var n=this,r=[],i=arguments.length;i--;)r[i]=arguments[i];return"function"==typeof r[t-1]?e.apply(this,r):new Promise((function(i,a){r[t-1]=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(e)return a(e);i(t.length>1?t:t[0])},e.apply(n,r)}))}return Object.defineProperty(n,"name",{configurable:!0,value:"awaitable("+e.name+")"}),n},e.exports=t.default}));d_(E_);var S_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=a(m_),r=a(__),i=a(E_);function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t,i){var a=(0,n.default)(t)?[]:{};e(t,(function(e,t,n){(0,r.default)(e)((function(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];r.length<2&&(r=r[0]),a[t]=r,n(e)}))}),(function(e){return i(e,a)}))}),3),e.exports=t.default}));d_(S_);var T_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(null!==e){var r=e;e=null,r.apply(this,t)}}return Object.assign(t,e),t},e.exports=t.default}));d_(T_);var x_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()},e.exports=t.default}));d_(x_);var A_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,n.default)(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=(0,r.default)(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):(i=e,a=i?Object.keys(i):[],o=-1,s=a.length,function(){var e=a[++o];return o<s?{value:i[e],key:e}:null});var i,a,o,s};var n=i(m_),r=i(x_);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}));d_(A_);var w_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(null===e)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}},e.exports=t.default}));d_(w_);var O_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={},e.exports=t.default}));d_(O_);var C_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var a=!1,o=!1,s=!1,u=0,c=0;function l(){u>=t||s||a||(s=!0,e.next().then((function(e){var t=e.value,r=e.done;if(!o&&!a){if(s=!1,r)return a=!0,void(u<=0&&i(null));u++,n(t,c,f),c++,l()}})).catch(h))}function f(e,t){if(u-=1,!o)return e?h(e):!1===e?(a=!0,void(o=!0)):t===r.default||a&&u<=0?(a=!0,i(null)):void l()}function h(e){o||(s=!1,a=!0,i(e))}l()};var n,r=(n=O_)&&n.__esModule?n:{default:n};e.exports=t.default}));d_(C_);var k_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=s(T_),r=s(A_),i=s(w_),a=s(C_),o=s(O_);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t,s,u){if(u=(0,n.default)(u),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return u(null);if((0,__.isAsyncGenerator)(t))return(0,a.default)(t,e,s,u);if((0,__.isAsyncIterable)(t))return(0,a.default)(t[Symbol.asyncIterator](),e,s,u);var c=(0,r.default)(t),l=!1,f=!1,h=0,p=!1;function d(e,t){if(!f)if(h-=1,e)l=!0,u(e);else if(!1===e)l=!0,f=!0;else{if(t===o.default||l&&h<=0)return l=!0,u(null);p||v()}}function v(){for(p=!0;h<e&&!l;){var t=c();if(null===t)return l=!0,void(h<=0&&u(null));h+=1,s(t.value,t.key,(0,i.default)(d))}p=!1}v()}},e.exports=t.default}));d_(k_);var R_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=a(k_),r=a(__),i=a(E_);function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t,i,a){return(0,n.default)(t)(e,(0,r.default)(i),a)}),4),e.exports=t.default}));d_(R_);var P_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=i(R_),r=i(E_);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e,t,r){return(0,n.default)(e,1,t,r)}),3),e.exports=t.default}));d_(P_);var I_=d_(v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(r.default,e,t)};var n=i(S_),r=i(P_);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}))),N_=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return this.args=t,I_(this.tasks)},e.prototype.tap=function(e,t){var n=this;this.tasks.push((function(r){t.apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p_(arguments[t]));return e}(n.args)),r(null,e)}))},e}(),L_=v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=c(m_),r=c(O_),i=c(R_),a=c(T_),o=c(w_),s=c(__),u=c(E_);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){n=(0,a.default)(n);var i=0,s=0,u=e.length,c=!1;function l(e,t){!1===e&&(c=!0),!0!==c&&(e?n(e):++s!==u&&t!==r.default||n(null))}for(0===u&&n(null);i<u;i++)t(e[i],i,(0,o.default)(l))}function f(e,t,n){return(0,i.default)(e,1/0,t,n)}t.default=(0,u.default)((function(e,t,r){return((0,n.default)(e)?l:f)(e,(0,s.default)(t),r)}),3),e.exports=t.default}));d_(L_);var M_=d_(v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(n.default,e,t)};var n=i(L_),r=i(S_);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}))),D_=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];this.tasks=[]}return e.prototype.promise=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return M_(this.tasks)},e.prototype.tapPromise=function(e,t){var n=this;this.tasks.push((function(r){return f_(n,void 0,void 0,(function(){return h_(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return n.sent(),r(null,e),[2]}}))}))}))},e}();d_(v_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(T_),r=o(w_),i=o(__),a=o(E_);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)((function(e,t){if(t=(0,n.default)(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var a=0;function o(t){(0,i.default)(e[a++]).apply(void 0,t.concat([(0,r.default)(s)]))}function s(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];if(!1!==n)return n||a===e.length?t.apply(void 0,[n].concat(r)):void o(r)}o([])})),e.exports=t.default})));var F_={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,a),!0;case 6:return l.fn.call(l.context,t,r,i,a,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(F_);var B_=F_.exports,U_={exports:{}},j_=U_.exports=function(){function e(n,r,i,a,o,s){if(!(o-a<=i)){var u=a+o>>1;t(n,r,u,a,o,s%2),e(n,r,i,a,u-1,s+1),e(n,r,i,u+1,o,s+1)}}function t(e,r,i,a,o,s){for(;o>a;){if(o-a>600){var u=o-a+1,c=i-a+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);t(e,r,i,Math.max(a,Math.floor(i-c*f/u+h)),Math.min(o,Math.floor(i+(u-c)*f/u+h)),s)}var p=r[2*i+s],d=a,v=o;for(n(e,r,a,i),r[2*o+s]>p&&n(e,r,a,o);d<v;){for(n(e,r,d,v),d++,v--;r[2*d+s]<p;)d++;for(;r[2*v+s]>p;)v--}r[2*a+s]===p?n(e,r,a,v):n(e,r,++v,o),v<=i&&(a=v+1),i<=v&&(o=v-1)}}function n(e,t,n,i){r(e,n,i),r(t,2*n,2*i),r(t,2*n+1,2*i+1)}function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n,r,i,a,o){for(var s,u,c=[0,e.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=o)for(var d=p;d<=h;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=a&&l.push(e[d]);else{var v=Math.floor((p+h)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=a&&l.push(e[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(m)),(0===f?i>=s:a>=u)&&(c.push(v+1),c.push(h),c.push(m))}}return l}function a(e,t,n,r,i,a){for(var s=[0,e.length-1,0],u=[],c=i*i;s.length;){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=a)for(var p=h;p<=f;p++)o(t[2*p],t[2*p+1],n,r)<=c&&u.push(e[p]);else{var d=Math.floor((h+f)/2),v=t[2*d],m=t[2*d+1];o(v,m,n,r)<=c&&u.push(e[d]);var g=(l+1)%2;(0===l?n-i<=v:r-i<=m)&&(s.push(h),s.push(d-1),s.push(g)),(0===l?n+i>=v:r+i>=m)&&(s.push(d+1),s.push(f),s.push(g))}}return u}function o(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}var s=function(e){return e[0]},u=function(e){return e[1]},c=function(t,n,r,i,a){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===a&&(a=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,c=this.ids=new o(t.length),l=this.coords=new a(2*t.length),f=0;f<t.length;f++)c[f]=f,l[2*f]=n(t[f]),l[2*f+1]=r(t[f]);e(c,l,i,0,c.length-1,0)};c.prototype.range=function(e,t,n,r){return i(this.ids,this.coords,e,t,n,r,this.nodeSize)},c.prototype.within=function(e,t,n){return a(this.ids,this.coords,e,t,n,this.nodeSize)};var l,f={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},h=Math.fround||(l=new Float32Array(1),function(e){return l[0]=+e,l[0]}),p=function(e){this.options=S(Object.create(f),e),this.trees=new Array(this.options.maxZoom+1)};function d(e,t,n,r,i){return{x:h(e),y:h(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function v(e,t){var n=e.geometry.coordinates,r=n[0],i=n[1];return{x:h(y(r)),y:h(b(i)),zoom:1/0,index:t,parentId:-1}}function m(e){return{type:"Feature",id:e.id,properties:g(e),geometry:{type:"Point",coordinates:[_(e.x),E(e.y)]}}}function g(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return S(S({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function y(e){return e/360+.5}function b(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function _(e){return 360*(e-.5)}function E(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function S(e,t){for(var n in t)e[n]=t[n];return e}function T(e){return e.x}function x(e){return e.y}return p.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare "+e.length+" points";n&&console.time(o),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(v(e[u],u));this.trees[i+1]=new c(s,T,x,a,Float32Array),n&&console.timeEnd(o);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new c(s,T,x,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},p.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}for(var u=this.trees[this._limitZoom(t)],c=[],l=0,f=u.range(y(n),b(a),y(i),b(r));l<f.length;l+=1){var h=f[l],p=u.points[h];c.push(p.numPoints?m(p):this.points[p.index])}return c},p.prototype.getChildren=function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,c=i.within(a.x,a.y,o);u<c.length;u+=1){var l=c[u],f=i.points[l];f.parentId===e&&s.push(f.numPoints?m(f):this.points[f.index])}if(0===s.length)throw new Error(r);return s},p.prototype.getLeaves=function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},p.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,u=(n-s)/i,c=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,c),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,c),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,c),r.points,-1,n,i,l),l.features.length?l:null},p.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},p.prototype._appendLeaves=function(e,t,n,r,i){for(var a=0,o=this.getChildren(t);a<o.length;a+=1){var s=o[a],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},p.prototype._addTileFeatures=function(e,t,n,r,i,a){for(var o=0,s=e;o<s.length;o+=1){var u=t[s[o]],c=u.numPoints,l=void 0,f=void 0,h=void 0;if(c)l=g(u),f=u.x,h=u.y;else{var p=this.points[u.index];l=p.properties,f=y(p.geometry.coordinates[0]),h=b(p.geometry.coordinates[1])}var d={type:1,geometry:[[Math.round(this.options.extent*(f*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:l},v=void 0;c?v=u.id:this.options.generateId?v=u.index:this.points[u.index].id&&(v=this.points[u.index].id),void 0!==v&&(d.id=v),a.features.push(d)}},p.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},p.prototype._cluster=function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,o=r.reduce,s=r.minPoints,u=i/(a*Math.pow(2,t)),c=0;c<e.length;c++){var l=e[c];if(!(l.zoom<=t)){l.zoom=t;for(var f=this.trees[t+1],h=f.within(l.x,l.y,u),p=l.numPoints||1,v=p,m=0,g=h;m<g.length;m+=1){var y=g[m],b=f.points[y];b.zoom>t&&(v+=b.numPoints||1)}if(v>p&&v>=s){for(var _=l.x*p,E=l.y*p,S=o&&p>1?this._map(l,!0):null,T=(c<<5)+(t+1)+this.points.length,x=0,A=h;x<A.length;x+=1){var w=A[x],O=f.points[w];if(!(O.zoom<=t)){O.zoom=t;var C=O.numPoints||1;_+=O.x*C,E+=O.y*C,O.parentId=T,o&&(S||(S=this._map(l,!0)),o(S,this._map(O)))}}l.parentId=T,n.push(d(_/v,E/v,T,v,S))}else if(n.push(l),v>1)for(var k=0,R=h;k<R.length;k+=1){var P=R[k],I=f.points[P];I.zoom<=t||(I.zoom=t,n.push(I))}}}return n},p.prototype._getOriginId=function(e){return e-this.points.length>>5},p.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},p.prototype._map=function(e,t){if(e.numPoints)return t?S({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?S({},r):r},p}();function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G_(e,t){var n=t.radius,r=void 0===n?40:n,i=t.maxZoom,a=void 0===i?18:i,o=t.minZoom,s=void 0===o?0:o,u=t.zoom,c=void 0===u?2:u;if(e.pointIndex){var l=e.pointIndex.getClusters(e.extent,Math.floor(c));return e.dataArray=l.map((function(e,t){return H_({coordinates:e.geometry.coordinates,_id:t+1},e.properties)})),e}var f=new j_({radius:r,minZoom:s,maxZoom:a}),h={type:"FeatureCollection",features:[]};return h.features=e.dataArray.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e.coordinates},properties:H_({},e)}})),f.load(h.features),f}function z_(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,i=1;i<e.length;i++)t=n+1*e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t;return n+1*r}var X_={min:function(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t},max:function(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t},mean:function(e){if(0===e.length)throw new Error("mean requires at least one data point");return z_(e)/e.length},sum:z_};function W_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W_(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function K_(e,t){if(Array.isArray(t))return t}function Z_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){Xl(n,F_.exports.EventEmitter);var t=Y_(n);function n(e,r){var i;return Bl(this,n),ll(ql(i=t.call(this)),"data",void 0),ll(ql(i),"extent",void 0),ll(ql(i),"hooks",{init:new N_}),ll(ql(i),"parser",{type:"geojson"}),ll(ql(i),"transforms",[]),ll(ql(i),"cluster",!1),ll(ql(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),ll(ql(i),"mapService",void 0),ll(ql(i),"invalidExtent",!1),ll(ql(i),"originData",void 0),ll(ql(i),"rawData",void 0),ll(ql(i),"cfg",{}),ll(ql(i),"clusterIndex",void 0),i.originData=e,i.initCfg(r),i.hooks.init.tap("parser",(function(){i.excuteParser()})),i.hooks.init.tap("cluster",(function(){i.initCluster()})),i.hooks.init.tap("transform",(function(){i.executeTrans()})),i.init(),i}jl(n,[{key:"setData",value:function(e,t){this.rawData=e,this.originData=e,this.initCfg(t),this.init(),this.emit("update")}},{key:"getClusters",value:function(e){return this.clusterIndex.getClusters(this.caculClusterExtent(2),e)}},{key:"getClustersLeaves",value:function(e){return this.clusterIndex.getLeaves(e,1/0)}},{key:"updateClusterData",value:function(e){var t=this,n=this.clusterOptions,r=n.method,i=void 0===r?"sum":r,a=n.field,o=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(e));this.clusterOptions.zoom=e,o.forEach((function(e){e.id||(e.properties.point_count=1)})),(a||cd(i))&&(o=o.map((function(e){var n=e.id;if(n){var r,o=t.clusterIndex.getLeaves(n,1/0).map((function(e){return e.properties}));if(ry(i)&&a){var s=function(e,t){return e.map((function(e){return 1*e[t]}))}(o,a);r=X_[i](s)}cd(i)&&(r=i(o)),e.properties.stat=r}else e.properties.point_count=1;return e}))),this.data=el("geojson")({type:"FeatureCollection",features:o}),this.executeTrans()}},{key:"getFeatureById",value:function(e){var t=this.parser.type;if("geojson"!==(void 0===t?"geojson":t)||this.cluster)return e<this.data.dataArray.length?this.data.dataArray[e]:"null";var n=e<this.originData.features.length?this.originData.features[e]:"null",r=l_(n);if(0!==this.transforms.length){var i=this.data.dataArray.find((function(t){return t._id===e}));r.properties=i}return r}},{key:"getFeatureId",value:function(e,t){var n=this.data.dataArray.find((function(t){return t[e]===name}));return null==n?void 0:n._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(e){var t,n=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(n=Lh([[(t=this.extent)[0],t[1]],[t[2],t[3]]],e)),n[0].concat(n[1])}},{key:"initCfg",value:function(e){this.cfg=$g(this.cfg,e,K_);var t=this.cfg;t&&(t.parser&&(this.parser=t.parser),t.transforms&&(this.transforms=t.transforms),this.cluster=t.cluster||!1,t.clusterOptions&&(this.cluster=!0,this.clusterOptions=q_(q_({},this.clusterOptions),t.clusterOptions)))}},{key:"excuteParser",value:function(){var e=this.parser,t=e.type||"geojson";if("imagetile"!==t){var n=el(t);this.data=n(this.originData,e),this.extent=Rh(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}else this.data={tileurl:this.originData,dataArray:[]}}},{key:"executeTrans",value:function(){var e=this;this.transforms.forEach((function(t){var n=function(e){return Jc[e]}(t.type)(e.data,t);Object.assign(e.data,n)}))}},{key:"initCluster",value:function(){if(this.cluster){var e=this.clusterOptions||{};this.clusterIndex=G_(this.data,e)}}},{key:"init",value:function(){this.hooks.init.call(this)}}])}();var J_=Math.PI/3,$_=[0,J_,2*J_,3*J_,4*J_,5*J_];function eE(e){return e[0]}function tE(e){return e[1]}function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nE(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iE,aE;function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oE(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}tl("geojson",(function(e,t){var n=[],r={};return e.features=e.features.filter((function(e){var t=e.geometry;return null!=e&&t&&t.type&&t.coordinates&&t.coordinates.length>0})),El(e,!0),0===e.features.length?{dataArray:[],featureKeys:r}:(Pl(e,(function(e,t){var r=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),i=t,a=Nl(Nl({},e.properties),{},{coordinates:r,_id:i});n.push(a)})),{dataArray:n,featureKeys:r})})),tl("image",Ep),tl("csv",(function(e,t){return Ol(cl(e),t)})),tl("json",Ol),tl("raster",(function(e,t){var n=t.extent,r=t.width,i=t.height,a=t.min,o=t.max;return{_id:1,dataArray:[{_id:1,data:Array.from(e),width:r,height:i,min:a,max:o,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]}})),nl("cluster",G_),nl("filter",(function(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.filter(n)),e})),nl("join",(function(e,t){var n=t.sourceField,r=t.targetField,i=t.data,a={};return i.forEach((function(e){a[e[n]]=e})),e.dataArray=e.dataArray.map((function(e){var t=e[r];return sE(sE({},e),a[t])})),e})),nl("map",(function(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.map(n)),e})),nl("grid",(function(e,t){var n=e.dataArray,r=t.size,i=void 0===r?10:r,a=i/(2*Math.PI*6378e3)*(256<<20)/2,o=function(e,t){var n,r,i=1/0,a=-1/0,o=Z_(e);try{for(o.s();!(r=o.n()).done;){n=r.value.coordinates[1],Number.isFinite(n)&&(i=n<i?n:i,a=n>a?n:a)}}catch(S){o.e(S)}finally{o.f()}var s=(u=t,c=(i+a)/2,h=u,l=h/6378e3*(180/Math.PI),f=function(e,t){return t/6378e3*(180/Math.PI)/Math.cos(e*Math.PI/180)}(c,u),{yOffset:l,xOffset:f});var u,c,l,f,h;if(s.xOffset<=0||s.yOffset<=0)return{gridHash:{},gridOffset:s};var p,d={},v=Z_(e);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=m.coordinates[1],y=m.coordinates[0];if(Number.isFinite(g)&&Number.isFinite(y)){var b=Math.floor((g+90)/s.yOffset),_=Math.floor((y+180)/s.xOffset),E="".concat(b,"-").concat(_);d[E]=d[E]||{count:0,points:[]},d[E].count+=1,d[E].points.push(m)}}}catch(S){v.e(S)}finally{v.f()}return{gridHash:d,gridOffset:s}}(n,i);return{yOffset:a,xOffset:a,radius:a,type:"grid",dataArray:function(e,t,n){return Object.keys(e).reduce((function(r,i,a){var o=i.split("-"),s=parseInt(o[0],10),u=parseInt(o[1],10),c={};if(n.field&&n.method){var l=_p(e[i].points,n.field);c[n.method]=bp[n.method](l)}return Object.assign(c,{_id:a,coordinates:Ih([t.xOffset*(u+.5)-180,t.yOffset*(s+.5)-90]),rawData:e[i].points,count:e[i].count}),r.push(c),r}),[])}(o.gridHash,o.gridOffset,t)}})),nl("hexagon",(function(e,t){var n=e.dataArray,r=t.size,i=void 0===r?10:r,a=t.method,o=void 0===a?"sum":a,s=i/(2*Math.PI*6378e3)*(256<<20)/2,u=n.map((function(e){var t=Ll(Ih(e.coordinates),2),n=t[0],r=t[1];return rE(rE({},e),{},{coordinates:[n,r]})}));return{dataArray:function(){var e,t,n,r=0,i=0,a=1,o=1,s=eE,u=tE;function c(e){var r,i={},a=[],o=e.length;for(r=0;r<o;++r)if(!isNaN(l=+s.call(null,c=e[r],r,e))&&!isNaN(f=+u.call(null,c,r,e))){var c,l,f,h=Math.round(f/=n),p=Math.round(l=l/t-(1&h)/2),d=f-h;if(3*Math.abs(d)>1){var v=l-p,m=p+(l<p?-1:1)/2,g=h+(f<h?-1:1),y=l-m,b=f-g;v*v+d*d>y*y+b*b&&(p=m+(1&h?1:-1)/2,h=g)}var _=p+"-"+h,E=i[_];E?E.push(c):(a.push(E=i[_]=[c]),E.x=(p+(1&h)/2)*t,E.y=h*n)}return a}function l(e){var t=0,n=0;return $_.map((function(r){var i=Math.sin(r)*e,a=-Math.cos(r)*e,o=i-t,s=a-n;return t=i,n=a,[o,s]}))}return c.hexagon=function(t){return"m"+l(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],u=Math.round(i/n),c=Math.round(r/t),l=u*n;l<o+e;l+=n,++u)for(var f=c*t+(1&u)*t/2;f<a+t/2;f+=t)s.push([f,l]);return s},c.mesh=function(){var t=l(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(u=e,c):u},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(J_),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,a=+e[0],o=+e[1],c):[a-r,o-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],a=+e[1][0],o=+e[1][1],c):[[r,i],[a,o]]},c.radius(1)}().radius(s).x((function(e){return e.coordinates[0]})).y((function(e){return e.coordinates[1]}))(u).map((function(e,n){var r;if(t.field&&o){var i=_p(e,t.field);e[o]=bp[o](i)}return ll(r={},t.method,e[o]),ll(r,"count",e.length),ll(r,"rawData",e),ll(r,"coordinates",[e.x,e.y]),ll(r,"_id",n),r})),radius:s,xOffset:s,yOffset:s,type:"hexagon"}})),aE=iE||(iE={}),function(t){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(aE);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=aE:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!a&&!o,u={create:a?function(){return re(Object.create(null))}:o?function(){return re({__proto__:null})}:function(){return re({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,p=new(l||"function"!=typeof WeakMap?ne():WeakMap);function d(e,t,n,r){if(M(n)){if(!z(e))throw new TypeError;if(!W(t))throw new TypeError;return x(e,t)}if(!z(e))throw new TypeError;if(!B(t))throw new TypeError;if(!B(r)&&!M(r)&&!D(r))throw new TypeError;return D(r)&&(r=void 0),A(e,t,n=G(n),r)}function v(e,t){function n(n,r){if(!B(n))throw new TypeError;if(!M(r)&&!q(r))throw new TypeError;P(e,t,n,r)}return n}function m(e,t,n,r){if(!B(n))throw new TypeError;return M(r)||(r=G(r)),P(e,t,n,r)}function g(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=G(n)),O(e,t,n)}function y(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=G(n)),C(e,t,n)}function b(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=G(n)),k(e,t,n)}function _(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=G(n)),R(e,t,n)}function E(e,t){if(!B(e))throw new TypeError;return M(t)||(t=G(t)),I(e,t)}function S(e,t){if(!B(e))throw new TypeError;return M(t)||(t=G(t)),N(e,t)}function T(e,t,n){if(!B(t))throw new TypeError;M(n)||(n=G(n));var r=w(t,n,!1);if(M(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||p.delete(t),!0}function x(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!M(r)&&!D(r)){if(!W(r))throw new TypeError;t=r}}return t}function A(e,t,n,r){for(var i=e.length-1;i>=0;--i){var a=(0,e[i])(t,n,r);if(!M(a)&&!D(a)){if(!B(a))throw new TypeError;r=a}}return r}function w(e,t,n){var r=p.get(e);if(M(r)){if(!n)return;r=new f,p.set(e,r)}var i=r.get(t);if(M(i)){if(!n)return;i=new f,r.set(t,i)}return i}function O(e,t,n){if(C(e,t,n))return!0;var r=$(t);return!D(r)&&O(e,r,n)}function C(e,t,n){var r=w(t,n,!1);return!M(r)&&V(r.has(e))}function k(e,t,n){if(C(e,t,n))return R(e,t,n);var r=$(t);return D(r)?void 0:k(e,r,n)}function R(e,t,n){var r=w(t,n,!1);if(!M(r))return r.get(e)}function P(e,t,n,r){w(n,r,!0).set(e,t)}function I(e,t){var n=N(e,t),r=$(e);if(null===r)return n;var i=I(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var a=new h,o=[],s=0,u=n;s<u.length;s++){var c=u[s];a.has(c)||(a.add(c),o.push(c))}for(var l=0,f=i;l<f.length;l++)c=f[l],a.has(c)||(a.add(c),o.push(c));return o}function N(e,t){var n=[],r=w(e,t,!1);if(M(r))return n;for(var i=K(r.keys()),a=0;;){var o=Q(i);if(!o)return n.length=a,n;var s=Z(o);try{n[a]=s}catch(u){try{J(i)}finally{throw u}}a++}}function L(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function M(e){return void 0===e}function D(e){return null===e}function F(e){return"symbol"==typeof e}function B(e){return"object"==typeof e?null!==e:"function"==typeof e}function U(e,t){switch(L(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=Y(e,r);if(void 0!==i){var a=i.call(e,n);if(B(a))throw new TypeError;return a}return j(e,"default"===n?"number":n)}function j(e,t){if("string"===t){var n=e.toString;if(X(n)&&!B(i=n.call(e)))return i;if(X(r=e.valueOf)&&!B(i=r.call(e)))return i}else{var r;if(X(r=e.valueOf)&&!B(i=r.call(e)))return i;var i,a=e.toString;if(X(a)&&!B(i=a.call(e)))return i}throw new TypeError}function V(e){return!!e}function H(e){return""+e}function G(e){var t=U(e,3);return F(t)?t:H(t)}function z(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function X(e){return"function"==typeof e}function W(e){return"function"==typeof e}function q(e){switch(L(e)){case 3:case 4:return!0;default:return!1}}function Y(e,t){var n=e[t];if(null!=n){if(!X(n))throw new TypeError;return n}}function K(e){var t=Y(e,i);if(!X(t))throw new TypeError;var n=t.call(e);if(!B(n))throw new TypeError;return n}function Z(e){return e.value}function Q(e){var t=e.next();return!t.done&&t}function J(e){var t=e.return;t&&t.call(e)}function $(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,a)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function a(e,t){return t}function o(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,n=u.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(u.has(n,e));return n[e]=!0,e}function a(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",d),e("metadata",v),e("defineMetadata",m),e("hasMetadata",g),e("hasOwnMetadata",y),e("getMetadata",b),e("getOwnMetadata",_),e("getMetadataKeys",E),e("getOwnMetadataKeys",S),e("deleteMetadata",T)}(r)}();var uE=["inject","multi_inject","name","unmanaged","named","optional"],cE="Request",lE="Singleton",fE="Transient",hE="ConstantValue",pE="Constructor",dE="DynamicValue",vE="Factory",mE="Function",gE="Instance",yE="Invalid",bE="Provider",_E="ClassProperty",EE="ConstructorArgument",SE="Variable",TE=0;function xE(){return TE++}var AE=function(){function e(e,t){this.id=xE(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=yE,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===lE&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}(),wE="No matching bindings found for serviceIdentifier:",OE=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata("inversify:paramtypes",e),userGeneratedMetadata:Reflect.getMetadata("inversify:tagged",e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata("inversify:tagged_props",e)||[]},e}(),CE=2,kE=0,RE=1;function PE(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function IE(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function NE(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=DE(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r}function LE(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||LE(e.parentRequest,t))}function ME(e){e.childRequests.forEach((function(e){if(LE(e,e.serviceIdentifier)){var t=function(e){return function e(t,n){void 0===n&&(n=[]);var r=IE(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(e);throw new Error("Circular dependency found: "+t)}ME(e)}))}function DE(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var FE=function(){function e(e){this.id=xE(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),BE=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return"named"===this.key?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}(),UE=function(e,t){this.parentContext=e,this.rootRequest=t};function jE(e,t,n,r,i){var a={},o="number"==typeof i,s=void 0!==i&&o?i.toString():n;if(o&&void 0!==n)throw new Error("The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.");Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var u=a[s];if(Array.isArray(u))for(var c=0,l=u;c<l.length;c++){var f=l[c];if(f.key===r.key)throw new Error("Metadata key was used more than once in a parameter: "+f.key.toString())}else u=[];u.push(r),a[s]=u,Reflect.defineMetadata(e,a,t)}function VE(e,t){Reflect.decorate(e,t)}function HE(e,t){return function(n,r){t(n,r,e)}}var GE=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();function zE(e){return function(t,n,r){if(void 0===e)throw new Error("@inject called with undefined this could mean that the class "+t.name+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.");var i=new BE("inject",e);"number"==typeof r?function(e,t,n,r){jE("inversify:tagged",e,t,r,n)}(t,n,r,i):function(e,t,n){jE("inversify:tagged_props",e.constructor,t,n)}(t,n,i)}}var XE=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),WE=function(){function e(e,t,n,r){this.id=xE(),this.type=e,this.serviceIdentifier=n,this.name=new XE(t||""),this.metadata=new Array;var i=null;"string"==typeof r?i=new BE("named",r):r instanceof BE&&(i=r),null!==i&&this.metadata.push(i)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag("multi_inject")},e.prototype.matchesArray=function(e){return this.matchesTag("multi_inject")(e)},e.prototype.isNamed=function(){return this.hasTag("named")},e.prototype.isTagged=function(){return this.metadata.some((function(e){return uE.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag("optional")(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return"named"===e.key}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return uE.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag("named")(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var a=i[r];if(a.key===e&&a.value===n)return!0}return!1}},e}(),qE=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function YE(e,t,n,r){var i=e.getConstructorMetadata(n),a=i.compilerGeneratedMetadata;if(void 0===a)throw new Error("Missing required @injectable annotation in: "+t+".");var o=i.userGeneratedMetadata,s=Object.keys(o),u=0===n.length&&s.length>0,c=s.length>n.length,l=function(e,t,n,r,i){for(var a=[],o=0;o<i;o++){var s=KE(o,e,t,n,r);null!==s&&a.push(s)}return a}(r,t,a,o,u||c?s.length:n.length),f=ZE(e,n);return qE(qE([],l),f)}function KE(e,t,n,r,i){var a=i[e.toString()]||[],o=JE(a),s=!0!==o.unmanaged,u=r[e],c=o.inject||o.multiInject;if((u=c||u)instanceof GE&&(u=u.unwrap()),s){if(!t&&(u===Object||u===Function||void 0===u))throw new Error("Missing required @inject or @multiInject annotation in: argument "+e+" in class "+n+".");var l=new WE(EE,o.targetName,u);return l.metadata=a,l}return null}function ZE(e,t){for(var n=e.getPropertiesMetadata(t),r=[],i=0,a=Object.keys(n);i<a.length;i++){var o=a[i],s=n[o],u=JE(n[o]),c=u.targetName||o,l=u.inject||u.multiInject,f=new WE(_E,c,l);f.metadata=s,r.push(f)}var h=Object.getPrototypeOf(t.prototype).constructor;if(h!==Object){var p=ZE(e,h);r=qE(qE([],r),p)}return r}function QE(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=YE(e,DE(n),n,!0),i=r.map((function(e){return e.metadata.filter((function(e){return"unmanaged"===e.key}))})),a=[].concat.apply([],i).length,o=r.length-a;return o>0?o:QE(e,n)}return 0}function JE(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t.inject,multiInject:t.multi_inject,targetName:t.name,unmanaged:t.unmanaged}}var $E=function(){function e(e,t,n,r,i){this.id=xE(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function eS(e){return e._bindingDictionary}function tS(e,t,n,r,i){var a=rS(n.container,i.serviceIdentifier),o=[];return a.length===kE&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=rS(n.container,i.serviceIdentifier)),o=t?a:a.filter((function(e){var t=new $E(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case kE:if(n.isOptional())return t;var i=IE(e),a=wE;throw a+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}(i,n),a+=NE(r,i,rS),new Error(a);case RE:if(!n.isArray())return t;case CE:default:if(n.isArray())return t;a="Ambiguous match found for serviceIdentifier: "+(i=IE(e));throw a+=NE(r,i,rS),new Error(a)}}(i.serviceIdentifier,o,i,n.container),o}function nS(e,t,n,r,i,a){var o,s;if(null===i){o=tS(e,t,r,null,a),s=new $E(n,r,null,o,a);var u=new UE(r,s);r.addPlan(u)}else o=tS(e,t,r,i,a),s=i.addChildRequest(a.serviceIdentifier,o,a);o.forEach((function(t){var n=null;if(a.isArray())n=s.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;n=s}if(t.type===gE&&null!==t.implementationType){var i=function(e,t){return YE(e,DE(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var o=QE(e,t.implementationType);if(i.length<o){var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."}(DE(t.implementationType));throw new Error(u)}}i.forEach((function(t){nS(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function rS(e,t){var n=[],r=eS(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=rS(e.parent,t)),n}function iS(e,t,n,r,i,a,o,s){void 0===s&&(s=!1);var u=new FE(t),c=function(e,t,n,r,i,a){var o=new BE(e?"multi_inject":"inject",n),s=new WE(t,r,n,o);if(void 0!==i){var u=new BE(i,a);s.metadata.push(u)}return s}(n,r,i,"",a,o);try{return nS(e,s,i,u,null,c),u}catch(l){throw PE(l)&&u.plan&&ME(u.plan.rootRequest),l}}function aS(e,t,n){var r,i,a=null;if(t.length>0){var o=t.filter((function(e){return null!==e.target&&e.target.type===EE})).map(n);i=o,a=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===_E})),i=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var a=i[n];e[r]=a})),e}(a=new((r=e).bind.apply(r,function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}([void 0],i))),t,n)}else a=new e;return function(e,t){if(Reflect.hasMetadata("post_construct",e)){var n=Reflect.getMetadata("post_construct",e);try{t[n.value]()}catch(r){throw new Error(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]}(e.name,r.message))}}}(e,a),a}var oS=function(e,t,n){try{return n()}catch(r){throw PE(r)?new Error(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."}(e,t.toString())):r}},sS=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),a=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&a)return r.map((function(t){return sS(e)(t)}));var o=null;if(!t.target.isOptional()||0!==n.length){var s=n[0],u=s.scope===lE,c=s.scope===cE;if(u&&s.activated)return s.cache;if(c&&null!==e&&e.has(s.id))return e.get(s.id);if(s.type===hE)o=s.cache,s.activated=!0;else if(s.type===mE)o=s.cache,s.activated=!0;else if(s.type===pE)o=s.implementationType;else if(s.type===dE&&null!==s.dynamicValue)o=oS("toDynamicValue",s.serviceIdentifier,(function(){return s.dynamicValue(t.parentContext)}));else if(s.type===vE&&null!==s.factory)o=oS("toFactory",s.serviceIdentifier,(function(){return s.factory(t.parentContext)}));else if(s.type===bE&&null!==s.provider)o=oS("toProvider",s.serviceIdentifier,(function(){return s.provider(t.parentContext)}));else{if(s.type!==gE||null===s.implementationType){var l=IE(t.serviceIdentifier);throw new Error("Invalid binding type: "+l)}o=aS(s.implementationType,r,sS(e))}return"function"==typeof s.onActivation&&(o=s.onActivation(t.parentContext,o)),u&&(s.cache=o,s.activated=!0),c&&null!==e&&!e.has(s.id)&&e.set(s.id,o),o}}};var uS=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||uS(n,t))},cS=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new BE(e,t),n}},lS=cS("named"),fS=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},hS=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new pS(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=lS(e),new pS(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new pS(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=cS(e)(t),new pS(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return fS(e)(t.parentRequest)},new pS(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return lS(e)(t.parentRequest)},new pS(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return cS(e)(t)(n.parentRequest)},new pS(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return uS(t,fS(e))},new pS(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!uS(t,fS(e))},new pS(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return uS(t,lS(e))},new pS(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!uS(t,lS(e))},new pS(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return uS(n,cS(e)(t))},new pS(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!uS(n,cS(e)(t))},new pS(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return uS(t,e)},new pS(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!uS(t,e)},new pS(this._binding)},e}(),pS=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new hS(this._binding)},e}(),dS=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new hS(this._binding),this._bindingOnSyntax=new pS(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}(),vS=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=cE,new dS(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=lE,new dS(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=fE,new dS(this._binding)},e}(),mS=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new hS(this._binding),this._bindingOnSyntax=new pS(this._binding),this._bindingInSyntax=new vS(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}(),gS=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=gE,this._binding.implementationType=e,new mS(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=hE,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=lE,new dS(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=dE,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new mS(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=pE,this._binding.implementationType=e,this._binding.scope=lE,new dS(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=vE,this._binding.factory=e,this._binding.scope=lE,new dS(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=mE,this._binding.scope=lE,t},e.prototype.toAutoFactory=function(e){return this._binding.type=vE,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=lE,new dS(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=bE,this._binding.provider=e,this._binding.scope=lE,new dS(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),yS=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}(),bS=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error("NULL argument");if(null==t)throw new Error("NULL argument");var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error("NULL argument");var t=this._map.get(e);if(void 0!==t)return t;throw new Error("Key Not Found")},e.prototype.remove=function(e){if(null==e)throw new Error("NULL argument");if(!this._map.delete(e))throw new Error("Key Not Found")},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error("NULL argument");return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}(),_S=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},ES=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},SS=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},TS=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=fE;else if(t.defaultScope!==lE&&t.defaultScope!==fE&&t.defaultScope!==cE)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=xE(),this._bindingDictionary=new bS,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new OE}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,o=SS([t,n],r).map((function(e){return eS(e)})),s=eS(a);function u(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return o.forEach((function(e){u(e,s)})),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var a=i[r],o=n(a.id);a.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _S(this,void 0,void 0,(function(){var t,n,r,i,a;return ES(this,(function(o){switch(o.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,o.label=1;case 1:return n<r.length?(i=r[n],a=t(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||fE,n=new AE(e,t);return this._bindingDictionary.add(e,n),new gS(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+IE(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new bS},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,"named",t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),a=function(e,t,n,r){var i=new WE(SE,"",t,new BE(n,r)),a=new FE(e);return new $E(t,a,null,[],i)}(this,e,t,n);r=i.some((function(e){return e.constraint(a)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(yS.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,SE,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,SE,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,"named",t)},e.prototype.getAll=function(e){return this._get(!0,!0,SE,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,SE,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,"named",t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,a){var o=null,s={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:a};if(this._middleware){if(null==(o=this._middleware(s)))throw new Error("Invalid return type in middleware. Middleware must return!")}else o=this._planAndResolve()(s);return o},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=iS(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(e){return sS(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n))}},e}();function xS(){return function(e){if(Reflect.hasOwnMetadata("inversify:paramtypes",e))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata("design:paramtypes",e)||[];return Reflect.defineMetadata("inversify:paramtypes",t,e),e}}var AS=Symbol.for("INJECTION");function wS(e,t,n,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return r&&!Reflect.hasMetadata(AS,this,t)&&Reflect.defineMetadata(AS,n(),this,t),Reflect.hasMetadata(AS,this,t)?Reflect.getMetadata(AS,this,t):n()},set:function(e){Reflect.defineMetadata(AS,e,this,t)}})}var OS={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},CS={exports:{}};CS.exports=RS,CS.exports.default=RS;var kS=1e20;function RS(e,t,n,r,i,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer,s=o+2*this.buffer,u="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast;u?this.canvas=my.createOffscreenCanvas(o,o,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o),this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=u?Math.round(o/2*1):Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function PS(e,t,n,r,i,a){for(var o=0;o<t;o++)IS(e,o,t,n,r,i,a);for(var s=0;s<n;s++)IS(e,s*t,1,t,r,i,a)}function IS(e,t,n,r,i,a,o){var s,u,c,l;for(a[0]=0,o[0]=-kS,o[1]=kS,s=0;s<r;s++)i[s]=e[t+s*n];for(s=1,u=0,c=0;s<r;s++){do{l=a[u],c=(i[s]-i[l]+s*s-l*l)/(s-l)/2}while(c<=o[u]&&--u>-1);a[++u]=s,o[u]=c,o[u+1]=kS}for(s=0,u=0;s<r;s++){for(;o[u+1]<s;)u++;l=a[u],e[t+s*n]=i[l]+(s-l)*(s-l)}}RS.prototype._draw=function(e,t){var n,r,i,a,o,s,u,c,l,f=this.ctx.measureText(e),h=f.width,p=2*this.buffer;t&&this.useMetrics?(o=Math.floor(f.actualBoundingBoxAscent),c=this.buffer+Math.ceil(f.actualBoundingBoxAscent),s=this.buffer,u=this.buffer,n=(r=Math.min(this.size,Math.ceil(f.actualBoundingBoxRight-f.actualBoundingBoxLeft)))+p,i=(a=Math.min(this.size-s,Math.ceil(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent)))+p,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=a=this.size,o=19*this.fontSize/24,s=u=0,c=this.middle,this.ctx.textBaseline="middle"),r&&a&&(this.ctx.clearRect(u,s,r,a),this.ctx.fillText(e,this.buffer,c),l=this.ctx.getImageData(u,s,r,a));var d=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,a,o){a.fill(kS,0,t*n),o.fill(0,0,t*n);for(var s=(t-r)/2,u=0;u<i;u++)for(var c=0;c<r;c++){var l=(u+s)*t+c+s,f=e.data[4*(u*r+c)+3]/255;if(1===f)a[l]=0,o[l]=kS;else if(0===f)a[l]=kS,o[l]=0;else{var h=Math.max(0,.5-f),p=Math.max(0,f-.5);a[l]=h*h,o[l]=p*p}}}(l,n,i,r,a,this.gridOuter,this.gridInner),PS(this.gridOuter,n,i,this.f,this.v,this.z),PS(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,a,o){for(var s=0;s<t*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(u/a+o))}}(d,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:d,metrics:{width:r,height:a,sdfWidth:n,sdfHeight:i,top:o,left:0,advance:h}}},RS.prototype.draw=function(e){return this._draw(e,!1).data},RS.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};var NS=CS.exports;function LS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LS(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return FS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function FS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BS;function US(e,t,n){var r,i=DS(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.icon,s=a.xOffset;e[o.id]=MS(MS({},o),{},{x:s,y:n,image:o.image,width:o.width,height:o.height})}}catch(u){i.e(u)}finally{i.f()}}function jS(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function VS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return HS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function HS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GS(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var XS=function(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}();function WS(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="black",e.textBaseline="middle"}function qS(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}var YS,KS=xS()(BS=function(){function e(){Bl(this,e),ll(this,"fontAtlas",void 0),ll(this,"iconFontMap",void 0),ll(this,"iconFontGlyphs",{}),ll(this,"fontOptions",void 0),ll(this,"key",void 0),ll(this,"cache",new Mh(3))}return jl(e,[{key:"scale",get:function(){return 1}},{key:"canvas",get:function(){var e=this.cache.get(this.key);return e&&e.data}},{key:"mapping",get:function(){var e=this.cache.get(this.key);return e&&e.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:"sans-serif",fontWeight:"normal",characterSet:XS,fontSize:24,buffer:3,sdf:!0,cutoff:.25,radius:8,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(e){var t=this;e.forEach((function(e){t.iconFontGlyphs[e.name]=e.unicode}))}},{key:"addIconFont",value:function(e,t){this.iconFontMap.set(e,t)}},{key:"getIconFontKey",value:function(e){return this.iconFontMap.get(e)||e}},{key:"getGlyph",value:function(e){return this.iconFontGlyphs[e]?String.fromCharCode(parseInt(this.iconFontGlyphs[e],16)):""}},{key:"setFontOptions",value:function(e){this.fontOptions=zS(zS({},this.fontOptions),e),this.key=this.getKey();var t=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==t.length){var r=this.generateFontAtlas(this.key,t,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(e,t,n){var r=this.fontOptions,i=r.fontFamily,a=r.fontWeight,o=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=r.iconfont,h=n&&n.data;h||((h=lh.document.createElement("canvas")).width=1024);var p=h.getContext("2d");WS(p,i,o,a);var d=function(e){var t=e.characterSet,n=e.getFontWidth,r=e.fontHeight,i=e.buffer,a=e.maxCanvasWidth,o=e.mapping,s=void 0===o?{}:o,u=e.xOffset,c=void 0===u?0:u,l=e.yOffset,f=void 0===l?0:l,h=0,p=c;Array.from(t).forEach((function(e,t){if(!s[e]){var r=n(e,t);p+30>a&&(p=0,h++),s[e]={x:p,y:f+30*h,width:30,height:30,advance:r},p+=30}}));var d=r+2*i;return{mapping:s,xOffset:p,yOffset:f+h*d,canvasHeight:jS(f+(h+1)*d)}}(zS({getFontWidth:function(e){return p.measureText(e).width},fontHeight:1*o,buffer:s,characterSet:t,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),v=d.mapping,m=d.canvasHeight,g=d.xOffset,y=d.yOffset,b=p.getImageData(0,0,h.width,h.height);if(h.height=m,p.putImageData(b,0,0),WS(p,i,o,a),u){var _,E=new NS(o,s,c,l,i,a),S=p.getImageData(0,0,E.size,E.size),T=VS(t);try{for(T.s();!(_=T.n()).done;){var x=_.value;if(f){var A=String.fromCharCode(parseInt(x.replace("&#x","").replace(";",""),16));qS(E.draw(A),S)}else qS(E.draw(x),S);p.putImageData(S,v[x].x,v[x].y)}}catch(k){T.e(k)}finally{T.f()}}else{var w,O=VS(t);try{for(O.s();!(w=O.n()).done;){var C=w.value;p.fillText(C,v[C].x,v[C].y+1*o)}}catch(k){O.e(k)}finally{O.f()}}return{xOffset:g,yOffset:y,mapping:v,data:h,width:h.width,height:h.height}}},{key:"getKey",value:function(){return"key"}},{key:"getNewChars",value:function(e,t){var n=this.cache.get(e);if(!n)return t;var r=[],i=n.mapping,a=new Set(Object.keys(i));return new Set(t).forEach((function(e){a.has(e)||r.push(e)})),r}}]),e}())||BS;function ZS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var QS=xS()(YS=function(e){Xl(n,F_.exports.EventEmitter);var t=ZS(n);function n(){var e;Bl(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return ll(ql(e=t.call.apply(t,[this].concat(i))),"canvasHeight",128),ll(ql(e),"texture",void 0),ll(ql(e),"canvas",void 0),ll(ql(e),"iconData",void 0),ll(ql(e),"iconMap",void 0),ll(ql(e),"ctx",void 0),ll(ql(e),"loadingImageCount",0),e}return jl(n,[{key:"isLoading",value:function(){return 0===this.loadingImageCount}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=lh.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(e,t){var n=this,r=new Image;if(this.loadingImageCount++,this.hasImage(e))throw new Error("Image Id already exists");this.iconData.push({id:e,size:64}),this.updateIconMap(),this.loadImage(t).then((function(t){r=t;var i=n.iconData.find((function(t){return t.id===e}));i&&(i.image=r,i.width=r.width,i.height=r.height),n.update()}))}},{key:"addImageMini",value:function(e,t,n){var r=this,i=n.getSceneConfig().canvas,a=i.createImage();if(this.loadingImageCount++,this.hasImage(e))throw new Error("Image Id already exists");this.iconData.push({id:e,size:64}),this.updateIconMap(),this.loadImageMini(t,i).then((function(t){a=t;var n=r.iconData.find((function(t){return t.id===e}));n&&(n.image=a,n.width=a.width,n.height=a.height),r.update()}))}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(e){return this.iconMap.hasOwnProperty(e)}},{key:"removeImage",value:function(e){this.hasImage(e)&&(this.iconData=this.iconData.filter((function(t){return t.id!==e})),delete this.iconMap[e],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,0===this.loadingImageCount&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var e=this;this.canvas.width=1024,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach((function(t){var n=e.iconMap[t],r=n.x,i=n.y,a=n.image,o=n.width,s=void 0===o?64:o,u=n.height,c=void 0===u?64:u,l=Math.max(s,c)/64,f=c/l,h=s/l;a&&e.ctx.drawImage(a,r+(64-h)/2,i+(64-f)/2,h,f)}))}},{key:"updateIconMap",value:function(){var e=function(e,t,n){var r,i=0,a=0,o=0,s=[],u={},c=DS(e);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(!u[l.id]){var f=l.size;i+f+t>n&&(US(u,s,a),i=0,a=o+a+t,o=0,s=[]),s.push({icon:l,xOffset:i}),i=i+f+t,o=Math.max(o,f)}}}catch(h){c.e(h)}finally{c.f()}return s.length>0&&US(u,s,a),{mapping:u,canvasHeight:jS(o+a+t)}}(this.iconData,3,1024),t=e.mapping,n=e.canvasHeight;this.iconMap=t,this.canvasHeight=n}},{key:"loadImage",value:function(e){return new Promise((function(t,n){if(e instanceof HTMLImageElement)t(e);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){t(r)},r.onerror=function(){n(new Error("Could not load image at "+e))},r.src=e instanceof File?URL.createObjectURL(e):e}}))}},{key:"loadImageMini",value:function(e,t){return new Promise((function(n,r){var i=t.createImage();i.crossOrigin="anonymous",i.onload=function(){n(i)},i.onerror=function(){r(new Error("Could not load image at "+e))},i.src=e}))}}]),n}())||YS,JS="undefined"!=typeof Float32Array?Float32Array:Array;function $S(){var e=new JS(16);return JS!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function eT(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],_=n[1],E=n[2],S=n[3];return e[0]=b*r+_*s+E*f+S*v,e[1]=b*i+_*u+E*h+S*m,e[2]=b*a+_*c+E*p+S*g,e[3]=b*o+_*l+E*d+S*y,b=n[4],_=n[5],E=n[6],S=n[7],e[4]=b*r+_*s+E*f+S*v,e[5]=b*i+_*u+E*h+S*m,e[6]=b*a+_*c+E*p+S*g,e[7]=b*o+_*l+E*d+S*y,b=n[8],_=n[9],E=n[10],S=n[11],e[8]=b*r+_*s+E*f+S*v,e[9]=b*i+_*u+E*h+S*m,e[10]=b*a+_*c+E*p+S*g,e[11]=b*o+_*l+E*d+S*y,b=n[12],_=n[13],E=n[14],S=n[15],e[12]=b*r+_*s+E*f+S*v,e[13]=b*i+_*u+E*h+S*m,e[14]=b*a+_*c+E*p+S*g,e[15]=b*o+_*l+E*d+S*y,e}function tT(e,t,n){var r,i,a,o,s,u,c,l,f,h,p,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+s*m+f*g+t[12],e[13]=i*v+u*m+h*g+t[13],e[14]=a*v+c*m+p*g+t[14],e[15]=o*v+l*m+d*g+t[15]),e}function nT(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rT(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}function iT(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-f*r,e[3]=u*i-h*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+f*i,e[11]=u*r+h*i,e}function aT(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var oT,sT,uT=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e};function cT(e,t,n){var r=new JS(3);return r[0]=e,r[1]=t,r[2]=n,r}oT=new JS(3),JS!=Float32Array&&(oT[0]=0,oT[1]=0,oT[2]=0),function(){var e=function(){var e=new JS(4);return JS!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var lT,fT=xS()(sT=function(){function e(){Bl(this,e),ll(this,"viewport",void 0),ll(this,"overridedViewProjectionMatrix",void 0),ll(this,"jitteredViewProjectionMatrix",void 0),ll(this,"jitteredProjectionMatrix",void 0),ll(this,"viewMatrixInverse",void 0),ll(this,"cameraPosition",void 0)}return jl(e,[{key:"init",value:function(){}},{key:"update",value:function(e){this.viewport=e,this.viewMatrixInverse=$S(),function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*s-r*o,b=n*u-i*o,_=n*c-a*o,E=r*u-i*s,S=r*c-a*s,T=i*c-a*u,x=l*v-f*d,A=l*m-h*d,w=l*g-p*d,O=f*m-h*v,C=f*g-p*v,k=h*g-p*m,R=y*k-b*C+_*O+E*w-S*A+T*x;R&&(R=1/R,e[0]=(s*k-u*C+c*O)*R,e[1]=(i*C-r*k-a*O)*R,e[2]=(v*T-m*S+g*E)*R,e[3]=(h*S-f*T-p*E)*R,e[4]=(u*w-o*k-c*A)*R,e[5]=(n*k-i*w+a*A)*R,e[6]=(m*_-d*T-g*b)*R,e[7]=(l*T-h*_+p*b)*R,e[8]=(o*C-s*w+c*x)*R,e[9]=(r*w-n*C-a*x)*R,e[10]=(d*S-v*_+g*y)*R,e[11]=(f*_-l*S-p*y)*R,e[12]=(s*A-o*O-u*x)*R,e[13]=(n*O-r*A+i*x)*R,e[14]=(v*b-d*E-m*y)*R,e[15]=(l*E-f*b+h*y)*R)}(this.viewMatrixInverse,e.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var e=Ll(this.viewport.getCenter(),2);return[e[0],e[1]]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}},{key:"setViewProjectionMatrix",value:function(e){this.overridedViewProjectionMatrix=e}},{key:"jitterProjectionMatrix",value:function(e,t){var n=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}($S(),[e,t,0]);this.jitteredProjectionMatrix=eT($S(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=eT($S(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||sT;function hT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pT(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function pT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dT,vT,mT,gT=xS()(lT=function(){function e(){Bl(this,e),ll(this,"container",void 0),ll(this,"controlCorners",void 0),ll(this,"controlContainer",void 0),ll(this,"scene",void 0),ll(this,"mapsService",void 0),ll(this,"controls",[]),ll(this,"unAddControls",[])}return jl(e,[{key:"init",value:function(e,t){this.container=e.container,this.scene=t,this.mapsService=t.get(OS.IMapService),this.initControlPos()}},{key:"addControl",value:function(e,t){t.get(OS.IMapService).map?(e.addTo(this.scene),this.controls.push(e)):this.unAddControls.push(e)}},{key:"getControlByName",value:function(e){return this.controls.find((function(t){return t.controlOption.name===e}))}},{key:"removeControl",value:function(e){var t=this.controls.indexOf(e);return t>-1&&this.controls.splice(t,1),e.remove(),this}},{key:"addControls",value:function(){var e=this;this.unAddControls.forEach((function(t){t.addTo(e.scene),e.controls.push(t)})),this.unAddControls=[]}},{key:"destroy",value:function(){var e,t=hT(this.controls);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var e=this.controlCorners={},t="l7-",n=this.controlContainer=ph("div","l7-control-container",this.container);function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=r.map((function(e){return t+e})).join(" ");e[r.join("")]=ph("div",i,n)}r(["top","left"]),r(["top","right"]),r(["bottom","left"]),r(["bottom","right"]),r(["top","center"]),r(["right","center"]),r(["left","center"]),r(["bottom","center"])}},{key:"clearControlPos",value:function(){for(var e in this.controlCorners)this.controlCorners[e]&&dh(this.controlCorners[e]);this.controlContainer&&dh(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),e}())||lT,yT=xS()(dT=function(){function e(){Bl(this,e),ll(this,"container",void 0),ll(this,"scene",void 0),ll(this,"mapsService",void 0),ll(this,"markers",[]),ll(this,"markerLayers",[]),ll(this,"unAddMarkers",[]),ll(this,"unAddMarkerLayers",[])}return jl(e,[{key:"addMarkerLayer",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(e),e.addTo(this.scene)):this.unAddMarkerLayers.push(e)}},{key:"removeMarkerLayer",value:function(e){e.destroy(),this.markerLayers.indexOf(e);var t=this.markerLayers.indexOf(e);t>-1&&this.markerLayers.splice(t,1)}},{key:"addMarker",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(e),e.addTo(this.scene)):this.unAddMarkers.push(e)}},{key:"addMarkers",value:function(){var e=this;this.unAddMarkers.forEach((function(t){t.addTo(e.scene),e.markers.push(t)})),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var e=this;this.unAddMarkerLayers.forEach((function(t){e.markerLayers.push(t),t.addTo(e.scene)})),this.unAddMarkers=[]}},{key:"removeMarker",value:function(e){e.remove(),this.markers.indexOf(e);var t=this.markers.indexOf(e);t>-1&&this.markers.splice(t,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(OS.IMapService)}},{key:"destroy",value:function(){this.markers.forEach((function(e){e.remove()})),this.markers=[],this.markerLayers.forEach((function(e){e.destroy()})),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(e){e.destroy()}}]),e}())||dT,bT=xS()(vT=function(){function e(){Bl(this,e),ll(this,"scene",void 0),ll(this,"popup",void 0),ll(this,"mapsService",void 0),ll(this,"unAddPopup",void 0)}return jl(e,[{key:"removePopup",value:function(e){e.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(e){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(e.addTo(this.scene),this.popup=e):this.unAddPopup=e}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(OS.IMapService)}}]),e}())||vT,_T=Ig,ET=Qg((function(e,t,n){_T(e,t,n)})),ST={MapToken:"您正在使用 Demo测试地图token，如果生产环境中使用去对应地图请注册Token",SDK:"请确认引入了mapbox-gl api且在L7之前引入"};function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TT(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var AT={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wT={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},OT=xS()(mT=function(){function e(){Bl(this,e),ll(this,"sceneConfigCache",{}),ll(this,"layerConfigCache",{})}return jl(e,[{key:"getSceneConfig",value:function(e){return this.sceneConfigCache[e]}},{key:"getSceneWarninfo",value:function(e){return ST[e]}},{key:"setSceneConfig",value:function(e,t){this.sceneConfigCache[e]=xT(xT({},AT),t)}},{key:"getLayerConfig",value:function(e){return this.layerConfigCache[e]}},{key:"setLayerConfig",value:function(e,t,n){this.layerConfigCache[t]=xT({},ET({},this.sceneConfigCache[e],wT,n))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||mT;function CT(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function kT(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var RT,PT,IT,NT,LT,MT,DT,FT=Math.PI/180;function BT(e){var t=e.latitude,n=void 0===t?0:t,r=e.zoom,i=void 0===r?0:r,a=e.scale,o=e.highPrecision,s=void 0!==o&&o,u=e.flipY,c=void 0!==u&&u,l={},f=512*(a=void 0!==a?a:Math.pow(2,i)),h=Math.cos(n*FT),p=f/360,d=p/h,v=f/4003e4/h;if(l.pixelsPerMeter=[v,-v,v],l.metersPerPixel=[1/v,-1/v,1/v],l.pixelsPerDegree=[p,-d,v],l.degreesPerPixel=[1/p,-1/d,1/v],s){var m=FT*Math.tan(n*FT)/h,g=p*m/2,y=f/4003e4*m,b=y/d*v;l.pixelsPerDegree2=[0,-g,y],l.pixelsPerMeter2=[b,0,b],c&&(l.pixelsPerDegree2[1]=-l.pixelsPerDegree2[1],l.pixelsPerMeter2[1]=-l.pixelsPerMeter2[1])}return c&&(l.pixelsPerMeter[1]=-l.pixelsPerMeter[1],l.metersPerPixel[1]=-l.metersPerPixel[1],l.pixelsPerDegree[1]=-l.pixelsPerDegree[1],l.degreesPerPixel[1]=-l.degreesPerPixel[1]),l}(PT=RT||(RT={}))[PT.LNGLAT=1]="LNGLAT",PT[PT.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",PT[PT.VECTOR_TILE=3]="VECTOR_TILE",PT[PT.IDENTITY=4]="IDENTITY",PT[PT.P20=5]="P20",PT[PT.P20_OFFSET=6]="P20_OFFSET",PT[PT.METER_OFFSET=7]="METER_OFFSET",PT[PT.P20_2=8]="P20_2";var UT=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],jT=(IT=xS(),NT=zE(OS.ICameraService),IT((MT=function(){function e(){Bl(this,e),ll(this,"needRefresh",!0),CT(this,"cameraService",DT,this),ll(this,"coordinateSystem",void 0),ll(this,"viewportCenter",void 0),ll(this,"viewportCenterProjection",void 0),ll(this,"pixelsPerDegree",void 0),ll(this,"pixelsPerDegree2",void 0),ll(this,"pixelsPerMeter",void 0)}return jl(e,[{key:"refresh",value:function(){var e=this.cameraService.getZoom(),t=this.cameraService.getZoomScale(),n=this.cameraService.getCenter(),r=BT({latitude:n[1],zoom:e}),i=r.pixelsPerMeter,a=r.pixelsPerDegree;this.viewportCenter=n,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=i,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===RT.LNGLAT||this.coordinateSystem===RT.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===RT.LNGLAT_OFFSET?this.calculateLnglatOffset(n,e):this.coordinateSystem===RT.P20_OFFSET&&this.calculateLnglatOffset(n,e,t,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(e){this.coordinateSystem=e}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(e,t,n,r){var i=BT({latitude:e[1],zoom:t,scale:n,flipY:r,highPrecision:!0}),a=i.pixelsPerMeter,o=i.pixelsPerDegree,s=i.pixelsPerDegree2,u=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),l=eT([],c,u),f=this.cameraService.projectFlat([Math.fround(e[0]),Math.fround(e[1])],Math.pow(2,t));this.viewportCenterProjection=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}([],[f[0],f[1],0,1],l),l=eT([],c,u=this.cameraService.getViewMatrixUncentered()||u),l=eT([],l,UT),this.cameraService.setViewProjectionMatrix(l),this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=s}}]),e}(),DT=kT(MT.prototype,"cameraService",[NT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LT=MT))||LT),VT={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(e){!function(t,n,r,i){var a,o="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast,s="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),u=o||s,c=["","webkit","Moz","MS","ms","o"],l=u?"":n.createElement("div"),f=Math.round,h=Math.abs,p=Date.now;function d(e,t,n){return setTimeout(E(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function g(e,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=t.console&&(t.console.warn||t.console.log);return a&&a.call(t.console,i,r),e.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var y=g((function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===i)&&(e[r[a]]=t[r[a]]),a++;return e}),"extend","Use `assign`."),b=g((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function _(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&a(r,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function S(e,t){return"function"==typeof e?e.apply(t&&t[0]||i,t):e}function T(e,t){return e===i?t:e}function x(e,t,n){m(C(t),(function(t){e.addEventListener(t,n,!1)}))}function A(e,t,n){m(C(t),(function(t){e.removeEventListener(t,n,!1)}))}function w(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function O(e,t){return e.indexOf(t)>-1}function C(e){return e.trim().split(/\s+/g)}function k(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function R(e){return Array.prototype.slice.call(e,0)}function P(e,t,n){for(var r=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];k(i,o)<0&&r.push(e[a]),i[a]=o,a++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function I(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+a:t)in e)return r;o++}return i}var N=1;function L(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var M="ontouchstart"in t,D=I(t,"PointerEvent")!==i,F=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",U="mouse",j=24,V=["x","y"],H=["clientX","clientY"];function G(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){S(e.options.enable,[e])&&n.handler(t)},this.init()}function z(e,t,n){var r=n.pointers.length,a=n.changedPointers.length,o=1&t&&r-a==0,s=12&t&&r-a==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,a=r.length;n.firstInput||(n.firstInput=X(t));a>1&&!n.firstMultiple?n.firstMultiple=X(t):1===a&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,u=s?s.center:o.center,c=t.center=W(r);t.timeStamp=p(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=Z(u,c),t.distance=K(u,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};1!==t.eventType&&4!==a.eventType||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=Y(t.deltaX,t.deltaY);var l=q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=h(l.x)>h(l.y)?l.x:l.y,t.scale=s?(f=s.pointers,d=r,K(d[0],d[1],H)/K(f[0],f[1],H)):1,t.rotation=s?function(e,t){return Z(t[1],t[0],H)+Z(e[1],e[0],H)}(s.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,a,o,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(u>25||s.velocity===i)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,f=q(u,c,l);r=f.x,a=f.y,n=h(f.x)>h(f.y)?f.x:f.y,o=Y(c,l),e.lastInterval=t}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o}(n,t);var f,d;var v=e.element;w(t.srcEvent.target,v)&&(v=t.srcEvent.target);t.target=v}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function X(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:f(e.pointers[n].clientX),clientY:f(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:f(e[0].clientX),y:f(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:f(n/t),y:f(r/t)}}function q(e,t,n){return{x:t/e||0,y:n/e||0}}function Y(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function K(e,t,n){n||(n=V);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function Z(e,t,n){n||(n=V);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}G.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(L(this.element),this.evWin,this.domHandler)}};var Q={mousedown:1,mousemove:2,mouseup:4},J="mousedown",$="mousemove mouseup";function ee(){this.evEl=J,this.evWin=$,this.pressed=!1,G.apply(this,arguments)}_(ee,G,{handler:function(e){var t=Q[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var te={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ne={2:B,3:"pen",4:U,5:"kinect"},re="pointerdown",ie="pointermove pointerup pointercancel";function ae(){this.evEl=re,this.evWin=ie,G.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}u||!t.MSPointerEvent||t.PointerEvent||(re="MSPointerDown",ie="MSPointerMove MSPointerUp MSPointerCancel"),_(ae,G,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=te[r],a=ne[e.pointerType]||e.pointerType,o=a==B,s=k(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},se="touchstart",ue="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=se,this.evWin=ue,this.started=!1,G.apply(this,arguments)}function le(e,t){var n=R(e.touches),r=R(e.changedTouches);return 12&t&&(n=P(n.concat(r),"identifier",!0)),[n,r]}_(ce,G,{handler:function(e){var t=oe[e.type];if(1===t&&(this.started=!0),this.started){var n=le.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}}});var fe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},he="touchstart touchmove touchend touchcancel";function pe(){this.evTarget=he,this.targetIds={},G.apply(this,arguments)}function de(e,t){var n=R(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=R(e.changedTouches),s=[],u=this.target;if(a=n.filter((function(e){return w(e.target,u)})),1===t)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&t&&delete r[o[i].identifier],i++;return s.length?[P(a.concat(s),"identifier",!0),s]:void 0}_(pe,G,{handler:function(e){var t=fe[e.type],n=de.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}});function ve(){G.apply(this,arguments);var e=E(this.handler,this);this.touch=new pe(this.manager,e),this.mouse=new ee(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function me(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ge.call(this,t)):12&e&&ge.call(this,t)}function ge(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ye(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}_(ve,G,{handler:function(e,t,n){var r=n.pointerType==B,i=n.pointerType==U;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)me.call(this,t,n);else if(i&&ye.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var be=u?i:I(l.style,"touchAction"),_e=be!==i,Ee="compute",Se="auto",Te="manipulation",xe="none",Ae="pan-x",we="pan-y",Oe=function(){if(!_e)return!1;var e={};if(u)return e;var n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!n||t.CSS.supports("touch-action",r)})),e}();function Ce(e,t){this.manager=e,this.set(t)}Ce.prototype={set:function(e){e==Ee&&(e=this.compute()),_e&&this.manager.element.style&&Oe[e]&&(this.manager.element.style[be]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){S(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(O(e,xe))return xe;var t=O(e,Ae),n=O(e,we);if(t&&n)return xe;if(t||n)return t?Ae:we;if(O(e,Te))return Te;return Se}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=O(r,xe)&&!Oe.none,a=O(r,we)&&!Oe["pan-y"],o=O(r,Ae)&&!Oe["pan-x"];if(i){var s=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(s&&u&&c)return}if(!o||!a)return i||a&&6&n||o&&n&j?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ke=32;function Re(e){this.options=a({},this.defaults,e||{}),this.id=N++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ie(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Ne(e,t){var n=t.manager;return n?n.get(e):e}function Le(){Re.apply(this,arguments)}function Me(){Le.apply(this,arguments),this.pX=null,this.pY=null}function De(){Le.apply(this,arguments)}function Fe(){Re.apply(this,arguments),this._timer=null,this._input=null}function Be(){Le.apply(this,arguments)}function Ue(){Le.apply(this,arguments)}function je(){Re.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ve(e,t){return(t=t||{}).recognizers=T(t.recognizers,Ve.defaults.preset),new He(e,t)}Re.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ne(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)||(e=Ne(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=Ne(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Pe(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Pe(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ke},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!S(this.options.enable,[this,t]))return this.reset(),void(this.state=ke);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},_(Le,Re,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:ke}}),_(Me,Le,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(we),e&j&&t.push(Ae),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Le.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ie(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),_(De,Le,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),_(Fe,Re,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return ke},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),_(Be,Le,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),_(Ue,Le,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Me.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&j&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ie(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),_(je,Re,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||K(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return ke},failTimeout:function(){return this._timer=d((function(){this.state=ke}),this.options.interval,this),ke},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ve.VERSION="2.0.7",Ve.defaults={domEvents:!1,touchAction:Ee,enable:!0,inputTarget:null,inputClass:null,preset:[[Be,{enable:!1}],[De,{enable:!1},["rotate"]],[Ue,{direction:6}],[Me,{direction:6},["swipe"]],[je],[je,{event:"doubletap",taps:2},["tap"]],[Fe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function He(e,t){var n;this.options=a({},Ve.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(D?ae:F?pe:M?ve:ee))(n,z),this.touchAction=new Ce(this,this.options.touchAction),Ge(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ge(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(i,a){n=I(r.style,a),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}(He.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Re)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=k(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return m(C(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==i){var n=this.handlers;return m(C(e),(function(e){t?n[e]&&n[e].splice(k(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){if(u)return;var r=n.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](t),i++}},destroy:function(){this.element&&Ge(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u)||(a(Ve,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ke,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:j,DIRECTION_ALL:30,Manager:He,Input:G,TouchAction:Ce,TouchInput:pe,MouseInput:ee,PointerEventInput:ae,TouchMouseInput:ve,SingleTouchInput:ce,Recognizer:Re,AttrRecognizer:Le,Tap:je,Pan:Me,Swipe:Ue,Pinch:De,Rotate:Be,Press:Fe,on:x,off:A,each:m,merge:b,extend:y,assign:a,inherit:_,bindFn:E,prefixed:I}),("undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Hammer=Ve,e.exports?e.exports=Ve:t.Hammer=Ve)}("undefined"!=typeof window?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document)}(VT);var HT,GT,zT,XT,WT,qT,YT,KT=VT.exports;function ZT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}(GT=HT||(HT={})).Hover="hover",GT.Click="click",GT.Select="select",GT.Active="active",GT.Drag="drag";var QT={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},JT=(zT=xS(),XT=zE(OS.IMapService),zT((qT=function(e){Xl(n,B_);var t=ZT(n);function n(){var e;Bl(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return CT(ql(e=t.call.apply(t,[this].concat(i))),"mapService",YT,ql(e)),ll(ql(e),"hammertime",void 0),ll(ql(e),"lastClickTime",0),ll(ql(e),"lastClickXY",[-1,-1]),ll(ql(e),"clickTimer",void 0),ll(ql(e),"$containter",void 0),ll(ql(e),"onDrag",(function(t){var n=e.interactionEvent(t);n.type=QT[n.type],e.emit(HT.Drag,n)})),ll(ql(e),"onHammer",(function(t){t.srcEvent.stopPropagation();var n=e.interactionEvent(t);e.emit(HT.Hover,n)})),ll(ql(e),"onTouch",(function(t){var n=t.touches[0];e.onHover({x:n.pageX,y:n.pageY,type:"touch"})})),ll(ql(e),"onHover",(function(t){var n=t.clientX,r=t.clientY,i=t.type,a=e.mapService.getMapContainer();if(a)if(uh)n=n-a.left-0,r=r-a.top-0;else{var o=a.getBoundingClientRect(),s=o.top;n=n-o.left-a.clientLeft,r=r-s-a.clientTop}var u=e.mapService.containerToLngLat([n,r]);if("click"!==i)"touch"!==i?"click"!==i&&"dblclick"!==i&&e.emit(HT.Hover,{x:n,y:r,lngLat:u,type:i,target:t}):e.isDoubleTap(n,r,u);else{if(!uh&&"ontouchstart"in document.documentElement==!0)return;e.isDoubleTap(n,r,u)}})),e}return jl(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(HT.Hover)}},{key:"triggerHover",value:function(e){var t=e.x,n=e.y;this.emit(HT.Hover,{x:t,y:n})}},{key:"triggerSelect",value:function(e){this.emit(HT.Select,{featureId:e})}},{key:"triggerActive",value:function(e){this.emit(HT.Active,{featureId:e})}},{key:"handleMiniEvent",value:function(e){this.onHover({clientX:e.touches[0].pageX,clientY:e.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var e=this.mapService.getMapContainer();if(e)if(uh)lh.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var t=new KT.Manager(e);t.add(new KT.Tap({event:"dblclick",taps:2})),t.add(new KT.Tap({event:"click"})),t.add(new KT.Pan({threshold:0,pointers:0})),t.add(new KT.Press({})),t.on("dblclick click",this.onHammer),t.on("panstart panmove panend pancancel",this.onDrag),e.addEventListener("mousemove",this.onHover),e.addEventListener("mousedown",this.onHover,!0),e.addEventListener("mouseup",this.onHover),e.addEventListener("contextmenu",this.onHover),this.hammertime=t}}},{key:"removeEventListenerOnMap",value:function(){if(uh)lh.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var e=this.mapService.getMapContainer();e&&(e.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),e.removeEventListener("mousedown",this.onHover),e.removeEventListener("mouseup",this.onHover),e.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(e){var t,n,r=e.type;"touch"===e.pointerType?(n=Math.floor(e.pointers[0].clientY),t=Math.floor(e.pointers[0].clientX)):(n=Math.floor(e.srcEvent.y),t=Math.floor(e.srcEvent.x));var i=this.mapService.getMapContainer();if(i){var a=i.getBoundingClientRect(),o=a.top;t-=a.left,n-=o}return{x:t,y:n,lngLat:this.mapService.containerToLngLat([t,n]),type:r,target:e.srcEvent}}},{key:"isDoubleTap",value:function(e,t,n){var r=this,i=(new Date).getTime(),a="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-e)<10&&Math.abs(this.lastClickXY[1]-t)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),a="dblclick",this.emit(HT.Hover,{x:e,y:t,lngLat:n,type:a})):(this.lastClickTime=i,this.lastClickXY=[e,t],this.clickTimer=setTimeout((function(){a="click",r.emit(HT.Hover,{x:e,y:t,lngLat:n,type:a})}),400))}}]),n}(),YT=kT(qT.prototype,"mapService",[XT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WT=qT))||WT);function $T(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ex(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$T(a,r,i,o,s,"next",e)}function s(e){$T(a,r,i,o,s,"throw",e)}o(void 0)}))}}var tx={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(k([])));E&&E!==n&&r.call(E,a)&&(b=E);var S=y.prototype=m.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function A(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=y,u(S,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},T(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(S),u(S,s,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(tx.exports);try{regeneratorRuntime=t}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}();var nx,rx,ix,ax,ox,sx,ux,cx,lx,fx,hx,px,dx,vx=tx.exports,mx=0;function gx(e){if(uh)return null;var t=e;if("string"==typeof e&&(t=document.getElementById(e)),t){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(mx++),n.classList.add("l7-scene"),t.appendChild(n),n}return null}function yx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yx(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(rx=nx||(nx={}))[rx.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",rx[rx.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",rx[rx.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",rx[rx.POINTS=0]="POINTS",rx[rx.LINES=1]="LINES",rx[rx.LINE_LOOP=2]="LINE_LOOP",rx[rx.LINE_STRIP=3]="LINE_STRIP",rx[rx.TRIANGLES=4]="TRIANGLES",rx[rx.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",rx[rx.TRIANGLE_FAN=6]="TRIANGLE_FAN",rx[rx.ZERO=0]="ZERO",rx[rx.ONE=1]="ONE",rx[rx.SRC_COLOR=768]="SRC_COLOR",rx[rx.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",rx[rx.SRC_ALPHA=770]="SRC_ALPHA",rx[rx.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",rx[rx.DST_ALPHA=772]="DST_ALPHA",rx[rx.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",rx[rx.DST_COLOR=774]="DST_COLOR",rx[rx.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",rx[rx.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",rx[rx.FUNC_ADD=32774]="FUNC_ADD",rx[rx.BLEND_EQUATION=32777]="BLEND_EQUATION",rx[rx.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",rx[rx.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",rx[rx.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",rx[rx.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",rx[rx.MAX_EXT=32776]="MAX_EXT",rx[rx.MIN_EXT=32775]="MIN_EXT",rx[rx.BLEND_DST_RGB=32968]="BLEND_DST_RGB",rx[rx.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",rx[rx.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",rx[rx.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",rx[rx.CONSTANT_COLOR=32769]="CONSTANT_COLOR",rx[rx.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",rx[rx.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",rx[rx.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",rx[rx.BLEND_COLOR=32773]="BLEND_COLOR",rx[rx.ARRAY_BUFFER=34962]="ARRAY_BUFFER",rx[rx.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",rx[rx.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",rx[rx.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",rx[rx.STREAM_DRAW=35040]="STREAM_DRAW",rx[rx.STATIC_DRAW=35044]="STATIC_DRAW",rx[rx.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",rx[rx.BUFFER_SIZE=34660]="BUFFER_SIZE",rx[rx.BUFFER_USAGE=34661]="BUFFER_USAGE",rx[rx.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",rx[rx.FRONT=1028]="FRONT",rx[rx.BACK=1029]="BACK",rx[rx.FRONT_AND_BACK=1032]="FRONT_AND_BACK",rx[rx.CULL_FACE=2884]="CULL_FACE",rx[rx.BLEND=3042]="BLEND",rx[rx.DITHER=3024]="DITHER",rx[rx.STENCIL_TEST=2960]="STENCIL_TEST",rx[rx.DEPTH_TEST=2929]="DEPTH_TEST",rx[rx.SCISSOR_TEST=3089]="SCISSOR_TEST",rx[rx.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",rx[rx.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",rx[rx.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",rx[rx.NO_ERROR=0]="NO_ERROR",rx[rx.INVALID_ENUM=1280]="INVALID_ENUM",rx[rx.INVALID_VALUE=1281]="INVALID_VALUE",rx[rx.INVALID_OPERATION=1282]="INVALID_OPERATION",rx[rx.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",rx[rx.CW=2304]="CW",rx[rx.CCW=2305]="CCW",rx[rx.LINE_WIDTH=2849]="LINE_WIDTH",rx[rx.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",rx[rx.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",rx[rx.CULL_FACE_MODE=2885]="CULL_FACE_MODE",rx[rx.FRONT_FACE=2886]="FRONT_FACE",rx[rx.DEPTH_RANGE=2928]="DEPTH_RANGE",rx[rx.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",rx[rx.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",rx[rx.DEPTH_FUNC=2932]="DEPTH_FUNC",rx[rx.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",rx[rx.STENCIL_FUNC=2962]="STENCIL_FUNC",rx[rx.STENCIL_FAIL=2964]="STENCIL_FAIL",rx[rx.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",rx[rx.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",rx[rx.STENCIL_REF=2967]="STENCIL_REF",rx[rx.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",rx[rx.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",rx[rx.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",rx[rx.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",rx[rx.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",rx[rx.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",rx[rx.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",rx[rx.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",rx[rx.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",rx[rx.VIEWPORT=2978]="VIEWPORT",rx[rx.SCISSOR_BOX=3088]="SCISSOR_BOX",rx[rx.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",rx[rx.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",rx[rx.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",rx[rx.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",rx[rx.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",rx[rx.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",rx[rx.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",rx[rx.RED_BITS=3410]="RED_BITS",rx[rx.GREEN_BITS=3411]="GREEN_BITS",rx[rx.BLUE_BITS=3412]="BLUE_BITS",rx[rx.ALPHA_BITS=3413]="ALPHA_BITS",rx[rx.DEPTH_BITS=3414]="DEPTH_BITS",rx[rx.STENCIL_BITS=3415]="STENCIL_BITS",rx[rx.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",rx[rx.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",rx[rx.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",rx[rx.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",rx[rx.SAMPLES=32937]="SAMPLES",rx[rx.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",rx[rx.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",rx[rx.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",rx[rx.DONT_CARE=4352]="DONT_CARE",rx[rx.FASTEST=4353]="FASTEST",rx[rx.NICEST=4354]="NICEST",rx[rx.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",rx[rx.BYTE=5120]="BYTE",rx[rx.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",rx[rx.SHORT=5122]="SHORT",rx[rx.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",rx[rx.INT=5124]="INT",rx[rx.UNSIGNED_INT=5125]="UNSIGNED_INT",rx[rx.FLOAT=5126]="FLOAT",rx[rx.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",rx[rx.ALPHA=6406]="ALPHA",rx[rx.RGB=6407]="RGB",rx[rx.RGBA=6408]="RGBA",rx[rx.LUMINANCE=6409]="LUMINANCE",rx[rx.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",rx[rx.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",rx[rx.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",rx[rx.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",rx[rx.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",rx[rx.VERTEX_SHADER=35633]="VERTEX_SHADER",rx[rx.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",rx[rx.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",rx[rx.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",rx[rx.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",rx[rx.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",rx[rx.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",rx[rx.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",rx[rx.SHADER_TYPE=35663]="SHADER_TYPE",rx[rx.DELETE_STATUS=35712]="DELETE_STATUS",rx[rx.LINK_STATUS=35714]="LINK_STATUS",rx[rx.VALIDATE_STATUS=35715]="VALIDATE_STATUS",rx[rx.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",rx[rx.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",rx[rx.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",rx[rx.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",rx[rx.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",rx[rx.NEVER=512]="NEVER",rx[rx.LESS=513]="LESS",rx[rx.EQUAL=514]="EQUAL",rx[rx.LEQUAL=515]="LEQUAL",rx[rx.GREATER=516]="GREATER",rx[rx.NOTEQUAL=517]="NOTEQUAL",rx[rx.GEQUAL=518]="GEQUAL",rx[rx.ALWAYS=519]="ALWAYS",rx[rx.KEEP=7680]="KEEP",rx[rx.REPLACE=7681]="REPLACE",rx[rx.INCR=7682]="INCR",rx[rx.DECR=7683]="DECR",rx[rx.INVERT=5386]="INVERT",rx[rx.INCR_WRAP=34055]="INCR_WRAP",rx[rx.DECR_WRAP=34056]="DECR_WRAP",rx[rx.VENDOR=7936]="VENDOR",rx[rx.RENDERER=7937]="RENDERER",rx[rx.VERSION=7938]="VERSION",rx[rx.NEAREST=9728]="NEAREST",rx[rx.LINEAR=9729]="LINEAR",rx[rx.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",rx[rx.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",rx[rx.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",rx[rx.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",rx[rx.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",rx[rx.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",rx[rx.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",rx[rx.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",rx[rx.TEXTURE_2D=3553]="TEXTURE_2D",rx[rx.TEXTURE=5890]="TEXTURE",rx[rx.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",rx[rx.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",rx[rx.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",rx[rx.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",rx[rx.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",rx[rx.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",rx[rx.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",rx[rx.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",rx[rx.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",rx[rx.TEXTURE0=33984]="TEXTURE0",rx[rx.TEXTURE1=33985]="TEXTURE1",rx[rx.TEXTURE2=33986]="TEXTURE2",rx[rx.TEXTURE3=33987]="TEXTURE3",rx[rx.TEXTURE4=33988]="TEXTURE4",rx[rx.TEXTURE5=33989]="TEXTURE5",rx[rx.TEXTURE6=33990]="TEXTURE6",rx[rx.TEXTURE7=33991]="TEXTURE7",rx[rx.TEXTURE8=33992]="TEXTURE8",rx[rx.TEXTURE9=33993]="TEXTURE9",rx[rx.TEXTURE10=33994]="TEXTURE10",rx[rx.TEXTURE11=33995]="TEXTURE11",rx[rx.TEXTURE12=33996]="TEXTURE12",rx[rx.TEXTURE13=33997]="TEXTURE13",rx[rx.TEXTURE14=33998]="TEXTURE14",rx[rx.TEXTURE15=33999]="TEXTURE15",rx[rx.TEXTURE16=34e3]="TEXTURE16",rx[rx.TEXTURE17=34001]="TEXTURE17",rx[rx.TEXTURE18=34002]="TEXTURE18",rx[rx.TEXTURE19=34003]="TEXTURE19",rx[rx.TEXTURE20=34004]="TEXTURE20",rx[rx.TEXTURE21=34005]="TEXTURE21",rx[rx.TEXTURE22=34006]="TEXTURE22",rx[rx.TEXTURE23=34007]="TEXTURE23",rx[rx.TEXTURE24=34008]="TEXTURE24",rx[rx.TEXTURE25=34009]="TEXTURE25",rx[rx.TEXTURE26=34010]="TEXTURE26",rx[rx.TEXTURE27=34011]="TEXTURE27",rx[rx.TEXTURE28=34012]="TEXTURE28",rx[rx.TEXTURE29=34013]="TEXTURE29",rx[rx.TEXTURE30=34014]="TEXTURE30",rx[rx.TEXTURE31=34015]="TEXTURE31",rx[rx.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",rx[rx.REPEAT=10497]="REPEAT",rx[rx.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",rx[rx.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",rx[rx.FLOAT_VEC2=35664]="FLOAT_VEC2",rx[rx.FLOAT_VEC3=35665]="FLOAT_VEC3",rx[rx.FLOAT_VEC4=35666]="FLOAT_VEC4",rx[rx.INT_VEC2=35667]="INT_VEC2",rx[rx.INT_VEC3=35668]="INT_VEC3",rx[rx.INT_VEC4=35669]="INT_VEC4",rx[rx.BOOL=35670]="BOOL",rx[rx.BOOL_VEC2=35671]="BOOL_VEC2",rx[rx.BOOL_VEC3=35672]="BOOL_VEC3",rx[rx.BOOL_VEC4=35673]="BOOL_VEC4",rx[rx.FLOAT_MAT2=35674]="FLOAT_MAT2",rx[rx.FLOAT_MAT3=35675]="FLOAT_MAT3",rx[rx.FLOAT_MAT4=35676]="FLOAT_MAT4",rx[rx.SAMPLER_2D=35678]="SAMPLER_2D",rx[rx.SAMPLER_CUBE=35680]="SAMPLER_CUBE",rx[rx.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",rx[rx.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",rx[rx.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",rx[rx.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",rx[rx.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",rx[rx.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",rx[rx.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",rx[rx.COMPILE_STATUS=35713]="COMPILE_STATUS",rx[rx.LOW_FLOAT=36336]="LOW_FLOAT",rx[rx.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",rx[rx.HIGH_FLOAT=36338]="HIGH_FLOAT",rx[rx.LOW_INT=36339]="LOW_INT",rx[rx.MEDIUM_INT=36340]="MEDIUM_INT",rx[rx.HIGH_INT=36341]="HIGH_INT",rx[rx.FRAMEBUFFER=36160]="FRAMEBUFFER",rx[rx.RENDERBUFFER=36161]="RENDERBUFFER",rx[rx.RGBA4=32854]="RGBA4",rx[rx.RGB5_A1=32855]="RGB5_A1",rx[rx.RGB565=36194]="RGB565",rx[rx.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",rx[rx.STENCIL_INDEX=6401]="STENCIL_INDEX",rx[rx.STENCIL_INDEX8=36168]="STENCIL_INDEX8",rx[rx.DEPTH_STENCIL=34041]="DEPTH_STENCIL",rx[rx.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",rx[rx.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",rx[rx.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",rx[rx.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",rx[rx.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",rx[rx.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",rx[rx.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",rx[rx.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",rx[rx.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",rx[rx.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",rx[rx.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",rx[rx.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",rx[rx.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",rx[rx.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",rx[rx.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",rx[rx.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",rx[rx.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",rx[rx.NONE=0]="NONE",rx[rx.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",rx[rx.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",rx[rx.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",rx[rx.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",rx[rx.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",rx[rx.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",rx[rx.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",rx[rx.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",rx[rx.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",rx[rx.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",rx[rx.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",rx[rx.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",rx[rx.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",rx[rx.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL";var _x,Ex,Sx,Tx,xx,Ax,Ox,Cx,kx,Rx=(ix=xS(),ax=zE(OS.IRendererService),ox=zE(OS.IGlobalConfigService),sx=zE(OS.IInteractionService),ux=zE(OS.ILayerService),ix((lx=function(){function e(){var t=this;Bl(this,e),CT(this,"rendererService",fx,this),CT(this,"configService",hx,this),CT(this,"interactionService",px,this),CT(this,"layerService",dx,this),ll(this,"pickingFBO",void 0),ll(this,"width",0),ll(this,"height",0),ll(this,"alreadyInPicking",!1),ll(this,"pickBufferScale",1),ll(this,"pickFromPickingFBO",(function(e,n){var r,i=n.x,a=n.y,o=n.lngLat,s=n.type,u=n.target,c=!1,l=t.rendererService;l.getViewportSize;var f=l.readPixels,h=l.getContainer,p=t.getContainerSize(h()),d=p.width,v=p.height;d*=Sh,v*=Sh;var m,g=e.getLayerConfig(),y=g.enableHighlight,b=g.enableSelect,_=i*Sh,E=a*Sh;if(_>d-1*Sh||_<0||E>v-1*Sh||E<0)return!1;if(0!==(m=f({x:Math.floor(_/t.pickBufferScale),y:Math.floor((v-(a+1)*Sh)/t.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}))[0]||0!==m[1]||0!==m[2]){var S=dp(m),T=e.getSource().getFeatureById(S);S!==e.getCurrentPickId()&&"mousemove"===s&&(s="mouseenter");var x={x:i,y:a,type:s,lngLat:o,featureId:S,feature:T,target:u};T&&(c=!0,e.setCurrentPickId(S),t.triggerHoverOnLayer(e,x))}else{var A={x:i,y:a,lngLat:o,type:null!==e.getCurrentPickId()&&"mousemove"===s?"mouseout":"un"+s,featureId:null,target:u,feature:null};t.triggerHoverOnLayer(e,bx(bx({},A),{},{type:"unpick"})),t.triggerHoverOnLayer(e,A),e.setCurrentPickId(null)}if(y&&t.highlightPickedFeature(e,m),b&&"click"===s&&(null===(r=m)||void 0===r?void 0:r.toString())!==[0,0,0,0].toString()){var w=dp(m);null===e.getCurrentSelectedId()||w!==e.getCurrentSelectedId()?(t.selectFeature(e,m),e.setCurrentSelectedId(w)):(t.selectFeature(e,new Uint8Array([0,0,0,0])),e.setCurrentSelectedId(null))}return c}))}var t,n,r;return jl(e,[{key:"init",value:function(e){var t=this.rendererService,n=t.createTexture2D,r=t.createFramebuffer;t.getViewportSize;var i=t.getContainer,a=this.getContainerSize(i()),o=a.width,s=a.height;o*=Sh,s*=Sh,this.pickBufferScale=this.configService.getSceneConfig(e).pickBufferScale||1,this.pickingFBO=r({color:n({width:Math.round(o/this.pickBufferScale),height:Math.round(s/this.pickBufferScale),wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})}),this.interactionService.on(HT.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:(r=ex(vx.mark((function e(t,n,r){var i,a,o,s=this;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.rendererService,a=i.useFramebuffer,o=i.clear,this.resizePickingFBO(),a(this.pickingFBO,(function(){o({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.hooks.beforePickingEncode.call(),t.renderModels(),t.hooks.afterPickingEncode.call();var e=s.pickBox(t,n);r(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"pickBox",value:function(e,t){var n=this,r=Ll(t.map((function(e){var t=e<0?0:e;return Math.floor(t*Sh/n.pickBufferScale)})),4),i=r[0],a=r[1],o=r[2],s=r[3],u=this.rendererService;u.getViewportSize;var c,l=u.readPixels,f=u.getContainer,h=this.getContainerSize(f()),p=h.width,d=h.height;if(d*=Sh,i>((p*=Sh)-1)*Sh/this.pickBufferScale||o<0||a>(d-1)*Sh/this.pickBufferScale||s<0)return[];var v=Math.min(p/this.pickBufferScale,o)-i,m=Math.min(d/this.pickBufferScale,s)-a;c=l({x:i,y:Math.floor(d/this.pickBufferScale-(s+1)),width:v,height:m,data:new Uint8Array(v*m*4),framebuffer:this.pickingFBO});for(var g=[],y={},b=0;b<c.length/4;b+=1){var _=dp(c.slice(4*b,4*b+4));if(-1!==_&&!y[_]){var E=e.getSource().getFeatureById(_);g.push(E),y[_]=!0}}return g}},{key:"getContainerSize",value:function(e){return e.getContext?{width:e.width/Sh,height:e.height/Sh}:e.getBoundingClientRect()}},{key:"pickingAllLayer",value:(n=ex(vx.mark((function e(t){return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.layerService.isMapDragging())){e.next=2;break}return e.abrupt("return");case 2:return this.alreadyInPicking=!0,e.next=5,this.pickingLayers(t);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"resizePickingFBO",value:function(){var e=this.rendererService.getContainer,t=this.getContainerSize(e()),n=t.width,r=t.height;n*=Sh,r*=Sh,this.width===n&&this.height===r||(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(r/this.pickBufferScale)}),this.width=n,this.height=r)}},{key:"pickingLayers",value:(t=ex(vx.mark((function e(t){var n,r,i,a=this;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.rendererService,r=n.useFramebuffer,i=n.clear,this.resizePickingFBO(),r(this.pickingFBO,(function(){a.layerService.getLayers().filter((function(e){return e.needPick(t.type)})).reverse().some((function(e){return i({framebuffer:a.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.hooks.beforePickingEncode.call(),e.renderModels(),e.hooks.afterPickingEncode.call(),a.pickFromPickingFBO(e,t)&&!e.getLayerConfig().enablePropagation}))}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"triggerHoverOnLayer",value:function(e,t){var n,r,i,a;a=!0,null==(n=t)||null===(r=n.target)||void 0===r||null===(i=r.path)||void 0===i||i.map((function(e){var t;null!=e&&e.classList&&(null==e||null===(t=e.classList)||void 0===t||t.forEach((function(e){"l7-marker"!==e&&"l7-popup"!==e||(a=!1)})))})),a&&e.emit(t.type,t)}},{key:"highlightPickedFeature",value:function(e,t){var n=Ll(t,3),r=n[0],i=n[1],a=n[2];e.hooks.beforeHighlight.call([r,i,a])}},{key:"selectFeature",value:function(e,t){var n=Ll(t,3),r=n[0],i=n[1],a=n[2];e.hooks.beforeSelect.call([r,i,a])}}]),e}(),fx=kT(lx.prototype,"rendererService",[ax],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hx=kT(lx.prototype,"configService",[ox],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),px=kT(lx.prototype,"interactionService",[sx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dx=kT(lx.prototype,"layerService",[ux],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cx=lx))||cx),Px=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Bl(this,e),ll(this,"autoStart",void 0),ll(this,"startTime",0),ll(this,"oldTime",0),ll(this,"running",!1),ll(this,"elapsedTime",0),this.autoStart=t}return jl(e,[{key:"start",value:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}(),Ix=(_x=xS(),Ex=zE(OS.IRendererService),Sx=zE(OS.IMapService),Tx=zE(OS.IGlobalConfigService),_x((Ax=function(){function e(){Bl(this,e),ll(this,"clock",new Px),ll(this,"alreadyInRendering",!1),ll(this,"layers",[]),ll(this,"layerList",[]),ll(this,"layerRenderID",void 0),ll(this,"sceneInited",!1),ll(this,"animateInstanceCount",0),CT(this,"renderService",Ox,this),CT(this,"mapService",Cx,this),CT(this,"configService",kx,this)}return jl(e,[{key:"add",value:function(e){this.sceneInited&&e.init(),this.layers.push(e),this.updateLayerRenderList()}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach((function(e){e.inited||e.init()})),this.updateLayerRenderList()}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(e){return this.layers.find((function(t){return t.id===e}))}},{key:"getLayerByName",value:function(e){return this.layers.find((function(t){return t.name===e}))}},{key:"remove",value:function(e,t){if(t){var n=t.layerChildren.indexOf(e);n>-1&&t.layerChildren.splice(n,1)}else{var r=this.layers.indexOf(e);r>-1&&this.layers.splice(r,1)}this.updateLayerRenderList(),e.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.layerList.forEach((function(e){e.hooks.beforeRenderData.call(),e.hooks.beforeRender.call(),e.render(),e.hooks.afterRender.call()})),this.alreadyInRendering=!1)}},{key:"updateLayerRenderList",value:function(){var e=this;this.layerList=[],this.layers.filter((function(e){return e.inited})).filter((function(e){return e.isVisible()})).forEach((function(t){e.layerList.push(t),t.layerChildren.filter((function(e){return e.inited})).filter((function(e){return e.isVisible()})).forEach((function(t){e.layerList.push(t)}))})),this.layerList.sort((function(e,t){return e.zIndex-t.zIndex}))}},{key:"destroy",value:function(){this.layers.forEach((function(e){e.layerChildren&&(e.layerChildren.forEach((function(e){return e.destroy()})),e.layerChildren=[]),e.destroy()})),this.layers=[],this.layerList=[],this.renderLayers()}},{key:"startAnimate",value:function(){0==this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0==--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"isMapDragging",value:function(){return this.mapService.dragging}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=lh.requestAnimationFrame(this.runRender.bind(this))}},{key:"clear",value:function(){var e,t,n,r=(e=this.mapService.bgColor,t=np(e),n=[0,0,0,0],null!=t&&(n[0]=t.r/255,n[1]=t.g/255,n[2]=t.b/255,n[3]=t.opacity),n);this.renderService.clear({color:r,depth:1,stencil:0,framebuffer:null})}},{key:"stopRender",value:function(){lh.cancelAnimationFrame(this.layerRenderID)}}]),e}(),Ox=kT(Ax.prototype,"renderService",[Ex],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cx=kT(Ax.prototype,"mapService",[Sx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kx=kT(Ax.prototype,"configService",[Tx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xx=Ax))||xx);function Nx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Lx,Mx,Dx,Fx,Bx,Ux,jx=function(e){return null==e},Vx=function(){function e(t){var n=this;Bl(this,e),ll(this,"name",void 0),ll(this,"type",void 0),ll(this,"scale",void 0),ll(this,"descriptor",void 0),ll(this,"featureBufferLayout",[]),ll(this,"needRescale",!1),ll(this,"needRemapping",!1),ll(this,"needRegenerateVertices",!1),ll(this,"featureRange",{startIndex:0,endIndex:1/0}),ll(this,"vertexAttribute",void 0),ll(this,"defaultCallback",(function(e){var t;return 0===e.length?(null===(t=n.scale)||void 0===t?void 0:t.defaultValues)||[]:e.map((function(e,t){var r;return(null===(r=n.scale)||void 0===r?void 0:r.scalers[t].func)(e)}))})),this.setProps(t)}return jl(e,[{key:"setProps",value:function(e){Object.assign(this,e)}},{key:"mapping",value:function(e){var t;if(null!==(t=this.scale)&&void 0!==t&&t.callback){var n,r=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,pl(e));if(!jx(r))return[r]}return this.defaultCallback(e)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),Hx=["buffer","update","name"];function Gx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gx(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xx=(ll(Lx={},nx.FLOAT,4),ll(Lx,nx.UNSIGNED_BYTE,1),ll(Lx,nx.UNSIGNED_SHORT,2),Lx),Wx=(Mx=xS(),Dx=zE(OS.IRendererService),Mx((Bx=function(){function e(){Bl(this,e),ll(this,"attributesAndIndices",void 0),CT(this,"rendererService",Ux,this),ll(this,"attributes",[]),ll(this,"triangulation",void 0),ll(this,"featureLayout",{sizePerElement:0,elements:[]})}return jl(e,[{key:"registerStyleAttribute",value:function(e){var t=this.getLayerStyleAttribute(e.name||"");return t?t.setProps(e):(t=new Vx(e),this.attributes.push(t)),t}},{key:"updateStyleAttribute",value:function(e,t,n){var r=this.getLayerStyleAttribute(e);r||(r=this.registerStyleAttribute(zx(zx({},t),{},{name:e})));var i=t.scale;i&&r&&(r.scale=i,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(e){return this.attributes.find((function(t){return t.name===e}))}},{key:"getLayerAttributeScale",value:function(e){var t,n=this.getLayerStyleAttribute(e),r=null==n||null===(t=n.scale)||void 0===t?void 0:t.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=this.attributes.find((function(t){return t.name===e}));if(i&&i.descriptor){var a=i.descriptor,o=a.update,s=a.buffer,u=a.size,c=void 0===u?0:u,l=Xx[s.type||nx.FLOAT];if(o){var f=this.featureLayout,h=f.elements,p=f.sizePerElement,d=h.slice(n,r);if(!d.length)return;var v=d[0].offset,m=v*c*l,g=d.map((function(e,n){for(var r=e.featureIdx,i=e.vertices,a=e.normals,s=i.length/p,u=[],c=0;c<s;c++){var l=a?a.slice(3*c,3*c+3):[];u.push.apply(u,pl(o(t[r],r,i.slice(c*p,c*p+p),n,l)))}return u})).reduce((function(e,t){return e.push.apply(e,pl(t)),e}),[]);i.vertexAttribute.updateBuffer({data:g,offset:m})}}}},{key:"createAttributesAndIndices",value:function(e,t,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]},t&&(this.triangulation=t);var i=this.attributes.map((function(e){return e.resetDescriptor(),e.descriptor})),a=0,o=[],s=3;e.forEach((function(e,t){var u=r.triangulation(e,n),c=u.indices,l=u.vertices,f=u.normals,h=u.size;c.forEach((function(e){o.push(e+a)})),s=h;var p=l.length/h;r.featureLayout.sizePerElement=s,r.featureLayout.elements.push({featureIdx:t,vertices:l,normals:f,offset:a}),a+=p;for(var d=function(n){var r=(null==f?void 0:f.slice(3*n,3*n+3))||[],a=l.slice(n*h,n*h+h);i.forEach((function(i,o){var s;i&&i.update&&(s=i.buffer.data).push.apply(s,pl(i.update(e,t,a,n,r)))}))},v=0;v<p;v++)d(v)}));var u=this.rendererService,c=u.createAttribute,l=u.createBuffer,f=u.createElements,h={};i.forEach((function(e,t){if(e){var n=e.buffer;e.update,e.name;var i=Nx(e,Hx),a=c(zx({buffer:l(n)},i));h[e.name||""]=a,r.attributes[t].vertexAttribute=a}}));var p=f({data:o,type:nx.UNSIGNED_INT,count:o.length});return this.attributesAndIndices={attributes:h,elements:p},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var e;this.attributes.forEach((function(e){e.vertexAttribute&&e.vertexAttribute.destroy()})),null===(e=this.attributesAndIndices)||void 0===e||e.elements.destroy(),this.attributes=[]}}]),e}(),Ux=kT(Bx.prototype,"rendererService",[Dx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fx=Bx))||Fx),qx={exports:{}};function Yx(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame((function(){var n=t.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach((function(t){t.call(n,e)}))}))}var Kx=function(e,t){var n,r=this.document,i=r.attachEvent;if("undefined"!=typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",Yx);else{"static"===getComputedStyle(e).position&&(e.style.position="relative");var a=e.__resizeTrigger__=r.createElement("object");a.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),a.setAttribute("class","resize-sensor"),a.setAttribute("tabindex","-1"),a.setAttribute("title",""),a.__resizeElement__=e,a.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",Yx)},a.type="text/html",n&&e.appendChild(a),a.data="about:blank",n||e.appendChild(a)}e.__resizeListeners__.push(t)};qx.exports="undefined"==typeof window?Kx:Kx.bind(window);var Zx,Qx,Jx,$x,eA,tA,nA,rA,iA,aA,oA,sA,uA,cA,lA,fA,hA,pA,dA,vA,mA,gA,yA,bA,_A,EA,SA,TA,xA,AA,wA,OA,CA,kA=qx.exports.unbind=function(e,t){var n=document.attachEvent,r=e.__resizeListeners__||[];if(t){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}else r=e.__resizeListeners__=[];if(!r.length){if(n)e.detachEvent("onresize",Yx);else if(e.__resizeTrigger__){var a=e.__resizeTrigger__.contentDocument,o=a&&a.defaultView;o&&(o.removeEventListener("resize",Yx),delete o.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}},RA=qx.exports;function PA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var IA=(Zx=xS(),Qx=zE(OS.SceneID),Jx=zE(OS.IIconService),$x=zE(OS.IFontService),eA=zE(OS.IControlService),tA=zE(OS.IGlobalConfigService),nA=zE(OS.IMapService),rA=zE(OS.ICoordinateSystemService),iA=zE(OS.IRendererService),aA=zE(OS.ILayerService),oA=zE(OS.ICameraService),sA=zE(OS.IInteractionService),uA=zE(OS.IPickingService),cA=zE(OS.IShaderModuleService),lA=zE(OS.IMarkerService),fA=zE(OS.IPopupService),Zx((pA=function(e){Xl(r,F_.exports.EventEmitter);var t,n=PA(r);function r(){var e;return Bl(this,r),ll(ql(e=n.call(this)),"destroyed",!1),ll(ql(e),"loaded",!1),ll(ql(e),"loadFont",!1),ll(ql(e),"fontFamily",""),CT(ql(e),"id",dA,ql(e)),CT(ql(e),"iconService",vA,ql(e)),CT(ql(e),"fontService",mA,ql(e)),CT(ql(e),"controlService",gA,ql(e)),CT(ql(e),"configService",yA,ql(e)),CT(ql(e),"map",bA,ql(e)),CT(ql(e),"coordinateSystemService",_A,ql(e)),CT(ql(e),"rendererService",EA,ql(e)),CT(ql(e),"layerService",SA,ql(e)),CT(ql(e),"cameraService",TA,ql(e)),CT(ql(e),"interactionService",xA,ql(e)),CT(ql(e),"pickingService",AA,ql(e)),CT(ql(e),"shaderModuleService",wA,ql(e)),CT(ql(e),"markerService",OA,ql(e)),CT(ql(e),"popupService",CA,ql(e)),ll(ql(e),"inited",!1),ll(ql(e),"initPromise",void 0),ll(ql(e),"rendering",!1),ll(ql(e),"$container",void 0),ll(ql(e),"canvas",void 0),ll(ql(e),"markerContainer",void 0),ll(ql(e),"hooks",void 0),ll(ql(e),"handleWindowResized",(function(){e.emit("resize"),e.$container&&(e.initContainer(),function(){if("function"==typeof Event)lh.dispatchEvent(new Event("resize"));else{var e=lh.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,lh,0),lh.dispatchEvent(e)}}(),e.coordinateSystemService.needRefresh=!0,e.render())})),ll(ql(e),"handleMapCameraChanged",(function(t){e.cameraService.update(t),e.render()})),e.hooks={init:new D_},e}return jl(r,[{key:"init",value:function(e){var t=this;this.configService.setSceneConfig(this.id,e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",ex(vx.mark((function e(){return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.map.onCameraChanged((function(n){t.cameraService.init(),t.cameraService.update(n),"GAODE2.x"!==t.map.version&&e()})),"GAODE2.x"!==t.map.version?t.map.init():e()}));case 2:if("GAODE2.x"!==t.map.version||!t.map.initViewPort){e.next=6;break}return e.next=5,t.map.init();case 5:t.map.initViewPort();case 6:t.map.onCameraChanged(t.handleMapCameraChanged),t.map.addMarkerContainer(),t.markerService.addMarkers(),t.markerService.addMarkerLayers(),t.popupService.initPopup(),t.interactionService.init(),t.interactionService.on(HT.Drag,t.addSceneEvent.bind(t));case 13:case"end":return e.stop()}}),e)})))),this.hooks.init.tapPromise("initRenderer",ex(vx.mark((function e(){var n,r;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=gx(t.configService.getSceneConfig(t.id).id||""),t.$container=n,!n){e.next=11;break}return t.canvas=ph("canvas","",n),t.setCanvas(),e.next=7,t.rendererService.init(t.canvas,t.configService.getSceneConfig(t.id));case 7:RA(t.$container,t.handleWindowResized),lh.matchMedia&&(null===(r=lh.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))||void 0===r||r.addListener(t.handleWindowResized)),e.next=12;break;case 11:console.error("容器 id 不存在");case 12:t.pickingService.init(t.id);case 13:case"end":return e.stop()}}),e)})))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"initMiniScene",value:function(e){var t=this;this.configService.setSceneConfig(this.id,e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",ex(vx.mark((function e(){return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.map.onCameraChanged((function(n){t.cameraService.init(),t.cameraService.update(n),"GAODE2.x"!==t.map.version&&e()})),t.map.initMiniMap()}));case 2:t.map.onCameraChanged(t.handleMapCameraChanged),t.interactionService.init(),t.interactionService.on(HT.Drag,t.addSceneEvent.bind(t));case 5:case"end":return e.stop()}}),e)})))),this.hooks.init.tapPromise("initRenderer",ex(vx.mark((function n(){var r;return vx.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.canvas,t.$container=r||null,!t.$container){n.next=7;break}return n.next=5,t.rendererService.init(e.canvas,t.configService.getSceneConfig(t.id));case 5:n.next=8;break;case 7:console.error("容器 id 不存在");case 8:t.pickingService.init(t.id);case 9:case"end":return n.stop()}}),n)})))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(e){this.layerService.sceneService=this,this.layerService.add(e),this.render()}},{key:"render",value:(t=ex(vx.mark((function e(){return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rendering&&!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:if(this.rendering=!0,this.inited){e.next=15;break}return e.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!this.loadFont||!document.fonts){e.next=10;break}return e.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 15:this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this.rendering=!1;case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"addFontFace",value:function(e,t){this.fontFamily=e;var n=document.createElement("style");n.type="text/css",n.innerText="\n        @font-face{\n            font-family: '".concat(e,"';\n            src: url('").concat(t,"') format('woff2'),\n            url('").concat(t,"') format('woff'),\n            url('").concat(t,"') format('truetype');\n        }"),document.getElementsByTagName("head")[0].appendChild(n),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(e){var t,n=null===(t=this.$container)||void 0===t?void 0:t.getElementsByTagName("canvas")[0];return this.render(),"jpg"===e?null==n?void 0:n.toDataURL("image/jpeg"):null==n?void 0:n.toDataURL("image/png")}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var e=this.$container.parentElement;null!==e&&(this.markerContainer=ph("div","l7-marker-container",e))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var e,t,n;this.inited?(this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),null===(e=this.$container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$container),this.removeAllListeners(),this.inited=!1,kA(this.$container,this.handleWindowResized),lh.matchMedia&&(null===(n=lh.matchMedia("screen and (min-resolution: 2dppx)"))||void 0===n||n.removeListener(this.handleWindowResized))):this.destroyed=!0}},{key:"initContainer",value:function(){var e,t,n=Sh,r=(null===(e=this.$container)||void 0===e?void 0:e.clientWidth)||400,i=(null===(t=this.$container)||void 0===t?void 0:t.clientHeight)||300,a=this.canvas;a&&(a.width=r*n,a.height=i*n),this.rendererService.viewport({x:0,y:0,width:n*r,height:n*i})}},{key:"setCanvas",value:function(){var e,t,n=Sh,r=(null===(e=this.$container)||void 0===e?void 0:e.clientWidth)||400,i=(null===(t=this.$container)||void 0===t?void 0:t.clientHeight)||300,a=this.canvas;a.width=r*n,a.height=i*n,a.style.width="100%",a.style.height="100%"}},{key:"addSceneEvent",value:function(e){this.emit(e.type,e)}}]),r}(),dA=kT(pA.prototype,"id",[Qx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vA=kT(pA.prototype,"iconService",[Jx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mA=kT(pA.prototype,"fontService",[$x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gA=kT(pA.prototype,"controlService",[eA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yA=kT(pA.prototype,"configService",[tA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bA=kT(pA.prototype,"map",[nA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_A=kT(pA.prototype,"coordinateSystemService",[rA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EA=kT(pA.prototype,"rendererService",[iA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SA=kT(pA.prototype,"layerService",[aA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TA=kT(pA.prototype,"cameraService",[oA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xA=kT(pA.prototype,"interactionService",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AA=kT(pA.prototype,"pickingService",[uA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wA=kT(pA.prototype,"shaderModuleService",[cA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OA=kT(pA.prototype,"markerService",[lA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CA=kT(pA.prototype,"popupService",[fA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hA=pA))||hA);var NA=ov,LA=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},MA=function(e){return this.__data__.has(e)};function DA(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new NA;++t<n;)this.add(e[t])}DA.prototype.add=DA.prototype.push=LA,DA.prototype.has=MA;var FA=DA;var BA=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1},UA=function(e){return e!=e},jA=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var VA=function(e,t,n){return t==t?jA(e,t,n):BA(e,UA,n)};var HA=function(e,t){return!!(null==e?0:e.length)&&VA(e,t,0)>-1};var GA=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var zA=function(e,t){return e.has(t)};var XA=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},WA=Qy,qA=function(){},YA=WA&&1/XA(new WA([,-0]))[1]==1/0?function(e){return new WA(e)}:qA,KA=FA,ZA=HA,QA=GA,JA=zA,$A=YA,ew=XA;var tw=function(e,t,n){var r=-1,i=ZA,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=QA;else if(a>=200){var c=t?null:$A(e);if(c)return ew(c);o=!1,i=JA,u=new KA}else u=t?[]:s;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s};var nw=function(e){return e&&e.length?tw(e):[]};var rw,iw=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function aw(e){var t={};return{content:e=e.replace(iw,(function(e,n,r){var i=r.split(":"),a=i[0].trim(),o="";switch(i.length>1&&(o=i[1].trim()),n){case"bool":o="true"===o;break;case"float":case"int":o=Number(o);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":o=o?o.replace("[","").replace("]","").split(",").reduce((function(e,t){return e.push(Number(t.trim())),e}),[]):new Array(function(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16}return t}(n)).fill(0)}return t[a]=o,"uniform ".concat(n," ").concat(a,";\n")})),uniforms:t}}function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uw,cw,lw,fw,hw,pw,dw,vw="#define PI 3.14159265359",mw=/precision\s+(high|low|medium)p\s+float/,gw=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,yw=xS()(rw=function(){function e(){Bl(this,e),ll(this,"moduleCache",{}),ll(this,"rawContentCache",{})}return jl(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:vw,fs:vw}),this.registerModule("decode",{vs:"#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",fs:""}),this.registerModule("projection",{vs:"#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// uniform mat4 u_Mvp;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0\n    return vector;\n  }\n  return vector;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // return vec4(\n    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), \n    //   project_scale(position.z), \n    //   position.w);\n\n     return vec4(\n      position.xy, \n      project_scale(position.z), \n      position.w);\n  }\n  return position;\n\n  // TODO: 瓦片坐标系 & 常规世界坐标系\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel_allmap(float pixel) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return pixel * pow(2.0, u_Zoom);\n  }\n  return pixel;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel * -1.;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}",fs:""}),this.registerModule("project",{vs:"\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // 经纬度 => 平面坐标\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // 平面坐标 => 经纬度\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",fs:""}),this.registerModule("sdf_2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n"}),this.registerModule("lighting",{vs:"// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",fs:""}),this.registerModule("light",{vs:"#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",fs:""}),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_Dragging;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  // TODO: 过滤多余的 shader 计算\n  // if(u_Dragging > 0.0) return color; // 暂时去除 直接取消计算在选中时拖拽地图会有问题\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("styleMapping",{vs:"attribute float a_vertexId;\n\nuniform mat4 u_cellTypeLayout;      // 描述数据纹理 cell 结构的矩阵\nuniform sampler2D u_dataTexture;    // 数据纹理\n\nbool hasOpacity() { // 判断 cell 中是否存在 opacity 的数据\n  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeOpacity() { // 判断 cell 中是否存在 strokeOpacity 的数据\n  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeWidth() { // 判断 cell 中是否存在 strokeWidth 的数据\n  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStroke() { // 判断 cell 中是否存在 stroke 的数据\n  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasOffsets() { // 判断 cell 中是否存在 offsets 的数据\n  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\n// 根据坐标位置先是计算 uv ，然后根据 uv 从数据纹理中取值\nfloat pos2value(vec2 pos, float columnWidth, float rowHeight) {\n  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;\n  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);\n  return texture2D(u_dataTexture, vec2(u, v)).r;\n}\n\n/*\n  currentRow 当前行\n  currentColumn 当前列\n  columnCount 有多少列\n  nextStep 需要计算当前 cell 后的第几个 cell （当前 cell 则 nextStep = 0）\n*/\nvec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {\n  float nextColumn = currentColumn;\n  float nextRow = currentRow;\n  if(currentColumn + nextStep <= columnCount){\n    nextColumn = currentColumn + nextStep;\n  } else {\n    nextColumn = mod(currentColumn + nextStep, columnCount); // 不会出现跨两行\n    nextRow = currentRow + 1.0;\n  }\n  return vec2(nextColumn, nextRow);\n}\n\n// 计算当前单个 cell 的大小\nfloat calCellCount() { \n  //   u_cellTypeLayout\n  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - 几行几列\n  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 表示有数据映射、0.0 表示没有\n  //   1.0, 0.0, 0.0, 0.0, // offsets\n  //   0.0, 0.0, 0.0, 0.0\n  \n  return  u_cellTypeLayout[1][0] +        // opacity\n          u_cellTypeLayout[1][1] +        // strokeOpacity\n          u_cellTypeLayout[1][2] +        // strokeWidth\n          u_cellTypeLayout[1][3] * 4.0 +  // stroke\n          u_cellTypeLayout[2][0] * 2.0;   // offsets\n}",fs:""}),this.registerModule("styleMappingCalOpacity",{vs:"\n// 计算 opacity 和标示在 cell 中取值位置的偏移量 textureOffset\nvec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasOpacity()) { // 数据纹理中不存在 opacity 的时候取默认值（用户在 style 中传入的是常量）\n    return vec2(u_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureOpacity, textureOffset + 1.0);\n  }\n}\n",fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:"\n// 计算 strokeOpaicty 和标示在 cell 中取值位置的偏移量 textureOffset\nvec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeOpacity()) {\n    return vec2(u_stroke_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeOpacity, textureOffset + 1.0);\n  }\n}\n",fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:"\n// 计算 strokeWidth 和标示在 cell 中取值位置的偏移量 textureOffset\nvec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeWidth()) {\n    return vec2(u_stroke_width, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeWidth, textureOffset + 1.0);\n  }\n}\n",fs:""})}},{key:"registerModule",value:function(e,t){if(!this.rawContentCache[e]){var n=t.vs,r=t.fs,i=t.uniforms,a=aw(n),o=a.content,s=a.uniforms,u=aw(r),c=u.content,l=u.uniforms;this.rawContentCache[e]={fs:c,uniforms:sw(sw(sw({},s),l),i),vs:o}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var t=this;if(this.moduleCache[e])return this.moduleCache[e];var n=this.rawContentCache[e].vs,r=this.rawContentCache[e].fs,i=this.processModule(n,[],"vs"),a=i.content,o=i.includeList,s=this.processModule(r,[],"fs"),u=s.content,c=s.includeList,l=u,f=nw(o.concat(c).concat(e)).reduce((function(e,n){return sw(sw({},e),t.rawContentCache[n].uniforms)}),{});return mw.test(u)||(l="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+u),this.moduleCache[e]={fs:l.trim(),uniforms:f,vs:a.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,t,n){var r=this;return{content:e.replace(gw,(function(e,i){var a=i.split(" ")[0].replace(/"/g,"");if(t.indexOf(a)>-1)return"";var o=r.rawContentCache[a][n];return t.push(a),r.processModule(o,t,n).content})),includeList:t}}}]),e}())||rw;function bw(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kl(e)););return e}function _w(){return(_w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=bw(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}(cw=uw||(uw={})).Normal="normal",cw.PostProcessing="post-processing";var Ew,Sw=(lw=xS(),fw=zE(OS.IShaderModuleService),lw((pw=function(){function e(){Bl(this,e),CT(this,"shaderModuleService",dw,this),ll(this,"rendererService",void 0),ll(this,"cameraService",void 0),ll(this,"mapService",void 0),ll(this,"interactionService",void 0),ll(this,"layerService",void 0),ll(this,"config",void 0)}return jl(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return uw.Normal}},{key:"init",value:function(e,t){this.config=t,this.rendererService=e.getContainer().get(OS.IRendererService),this.cameraService=e.getContainer().get(OS.ICameraService),this.mapService=e.getContainer().get(OS.IMapService),this.interactionService=e.getContainer().get(OS.IInteractionService),this.layerService=e.getContainer().get(OS.ILayerService)}},{key:"render",value:function(e){}}]),e}(),dw=kT(pw.prototype,"shaderModuleService",[fw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hw=pw))||hw);function Tw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var xw,Aw,ww,Ow,Cw,kw=xS()(Ew=function(e){Xl(n,Sw);var t=Tw(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(e,t){_w(Kl(n.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}())||Ew;function Rw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pw(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Pw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Iw,Nw=(xw=xS(),Aw=zE(OS.IPostProcessor),xw((Ow=function(){function e(){Bl(this,e),ll(this,"passes",[]),CT(this,"postProcessor",Cw,this),ll(this,"layer",void 0),ll(this,"renderFlag",void 0),ll(this,"width",0),ll(this,"height",0)}var t;return jl(e,[{key:"setLayer",value:function(e){this.layer=e}},{key:"setRenderFlag",value:function(e){this.renderFlag=e}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:(t=ex(vx.mark((function e(){var t,n,r;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Rw(this.passes),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.render(this.layer);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:this.layer.renderModels();case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return t.apply(this,arguments)})},{key:"resize",value:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t)}},{key:"add",value:function(e,t){e.getType()===uw.PostProcessing?this.postProcessor.add(e,this.layer,t):(e.init(this.layer,t),this.passes.push(e))}},{key:"insert",value:function(e,t,n){e.init(this.layer,t),this.passes.splice(n,0,e)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),Cw=kT(Ow.prototype,"postProcessor",[Aw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ww=Ow))||ww);function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var Fw=xS()(Iw=function(e){Xl(n,Sw);var t=Dw(n);function n(){var e;Bl(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return ll(ql(e=t.call.apply(t,[this].concat(i))),"pickingFBO",void 0),ll(ql(e),"layer",void 0),ll(ql(e),"width",0),ll(ql(e),"height",0),ll(ql(e),"alreadyInRendering",!1),ll(ql(e),"pickFromPickingFBO",(function(t){var n=t.x,r=t.y,i=t.lngLat,a=t.type;if(e.layer.isVisible()&&e.layer.needPick(a)){var o,s=e.rendererService,u=s.getViewportSize,c=s.readPixels,l=s.useFramebuffer,f=u(),h=f.width,p=f.height,d=e.layer.getLayerConfig(),v=d.enableHighlight,m=d.enableSelect,g=n*Sh,y=r*Sh;if(!(g>h||g<0||y>p||y<0))l(e.pickingFBO,(function(){var t;if(0!==(o=c({x:Math.round(g),y:Math.round(p-(r+1)*Sh),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]||0!==o[1]||0!==o[2]){var s=dp(o),u=e.layer.getSource().getFeatureById(s),l={x:n,y:r,type:a,lngLat:i,featureId:s,feature:u};u&&(e.layer.setCurrentPickId(s),e.triggerHoverOnLayer(l))}else{var f={x:n,y:r,lngLat:i,type:null===e.layer.getCurrentPickId()?"un"+a:"mouseout",featureId:null,feature:null};e.triggerHoverOnLayer(Mw(Mw({},f),{},{type:"unpick"})),e.triggerHoverOnLayer(f),e.layer.setCurrentPickId(null)}v&&e.highlightPickedFeature(o),m&&"click"===a&&(null===(t=o)||void 0===t?void 0:t.toString())!==[0,0,0,0].toString()&&e.selectFeature(o)}))}})),e}return jl(n,[{key:"getType",value:function(){return uw.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(e,t){_w(Kl(n.prototype),"init",this).call(this,e,t),this.layer=e;var r=this.rendererService,i=r.createTexture2D,a=r.createFramebuffer,o=(0,r.getViewportSize)(),s=o.width,u=o.height;this.pickingFBO=a({color:i({width:s,height:u,wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})}),this.interactionService.on(HT.Hover,this.pickFromPickingFBO),this.interactionService.on(HT.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(HT.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(e){var t=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,a=n.clear,o=r(),s=o.width,u=o.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,(function(){a({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=t.layer.multiPassRenderer.getRenderFlag();t.layer.multiPassRenderer.setRenderFlag(!1),e.hooks.beforePickingEncode.call(),e.render(),e.hooks.afterPickingEncode.call(),t.layer.multiPassRenderer.setRenderFlag(n),t.alreadyInRendering=!1}))}}},{key:"triggerHoverOnLayer",value:function(e){this.layer.emit(e.type,e)}},{key:"highlightPickedFeature",value:function(e){var t=Ll(e,3),n=t[0],r=t[1],i=t[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(e){var t=Ll(e,3),n=t[0],r=t[1],i=t[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(e){var t=vp(e.featureId);this.selectFeature(new Uint8Array(t))}},{key:"highlightFeatureHandle",value:function(e){var t=vp(e.featureId);this.highlightPickedFeature(new Uint8Array(t))}}]),n}())||Iw;var Bw=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var Uw=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Bw(e,t,n)},jw=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Vw=function(e){return jw.test(e)};var Hw=function(e){return e.split("")},Gw="[\\ud800-\\udfff]",zw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xw="\\ud83c[\\udffb-\\udfff]",Ww="[^\\ud800-\\udfff]",qw="(?:\\ud83c[\\udde6-\\uddff]){2}",Yw="[\\ud800-\\udbff][\\udc00-\\udfff]",Kw="(?:"+zw+"|"+Xw+")"+"?",Zw="[\\ufe0e\\ufe0f]?"+Kw+("(?:\\u200d(?:"+[Ww,qw,Yw].join("|")+")[\\ufe0e\\ufe0f]?"+Kw+")*"),Qw="(?:"+[Ww+zw+"?",zw,qw,Yw,Gw].join("|")+")",Jw=RegExp(Xw+"(?="+Xw+")|"+Qw+Zw,"g");var $w=Hw,eO=Vw,tO=function(e){return e.match(Jw)||[]};var nO=function(e){return eO(e)?tO(e):$w(e)};var rO=id,iO=Zv;var aO=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},oO=am,sO=function(e){return"symbol"==typeof e||iO(e)&&"[object Symbol]"==rO(e)},uO=qp?qp.prototype:void 0,cO=uO?uO.toString:void 0;var lO=function e(t){if("string"==typeof t)return t;if(oO(t))return aO(t,e)+"";if(sO(t))return cO?cO.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var fO=function(e){return null==e?"":lO(e)},hO=Uw,pO=Vw,dO=nO,vO=fO;var mO=function(e){return function(t){t=vO(t);var n=pO(t)?dO(t):void 0,r=n?n[0]:t.charAt(0),i=n?hO(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),gO=fO,yO=mO;var bO=function(e){return yO(gO(e).toLowerCase())};var _O=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var EO=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),SO=fO,TO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xO=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var AO=function(e){return(e=SO(e))&&e.replace(TO,EO).replace(xO,"")},wO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var OO=function(e){return e.match(wO)||[]},CO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var kO=function(e){return CO.test(e)},RO="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",PO="["+RO+"]",IO="\\d+",NO="[\\u2700-\\u27bf]",LO="[a-z\\xdf-\\xf6\\xf8-\\xff]",MO="[^\\ud800-\\udfff"+RO+IO+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",DO="(?:\\ud83c[\\udde6-\\uddff]){2}",FO="[\\ud800-\\udbff][\\udc00-\\udfff]",BO="[A-Z\\xc0-\\xd6\\xd8-\\xde]",UO="(?:"+LO+"|"+MO+")",jO="(?:"+BO+"|"+MO+")",VO="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",HO="[\\ufe0e\\ufe0f]?"+VO+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",DO,FO].join("|")+")[\\ufe0e\\ufe0f]?"+VO+")*"),GO="(?:"+[NO,DO,FO].join("|")+")"+HO,zO=RegExp([BO+"?"+LO+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[PO,BO,"$"].join("|")+")",jO+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[PO,BO+UO,"$"].join("|")+")",BO+"?"+UO+"+(?:['’](?:d|ll|m|re|s|t|ve))?",BO+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",IO,GO].join("|"),"g");var XO=OO,WO=kO,qO=fO,YO=function(e){return e.match(zO)||[]};var KO=_O,ZO=AO,QO=function(e,t,n){return e=qO(e),void 0===(t=n?void 0:t)?WO(e)?YO(e):XO(e):e.match(t)||[]},JO=RegExp("['’]","g");var $O,eC,tC,nC,rC,iC=bO,aC=function(e){return function(t){return KO(QO(ZO(t).replace(JO,"")),e,"")}}((function(e,t,n){return t=t.toLowerCase(),e+(n?iC(t):t)}));function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uC,cC=($O=xS(),eC=zE(OS.IShaderModuleService),$O((nC=function(){function e(){Bl(this,e),CT(this,"shaderModuleService",rC,this),ll(this,"rendererService",void 0),ll(this,"config",void 0),ll(this,"quad","attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}"),ll(this,"enabled",!0),ll(this,"renderToScreen",!1),ll(this,"model",void 0),ll(this,"name",void 0),ll(this,"optionsToUpdate",{})}return jl(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getType",value:function(){return uw.PostProcessing}},{key:"init",value:function(e,t){this.config=t,this.rendererService=e.getContainer().get(OS.IRendererService);var n=this.rendererService,r=n.createAttribute,i=n.createBuffer,a=n.createModel,o=this.setupShaders(),s=o.vs,u=o.fs,c=o.uniforms;this.model=a({vs:s,fs:u,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:nx.FLOAT}),size:2})},uniforms:sC(sC({u_Texture:null},c),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(e){var t=this,n=e.multiPassRenderer.getPostProcessor(),r=this.rendererService,i=r.useFramebuffer,a=r.getViewportSize,o=r.clear,s=a(),u=s.width,c=s.height;i(this.renderToScreen?null:n.getWriteFBO(),(function(){o({framebuffer:n.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:sC({u_Texture:n.getReadFBO(),u_ViewportSize:[u,c]},t.convertOptionsToUniforms(t.optionsToUpdate))})}))}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"setRenderToScreen",value:function(e){this.renderToScreen=e}},{key:"updateOptions",value:function(e){this.optionsToUpdate=sC(sC({},this.optionsToUpdate),e)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(e){var t={};return Object.keys(e).forEach((function(n){jx(e[n])||(t["u_".concat(mO(aC(n)))]=e[n])})),t}}]),e}(),rC=kT(nC.prototype,"shaderModuleService",[eC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tC=nC))||tC);function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var pC,dC=xS()(uC=function(e){Xl(n,cC);var t=hC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var e=this.shaderModuleService.getModule("blur-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),a=i.width,o=i.height;return{vs:t,fs:n,uniforms:fC(fC({},r),{},{u_ViewportSize:[a,o]})}}},{key:"convertOptionsToUniforms",value:function(e){var t={};return jx(e.blurRadius)||(t.u_BlurDir=[e.blurRadius,0]),t}}]),n}())||uC;function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vC(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var yC,bC=xS()(pC=function(e){Xl(n,cC);var t=gC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var e=this.shaderModuleService.getModule("blur-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),a=i.width,o=i.height;return{vs:t,fs:n,uniforms:mC(mC({},r),{},{u_ViewportSize:[a,o]})}}},{key:"convertOptionsToUniforms",value:function(e){var t={};return jx(e.blurRadius)||(t.u_BlurDir=[0,e.blurRadius]),t}}]),n}())||pC;function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_C(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var TC,xC=xS()(yC=function(e){Xl(n,cC);var t=SC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:'varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}'});var e=this.shaderModuleService.getModule("colorhalftone-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),a=i.width,o=i.height;return{vs:t,fs:n,uniforms:EC(EC({},r),{},{u_ViewportSize:[a,o]})}}}]),n}())||yC;function AC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var wC,OC=xS()(TC=function(e){Xl(n,cC);var t=AC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}"}),this.shaderModuleService.getModule("copy-pass")}}]),n}())||TC;function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CC(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var PC,IC=xS()(wC=function(e){Xl(n,cC);var t=RC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var e=this.shaderModuleService.getModule("hexagonalpixelate-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),a=i.width,o=i.height;return{vs:t,fs:n,uniforms:kC(kC({},r),{},{u_ViewportSize:[a,o]})}}}]),n}())||wC;function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NC(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var DC,FC=xS()(PC=function(e){Xl(n,cC);var t=MC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var e=this.shaderModuleService.getModule("ink-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),a=i.width,o=i.height;return{vs:t,fs:n,uniforms:LC(LC({},r),{},{u_ViewportSize:[a,o]})}}}]),n}())||PC;function BC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var UC,jC=xS()(DC=function(e){Xl(n,cC);var t=BC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}"}),this.shaderModuleService.getModule("noise-pass")}}]),n}())||DC;function VC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var HC,GC,zC,XC,WC,qC,YC,KC=xS()(UC=function(e){Xl(n,cC);var t=VC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}"}),this.shaderModuleService.getModule("sepia-pass")}}]),n}())||UC,ZC=(HC=xS(),GC=zE(OS.IRendererService),zC=function(e,t,n){var r=new BE("post_construct",t);if(Reflect.hasOwnMetadata("post_construct",e.constructor))throw new Error("Cannot apply @postConstruct decorator multiple times in the same class");Reflect.defineMetadata("post_construct",r,e.constructor)},HC((WC=function(){function e(){Bl(this,e),CT(this,"rendererService",qC,this),ll(this,"passes",[]),ll(this,"readFBO",void 0),ll(this,"writeFBO",void 0)}var t;return jl(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:(t=ex(vx.mark((function e(t){var n,r;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this.passes.length)){e.next=10;break}return(r=this.passes[n]).setRenderToScreen(this.isLastEnabledPass(n)),e.next=6,r.render(t);case 6:n!==this.passes.length-1&&this.swap();case 7:n++,e.next=1;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resize",value:function(e,t){this.readFBO.resize({width:e,height:t}),this.writeFBO.resize({width:e,height:t})}},{key:"add",value:function(e,t,n){e.init(t,n),this.passes.push(e)}},{key:"insert",value:function(e,t,n,r){e.init(n,r),this.passes.splice(t,0,e)}},{key:"getPostProcessingPassByName",value:function(e){return this.passes.find((function(t){return t.getName()===e}))}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].isEnabled())return!1;return!0}},{key:"swap",value:function(){var e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=e}}]),e}(),qC=kT(WC.prototype,"rendererService",[GC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kT(WC.prototype,"init",[zC],Object.getOwnPropertyDescriptor(WC.prototype,"init"),WC.prototype),XC=WC))||XC);function QC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var JC,$C,ek,tk,nk,rk=xS()(YC=function(e){Xl(n,Sw);var t=QC(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"getType",value:function(){return uw.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(e,t){_w(Kl(n.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(e){var t=this.rendererService,n=t.useFramebuffer,r=t.clear;n(null,(function(){r({color:[0,0,0,0],depth:1,stencil:0}),e.multiPassRenderer.setRenderFlag(!1),e.render(),e.multiPassRenderer.setRenderFlag(!0)}))}}]),n}())||YC;function ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ik(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ok(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var sk="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}";function uk(e,t){for(var n=0,r=1/t,i=e;i>0;)n+=r*(i%t),i=Math.floor(i/t),r/=t;return n}var ck,lk,fk,hk=1,pk=(JC=xS(),$C=zE(OS.IShaderModuleService),JC((tk=function(e){Xl(n,Sw);var t=ok(n);function n(){var e;Bl(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return CT(ql(e=t.call.apply(t,[this].concat(i))),"shaderModuleService",nk,ql(e)),ll(ql(e),"haltonSequence",[]),ll(ql(e),"accumulatingId",0),ll(ql(e),"frame",0),ll(ql(e),"timer",void 0),ll(ql(e),"sampleRenderTarget",void 0),ll(ql(e),"prevRenderTarget",void 0),ll(ql(e),"outputRenderTarget",void 0),ll(ql(e),"copyRenderTarget",void 0),ll(ql(e),"blendModel",void 0),ll(ql(e),"outputModel",void 0),ll(ql(e),"copyModel",void 0),e}return jl(n,[{key:"getType",value:function(){return uw.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(e,t){_w(Kl(n.prototype),"init",this).call(this,e,t);var r=this.rendererService,i=r.createFramebuffer,a=r.createTexture2D;this.sampleRenderTarget=i({color:a({width:1,height:1,wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:a({width:1,height:1,wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:a({width:1,height:1,wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:a({width:1,height:1,wrapS:nx.CLAMP_TO_EDGE,wrapT:nx.CLAMP_TO_EDGE})});for(var o=0;o<30;o++)this.haltonSequence.push([uk(o,2),uk(o,3)]);this.blendModel=this.createTriangleModel("blend-pass","uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n"),this.outputModel=this.createTriangleModel("copy-pass",sk,{blend:{enable:!0,func:{srcRGB:nx.ONE,dstRGB:nx.ONE_MINUS_SRC_ALPHA,srcAlpha:nx.ONE,dstAlpha:nx.ONE_MINUS_SRC_ALPHA},equation:{rgb:nx.FUNC_ADD,alpha:nx.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",sk)}},{key:"render",value:function(e){var t=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,a=n.useFramebuffer,o=i(),s=o.width,u=o.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var c=e.multiPassRenderer.getPostProcessor().getReadFBO();a(c,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c}),e.multiPassRenderer.setRenderFlag(!1),e.render(),e.multiPassRenderer.setRenderFlag(!0)}));var l=function n(r){t.accumulatingId&&r===t.accumulatingId&&(t.isFinished()||(t.doRender(e),lh.requestAnimationFrame((function(){n(r)}))))};this.accumulatingId=hk++,this.timer=lh.setTimeout((function(){l(t.accumulatingId)}),50)}},{key:"doRender",value:function(e){var t=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,a=n.useFramebuffer,o=i(),s=o.width,u=o.height,c=e.getLayerConfig().jitterScale,l=void 0===c?1:c,f=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*f[0]-1)/s*l,(2*f[1]-1)/u*l),e.multiPassRenderer.setRenderFlag(!1),e.hooks.beforeRender.call(),a(this.sampleRenderTarget,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.sampleRenderTarget}),e.render()})),e.hooks.afterRender.call(),e.multiPassRenderer.setRenderFlag(!0);var h=e.getLayerConfig();a(this.outputRenderTarget,(function(){t.blendModel.draw({uniforms:{u_opacity:h.opacity||1,u_MixRatio:0===t.frame?1:.9,u_Diffuse1:t.sampleRenderTarget,u_Diffuse2:0===t.frame?e.multiPassRenderer.getPostProcessor().getReadFBO():t.prevRenderTarget}})})),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(a(this.copyRenderTarget,(function(){t.outputModel.draw({uniforms:{u_Texture:t.outputRenderTarget}})})),a(e.multiPassRenderer.getPostProcessor().getReadFBO(),(function(){t.copyModel.draw({uniforms:{u_Texture:t.copyRenderTarget}})})),e.multiPassRenderer.getPostProcessor().render(e));var p=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=p,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,lh.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(e,t,n){this.shaderModuleService.registerModule(e,{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:t});var r=this.shaderModuleService.getModule(e),i=r.vs,a=r.fs,o=r.uniforms,s=this.rendererService,u=s.createAttribute,c=s.createBuffer;return(0,s.createModel)(ak({vs:i,fs:a,attributes:{a_Position:u({buffer:c({data:[-4,-4,4,-4,0,4],type:nx.FLOAT}),size:2})},uniforms:ak({},o),depth:{enable:!1},count:3},n))}}]),n}(),nk=kT(tk.prototype,"shaderModuleService",[$C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ek=tk))||ek),dk=new TS;dk.bind(OS.IGlobalConfigService).to(OT).inSingletonScope(),dk.bind(OS.IShaderModuleService).to(yw).inSingletonScope(),ck=xS(),lk=F_.exports.EventEmitter,"number"==typeof fk?VE([HE(fk,ck)],lk):"string"==typeof fk?Reflect.decorate([ck],lk,fk):VE([ck],lk),dk.bind(OS.IEventEmitter).to(F_.exports.EventEmitter);var vk,mk,gk,yk,bk,_k,Ek,Sk,Tk,xk,Ak=(void 0===(mk=!1)&&(mk=!0),{lazyInject:function(e,t){return function(n){return function(r,i){wS(r,i,(function(){return e.get(n)}),t)}}}(vk=dk,mk),lazyInjectNamed:function(e,t){return function(n,r){return function(i,a){wS(i,a,(function(){return e.getNamed(n,r)}),t)}}}(vk,mk),lazyInjectTagged:function(e,t){return function(n,r,i){return function(a,o){wS(a,o,(function(){return e.getTagged(n,r,i)}),t)}}}(vk,mk),lazyMultiInject:function(e,t){return function(n){return function(r,i){wS(r,i,(function(){return e.getAll(n)}),t)}}}(vk,mk)}),wk=0;(yk=gk||(gk={})).normal="normal",yk.additive="additive",yk.subtractive="subtractive",yk.min="min",yk.max="max",yk.none="none",(_k=bk||(bk={})).LINEAR="linear",_k.POWER="power",_k.LOG="log",_k.IDENTITY="identity",_k.TIME="time",_k.QUANTILE="quantile",_k.QUANTIZE="quantize",_k.THRESHOLD="threshold",_k.CAT="cat",(Sk=Ek||(Ek={})).CONSTANT="constant",Sk.VARIABLE="variable",(xk=Tk||(Tk={}))[xk.Attribute=0]="Attribute",xk[xk.InstancedAttribute=1]="InstancedAttribute",xk[xk.Uniform=2]="Uniform";var Ok,Ck,kk=["mapload","mapchange"],Rk=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];function Pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pk(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}(Ck=Ok||(Ok={})).TOPRIGHT="topright",Ck.TOPLEFT="topleft",Ck.BOTTOMRIGHT="bottomright",Ck.BOTTOMLEFT="bottomleft",Ck.TOPCENTER="topcenter",Ck.BOTTOMCENTER="bottomcenter",Ck.LEFTCENTER="leftcenter",Ck.RIGHTCENTER="rightcenter";var Lk=0,Mk=function(e){Xl(n,F_.exports.EventEmitter);var t=Nk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this)),"controlOption",void 0),ll(ql(r),"container",void 0),ll(ql(r),"sceneContainer",void 0),ll(ql(r),"mapsService",void 0),ll(ql(r),"renderService",void 0),ll(ql(r),"layerService",void 0),ll(ql(r),"controlService",void 0),ll(ql(r),"isShow",void 0),r.controlOption=Ik(Ik({},r.getDefault()),e||{}),r}return jl(n,[{key:"getDefault",value:function(){return{position:Ok.TOPRIGHT,name:"".concat(Lk++)}}},{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ok.BOTTOMRIGHT,t=this.controlService;return t&&t.removeControl(this),this.controlOption.position=e,t&&t.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(e){this.mapsService=e.get(OS.IMapService),this.renderService=e.get(OS.IRendererService),this.layerService=e.get(OS.ILayerService),this.controlService=e.get(OS.IControlService),this.sceneContainer=e,this.isShow=!0,this.container=this.onAdd();var t=this.container,n=this.controlOption.position,r=this.controlService.controlCorners[n];return vh(t,"l7-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){vh(this.container,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){mh(this.container,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;dh(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(e){if(this.mapsService&&e&&e.screenX>0&&e.screenY>0){var t=this.mapsService.getContainer();null!==t&&t.focus()}}}]),n}();function Dk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function Fk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}!function(e){Xl(n,Mk);var t=Dk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this,e)),"layerControlInputs",void 0),ll(ql(r),"layers",void 0),ll(ql(r),"lastZIndex",void 0),ll(ql(r),"handlingClick",void 0),ll(ql(r),"layersLink",void 0),ll(ql(r),"baseLayersList",void 0),ll(ql(r),"separator",void 0),ll(ql(r),"overlaysList",void 0),ll(ql(r),"form",void 0),r.layerControlInputs=[],r.layers=[],r.lastZIndex=0,r.handlingClick=!1,r.initLayers(),Dh(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],ql(r)),r}jl(n,[{key:"getDefault",value:function(){return{collapsed:!0,position:Ok.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var e=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach((function(t){t.layer.on("remove",e.onLayerChange),t.layer.on("add",e.onLayerChange)})),this.container}},{key:"addVisualLayer",value:function(e,t){return this.addLayer(e,t,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var e=this.renderService.getViewportSize().height;vh(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var t=e-(this.container.offsetTop+50);return t<this.form.clientHeight?(vh(this.form,"l7-control-layers-scrollbar"),this.form.style.height=t+"px"):mh(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return mh(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var e=this;this.mapsService&&(this.mapsService.off("click",this.collapse),this.layers.forEach((function(t){t.layer.off("remove",e.onLayerChange),t.layer.off("add",e.onLayerChange)})))}},{key:"initLayout",value:function(){var e="l7-control-layers",t=this.container=ph("div",e),n=this.controlOption.collapsed;t.setAttribute("aria-haspopup","true");var r=this.form=ph("form",e+"-list");n&&(this.mapsService.on("click",this.collapse),t.addEventListener("mouseenter",this.expand),t.addEventListener("mouseleave",this.collapse)),this.layersLink=ph("a",e+"-toggle",t),this.layersLink.title="Layers",n||this.expand(),this.baseLayersList=ph("div",e+"-base",r),this.separator=ph("div",e+"-separator",r),this.overlaysList=ph("div",e+"-overlays",r),t.appendChild(r)}},{key:"initLayers",value:function(){var e=this,t=this.controlOption,n=t.baseLayers,r=void 0===n?{}:n,i=t.overlayers,a=void 0===i?{}:i;Object.keys(r).forEach((function(t,n){e.addLayer(r[t],t,!1)})),Object.keys(a).forEach((function(t,n){e.addLayer(a[t],t,!0)}))}},{key:"update",value:function(){if(!this.container)return this;var e,t,n,r;bh(this.baseLayersList),bh(this.overlaysList),this.layerControlInputs=[];var i=0;for(n=0;n<this.layers.length;n++)r=this.layers[n],this.addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.controlOption.hideSingleBase&&(e=e&&i>1,this.baseLayersList.style.display=e?"":"none"),this.separator.style.display=t&&e?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var e,t,n=this.layerControlInputs,r=this.mapsService.getZoom(),i=n.length-1;i>=0;i--)if(e=n[i],(t=this.layerService.getLayer(e.layerId))&&t.inited){var a=t.getMinZoom(),o=t.getMaxZoom();e.disabled=r<a||r>o}}},{key:"addLayer",value:function(e,t,n){this.mapsService&&(e.on("add",this.onLayerChange),e.on("remove",this.onLayerChange)),this.layers.push({layer:e,name:t,overlay:n});var r=this.controlOption,i=r.sortLayers,a=r.sortFunction,o=r.autoZIndex;i&&this.layers.sort((function(e,t){return a(e.layer,t.layer,e.name,t.name)})),o&&e.setZIndex&&(this.lastZIndex++,e.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(e){this.handlingClick||this.update();var t=this.layerService.getLayer(e.target.layerId),n=null!=t&&t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this.emit(n,t)}},{key:"createRadioElement",value:function(e,t){var n='<input type="radio" class="l7-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild}},{key:"addItem",value:function(e){var t,n=document.createElement("label"),r=this.layerService.getLayer(e.layer.id),i=r&&r.inited&&e.layer.isVisible();e.overlay?((t=document.createElement("input")).type="checkbox",t.className="l7-control-layers-selector",t.defaultChecked=i):t=this.createRadioElement("l7-base-layers",i),this.layerControlInputs.push(t),t.layerId=e.layer.id,t.addEventListener("click",this.onInputClick);var a=document.createElement("span");a.innerHTML=" "+e.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(t),o.appendChild(a),(e.overlay?this.overlaysList:this.baseLayersList).appendChild(n),this.checkDisabledLayers(),n}},{key:"onInputClick",value:function(){var e,t,n=this.layerControlInputs,r=[],i=[];this.handlingClick=!0;for(var a=n.length-1;a>=0;a--)e=n[a],t=this.layerService.getLayer(e.layerId),e.checked?r.push(t):e.checked||i.push(t);i.forEach((function(e){e.hide()})),r.forEach((function(e){e.show()})),this.handlingClick=!1}}])}();var Bk=function(e){Xl(n,Mk);var t=Fk(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"getDefault",value:function(){return{position:Ok.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var e=ph("div","l7-control-logo"),t=ph("a","l7-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://antv.alipay.com/l7",t.setAttribute("aria-label","AntV logo"),t.setAttribute("rel","noopener nofollow"),e.appendChild(t),e}},{key:"onRemove",value:function(){return null}}]),n}();function Uk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function jk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function Vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vk(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}!function(e){Xl(n,Mk);var t=Uk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this,e)),"mScale",void 0),ll(ql(r),"iScale",void 0),Dh(["update"],ql(r)),r}jl(n,[{key:"getDefault",value:function(){return{position:Ok.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var e="l7-control-scale",t=ph("div",e);this.addScales(e+"-line",t);var n=this.controlOption.updateWhenIdle;return this.mapsService.on(n?"moveend":"mapmove",this.update),this.mapsService.on(n?"zoomend":"zoomchange",this.update),this.update(),t}},{key:"onRemove",value:function(){var e=this.controlOption.updateWhenIdle;this.mapsService.off(e?"zoomend":"zoomchange",this.update),this.mapsService.off(e?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var e=this.mapsService,t=this.controlOption.maxWidth,n=e.getSize()[1]/2,r=e.containerToLngLat([0,n]),i=e.containerToLngLat([t,n]),a=Nh([r.lng,r.lat],[i.lng,i.lat]);this.updateScales(a)}},{key:"updateScales",value:function(e){var t=this.controlOption,n=t.metric,r=t.imperial;n&&e&&this.updateMetric(e),r&&e&&this.updateImperial(e)}},{key:"updateMetric",value:function(e){var t=this.getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this.updateScale(this.mScale,n,t/e)}},{key:"updateImperial",value:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this.getRoundNum(t),this.updateScale(this.iScale,n+" mi",n/t)):(r=this.getRoundNum(i),this.updateScale(this.iScale,r+" ft",r/i))}},{key:"updateScale",value:function(e,t,n){var r=this.controlOption.maxWidth;e.style.width=Math.round(r*n)+"px",e.innerHTML=t}},{key:"getRoundNum",value:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}},{key:"addScales",value:function(e,t){var n=this.controlOption,r=n.metric,i=n.imperial;r&&(this.mScale=ph("div",e,t)),i&&(this.iScale=ph("div",e,t))}}])}(),function(e){Xl(n,Mk);var t=jk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this,e)),"disabled",void 0),ll(ql(r),"zoomInButton",void 0),ll(ql(r),"zoomOutButton",void 0),Dh(["updateDisabled","zoomIn","zoomOut"],ql(r)),r}jl(n,[{key:"getDefault",value:function(){return{position:Ok.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var e="l7-control-zoom",t=ph("div",e+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,e+"-in",t,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,e+"-out",t,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),t}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(e,t,n,r,i){var a=ph("a",n,r);return a.innerHTML=e,a.title=t,a.href="javascript:void(0)",a.addEventListener("click",i),a}},{key:"updateDisabled",value:function(){var e=this.mapsService,t="l7-disabled";mh(this.zoomInButton,t),mh(this.zoomOutButton,t),(this.disabled||e.getZoom()<=e.getMinZoom())&&vh(this.zoomOutButton,t),(this.disabled||e.getZoom()>=e.getMaxZoom())&&vh(this.zoomInButton,t)}}])}();var zk=function(e){Xl(n,F_.exports.EventEmitter);var t=Gk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this)),"markerOption",void 0),ll(ql(r),"defaultMarker",void 0),ll(ql(r),"popup",void 0),ll(ql(r),"mapsService",void 0),ll(ql(r),"sceneSerive",void 0),ll(ql(r),"lngLat",void 0),ll(ql(r),"scene",void 0),ll(ql(r),"added",!1),ll(ql(r),"eventHandle",(function(e){r.emit(e.type,{target:e,data:r.markerOption.extData,lngLat:r.lngLat})})),r.markerOption=Hk(Hk({},r.getDefault()),e),Dh(["update","onMove","onUp","addDragHandler","onMapClick"],ql(r)),r.init(),r}return jl(n,[{key:"getDefault",value:function(){return{element:void 0,anchor:jh.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(e){this.scene=e,this.mapsService=e.get(OS.IMapService),this.sceneSerive=e.get(OS.ISceneService);var t=this.markerOption,n=t.element;return t.draggable,this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var e=this.markerOption.element;return e&&dh(e),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(e){var t=this;if(!this.added)return this.once("added",(function(){t.setElement(e)})),this;var n=this.markerOption.element;return n&&dh(n),this.markerOption.element=e,this.init(),this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.update(),this}},{key:"openPopup",value:function(){var e=this;if(!this.added)return this.once("added",(function(){e.openPopup()})),this;var t=this.popup;return t?(t.isOpen()||t.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var e=this;this.added||this.once("added",(function(){e.closePopup()}));var t=this.popup;return t&&t.remove(),this}},{key:"setPopup",value:function(e){return this.popup=e,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var e=this.popup;return e?(e.isOpen()?e.remove():e.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(e){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(e){this.markerOption.extData=e}},{key:"update",value:function(){if(this.mapsService){var e=this.markerOption,t=e.element,n=e.anchor;this.updatePosition(),Eh(t,"".concat(mp[n]))}}},{key:"onMapClick",value:function(e){var t=this.markerOption.element;this.popup&&t&&this.togglePopup()}},{key:"updatePosition",value:function(){if(this.mapsService){var e=this.markerOption,t=e.element,n=e.offsets,r=this.lngLat,i=r.lng,a=r.lat,o=this.mapsService.getBounds(),s=this.mapsService.lngLatToContainer([i,a]);if(t){t.style.display="block";var u=this.mapsService.getContainer(),c=0,l=0;if(u&&(c=u.scrollWidth,l=u.scrollHeight),Math.abs(o[0][0])>180||Math.abs(o[1][0])>180){if(s.x>c){var f=this.mapsService.lngLatToContainer([i-360,a]);s.x=f.x}if(s.x<0){var h=this.mapsService.lngLatToContainer([i+360,a]);s.x=h.x}}(s.x>c||s.x<0||s.y>l||s.y<0)&&(t.style.display="none"),t.style.left=s.x+n[0]+"px",t.style.top=s.y-n[1]+"px"}}}},{key:"init",value:function(){var e=this,t=this.markerOption.element,n=this.markerOption,r=n.color,i=n.anchor;if(!t){this.defaultMarker=!0,t=ph("div"),this.markerOption.element=t;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","48px"),a.setAttributeNS(null,"width","48px"),a.setAttributeNS(null,"viewBox","0 0 1024 1024");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),o.setAttributeNS(null,"fill",r),a.appendChild(o),t.appendChild(a)}vh(t,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach((function(n){var r,i,a=(null===(r=e.markerOption)||void 0===r?void 0:r.style)&&(null===(i=e.markerOption)||void 0===i?void 0:i.style[n]);t&&(t.style[n]=a)})),t.addEventListener("click",(function(t){e.onMapClick(t)})),t.addEventListener("click",this.eventHandle),gp(t,i,"marker")}},{key:"registerMarkerEvent",value:function(e){e.addEventListener("mousemove",this.eventHandle),e.addEventListener("click",this.eventHandle),e.addEventListener("mousedown",this.eventHandle),e.addEventListener("mouseup",this.eventHandle),e.addEventListener("dblclick",this.eventHandle),e.addEventListener("contextmenu",this.eventHandle),e.addEventListener("mouseover",this.eventHandle),e.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var e=this.getElement();e.removeEventListener("mousemove",this.eventHandle),e.removeEventListener("click",this.eventHandle),e.removeEventListener("mousedown",this.eventHandle),e.removeEventListener("mouseup",this.eventHandle),e.removeEventListener("dblclick",this.eventHandle),e.removeEventListener("contextmenu",this.eventHandle),e.removeEventListener("mouseover",this.eventHandle),e.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(e){throw new Error("Method not implemented.")}},{key:"onUp",value:function(e){throw new Error("Method not implemented.")}}]),n}();function Xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function Yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yk(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}!function(e){Xl(n,F_.exports.EventEmitter);var t=qk(n);function n(e){var r,i;return Bl(this,n),ll(ql(i=t.call(this)),"markers",[]),ll(ql(i),"markerLayerOption",void 0),ll(ql(i),"clusterIndex",void 0),ll(ql(i),"points",[]),ll(ql(i),"clusterMarkers",[]),ll(ql(i),"mapsService",void 0),ll(ql(i),"scene",void 0),ll(ql(i),"zoom",void 0),ll(ql(i),"bbox",void 0),i.markerLayerOption=ET(i.getDefault(),e),Dh(["update"],ql(i)),i.zoom=(null===(r=i.markerLayerOption.clusterOption)||void 0===r?void 0:r.zoom)||-99,i}jl(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(e){return this.scene=e,this.mapsService=e.get(OS.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(e){this.markerLayerOption.cluster&&this.addPoint(e,this.markers.length),this.markers.push(e)}},{key:"removeMarker",value:function(e){this.markers.indexOf(e);var t=this.markers.indexOf(e);t>-1&&this.markers.splice(t,1)}},{key:"hide",value:function(){this.markers.map((function(e){e.getElement().style.opacity="0"}))}},{key:"show",value:function(){this.markers.map((function(e){e.getElement().style.opacity="1"}))}},{key:"getMarkers",value:function(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var e=this;this.getMarkers().forEach((function(t){t.addTo(e.scene)}))}},{key:"clear",value:function(){this.markers.forEach((function(e){e.remove()})),this.clusterMarkers.forEach((function(e){e.remove()})),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(e,t){var n=e.getLnglat(),r={geometry:{type:"Point",coordinates:[n.lng,n.lat]},properties:Wk(Wk({},e.getExtData()),{},{marker_id:t})};this.points.push(r)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var e=this.markerLayerOption.clusterOption,t=e.radius,n=e.minZoom,r=void 0===n?0:n,i=e.maxZoom;this.clusterIndex=new j_({radius:t,minZoom:r,maxZoom:i}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(e,t){var n=this,r=e[0].concat(e[1]),i=this.clusterIndex.getClusters(r,t);this.clusterMarkers.forEach((function(e){e.remove()})),this.clusterMarkers=[],i.forEach((function(e){var t,r=n.markerLayerOption.clusterOption,i=r.field,a=r.method;if(e.properties&&null!==(t=e.properties)&&void 0!==t&&t.cluster_id){var o,s=n.getLeaves(null===(o=e.properties)||void 0===o?void 0:o.cluster_id);if(e.properties.clusterData=s,i&&a){var u=function(e,t){return bp[e](t)}(a,_p(null==s?void 0:s.map((function(e){return ll({},i,e.properties[i])})),i)),c="point_"+a;e.properties[c]=u.toFixed(2)}}var l=n.clusterMarker(e);n.clusterMarkers.push(l),l.addTo(n.scene)}))}},{key:"getLeaves",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e?this.clusterIndex.getLeaves(e,t,n):null}},{key:"clusterMarker",value:function(e){var t=this.markerLayerOption.clusterOption.element,n=void 0===t?this.generateElement.bind(this):t;return new zk({element:n(e)}).setLnglat({lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]})}},{key:"normalMarker",value:function(e){var t=e.properties.marker_id;return this.markers[t]}},{key:"update",value:function(){var e,t,n=this.mapsService.getZoom(),r=this.mapsService.getBounds();this.bbox&&!(Math.abs(n-this.zoom)>=1)&&(e=this.bbox,t=r,e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1])||(this.bbox=Lh(r,.5),this.zoom=Math.floor(n),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(e){var t=ph("div","l7-marker-cluster"),n=ph("div","",t),r=ph("span","",n),i=this.markerLayerOption.clusterOption,a=i.field,o=i.method;e.properties.point_count=e.properties.point_count||1;var s=a&&o?e.properties["point_"+o]||e.properties[a]:e.properties.point_count;return r.textContent=s,t}}])}(),function(e){Xl(n,F_.exports.EventEmitter);var t=Zk(n);function n(e){var r;return Bl(this,n),ll(ql(r=t.call(this)),"popupOption",void 0),ll(ql(r),"mapsService",void 0),ll(ql(r),"sceneSerive",void 0),ll(ql(r),"lngLat",void 0),ll(ql(r),"content",void 0),ll(ql(r),"closeButton",void 0),ll(ql(r),"timeoutInstance",void 0),ll(ql(r),"container",void 0),ll(ql(r),"tip",void 0),ll(ql(r),"scene",void 0),r.popupOption=Kk(Kk({},r.getdefault()),e),Dh(["update","onClickClose","remove"],ql(r)),r}jl(n,[{key:"addTo",value:function(e){var t=this;return this.mapsService=e.get(OS.IMapService),this.sceneSerive=e.get(OS.ISceneService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=e,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout((function(){t.mapsService.on("click",t.onClickClose)}),30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(e){var t,n=window.document.createDocumentFragment(),r=window.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)}},{key:"setLnglat",value:function(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.mapsService&&(this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(e){return this.setDOMContent(window.document.createTextNode(e))}},{key:"setMaxWidth",value:function(e){return this.popupOption.maxWidth=e,this.update(),this}},{key:"setDOMContent",value:function(e){return this.createContent(),this.content.appendChild(e),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&dh(this.content),this.content=ph("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=ph("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(e,t,n){var r=window.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r}},{key:"removeDom",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:jh.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(e){e.stopPropagation&&e.stopPropagation(),this.remove()}},{key:"update",value:function(){var e=this,t=this.lngLat,n=this.popupOption,r=n.className,i=n.maxWidth,a=n.anchor;if(this.mapsService&&t&&this.content){var o=this.mapsService.getMarkerContainer();if(!this.container&&o)this.container=this.creatDom("div","l7-popup",o),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),r&&r.split(" ").forEach((function(t){return e.container.classList.add(t)})),this.popupOption.stopPropagation&&["mousemove","mousedown","mouseup","click","dblclick"].forEach((function(t){e.container.addEventListener(t,(function(e){e.stopPropagation()}))}));i&&this.container.style.maxWidth!==i&&(this.container.style.maxWidth=i),this.updatePosition(),Eh(this.container,"".concat(mp[a])),gp(this.container,a,"popup")}}},{key:"updatePosition",value:function(){if(this.mapsService){var e=this.lngLat,t=e.lng,n=e.lat,r=this.popupOption.offsets,i=this.mapsService.lngLatToContainer([t,n]);this.container.style.left=i.x+r[0]+"px",this.container.style.top=i.y-r[1]+"px"}}}])}(),function(e,t){var n="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast,r="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o)}}(".l7-marker-container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: absolute;\n}\n\n.l7-marker {\n  position: absolute !important;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n\n.l7-marker-cluster {\n  background-clip: padding-box;\n  border-radius: 20px;\n  background-color: rgba(181, 226, 140, 0.6);\n  width: 40px;\n  height: 40px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-left: 5px;\n  margin-top: 5px;\n  text-align: center;\n  border-radius: 15px;\n  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  background-color: rgba(110, 204, 57, 0.6);\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* layers control */\n\n.l7-control-layers {\n  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);\n          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);\n  background: #fff;\n  border-radius: 5px;\n}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n\n.l7-popup-anchor-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top: none;\n  border-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top: none;\n  border-left: none;\n  border-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top: none;\n  border-right: none;\n  border-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-bottom: none;\n  border-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-bottom: none;\n  border-left: none;\n  border-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-bottom: none;\n  border-right: none;\n  border-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-left: none;\n  border-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right: none;\n  border-left-color: #fff;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  padding: 0;\n  font-size: 25px;\n  line-height: 20px;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n  border-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n  border-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n  border-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n  border-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n  display: none;\n}\n\n.l7-popup-track-pointer * {\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n  display: none;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);\n          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);\n  border-radius: 4px;\n}\n.l7-bar a,\n.l7-bar a:hover {\n  background-color: #fff;\n  width: 30px;\n  height: 30px;\n  font-size: 20px;\n  display: block;\n  text-align: center;\n  text-decoration: none;\n  color: #8e9dab;\n}\n.l7-bar a,\n.l7-control-layers-toggle {\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  display: block;\n}\n.l7-bar a:hover {\n  background-color: #f4f4f4;\n}\n.l7-bar a:first-child {\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px;\n}\n.l7-bar a:last-child {\n  border-bottom-left-radius: 2px;\n  border-bottom-right-radius: 2px;\n  border-bottom: none;\n}\n.l7-bar a.l7-disabled {\n  cursor: default;\n  background-color: #f4f4f4;\n  color: #bbb;\n}\n\n/* control positioning */\n\n.l7-control-container {\n  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n  display: none;\n}\n.l7-control {\n  position: relative;\n  z-index: 800;\n  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\n  pointer-events: auto;\n}\n.l7-control {\n  float: left;\n  clear: both;\n}\n.l7-top,\n.l7-bottom {\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-top {\n  top: 0;\n}\n.l7-right {\n  right: 0;\n}\n.l7-bottom {\n  bottom: 0;\n}\n.l7-left {\n  left: 0;\n}\n.l7-center {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.l7-bottom.l7-center,\n.l7-top.l7-center {\n  width: 100%;\n}\n.l7-right.l7-center,\n.l7-left.l7-center {\n  height: 100%;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n\n.l7-top.l7-center,\n.l7-left.l7-center {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n\n.l7-bottom.l7-center,\n.l7-right.l7-center {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n\n.l7-center .l7-control {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n.l7-control {\n  float: left;\n  clear: both;\n}\n.l7-right .l7-control {\n  float: right;\n}\n.l7-top .l7-control {\n  margin-top: 10px;\n}\n.l7-bottom .l7-control {\n  margin-bottom: 10px;\n}\n.l7-left .l7-control {\n  margin-left: 10px;\n}\n.l7-right .l7-control {\n  margin-right: 10px;\n}\n\n/* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n  background: #fff;\n  background: rgba(255, 255, 255, 0.7);\n  margin: 0;\n}\n.l7-control-attribution,\n.l7-control-scale-line {\n  padding: 0 5px;\n  color: #333;\n}\n.l7-control-attribution a {\n  text-decoration: none;\n}\n.l7-control-attribution a:hover {\n  text-decoration: underline;\n}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n  font-size: 11px;\n  padding: 5px 5px 2px 5px;\n  background: rgba(255, 255, 255, 0.7);\n}\n.l7-left .l7-control-scale {\n  margin-left: 5px;\n}\n.l7-bottom .l7-control-scale {\n  margin-bottom: 5px;\n}\n.l7-control-scale-line {\n  border: 2px solid #000;\n  border-top: none;\n  color: #000;\n  line-height: 1.1;\n  padding: 2px 5px 1px;\n  font-size: 11px;\n  white-space: nowrap;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n\n  background: #fff;\n}\n.l7-control-scale-line:not(:first-child) {\n  border-top: 2px solid #777;\n  border-bottom: none;\n  margin-top: -2px;\n}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n  border-bottom: 2px solid #777;\n}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  background-clip: padding-box;\n}\n/*logo */\n\n.l7-ctrl-logo {\n  background-size: 100% 100%;\n  width: 89px;\n  height: 16px;\n  margin: 0 0 -3px -3px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');\n}\n\n/* layers control */\n\n.l7-control-layers {\n  -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);\n          box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);\n  background: #fff;\n  border-radius: 2px;\n}\n.l7-control-layers-toggle {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');\n  width: 30px;\n  height: 30px;\n  background-size: 20px 20px;\n}\n\n.l7-touch .l7-control-layers-toggle {\n  width: 44px;\n  height: 44px;\n}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n  display: none;\n}\n.l7-control-layers-expanded .l7-control-layers-list {\n  display: block;\n  position: relative;\n}\n.l7-control-layers-expanded {\n  padding: 6px 10px 6px 6px;\n  color: #59626b;\n  background: #fff;\n}\n.l7-control-layers-scrollbar {\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding-right: 5px;\n}\n.l7-control-layers-selector {\n  margin-top: 2px;\n  position: relative;\n  top: 1px;\n}\n.l7-control-layers label {\n  display: block;\n  padding: 8px;\n}\n.l7-control-layers label input[type='radio'],\n.l7-control-layers label input[type='checkbox'] {\n  width: 14px;\n  height: 14px;\n  margin: 0;\n}\n.l7-control-layers-separator {\n  height: 0;\n  border-top: 1px solid #d8d8d8;\n  margin: 5px -10px 5px -6px;\n}\n.mapboxgl-ctrl-logo {\n  display: none !important;\n}\n.amap-logo {\n  display: none !important;\n}\n");var Qk={exports:{}},Jk={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},$k="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",eR={5:$k,"5module":$k+" export import",6:$k+" const class extends export import super"},tR=/^in(stanceof)?$/,nR="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",rR="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿᫀᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",iR=new RegExp("["+nR+"]"),aR=new RegExp("["+nR+rR+"]");nR=rR=null;var oR=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],sR=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function uR(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function cR(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&iR.test(String.fromCharCode(e)):!1!==t&&uR(e,oR)))}function lR(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&aR.test(String.fromCharCode(e)):!1!==t&&(uR(e,oR)||uR(e,sR)))))}var fR=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function hR(e,t){return new fR(e,{beforeExpr:!0,binop:t})}var pR={beforeExpr:!0},dR={startsExpr:!0},vR={};function mR(e,t){return void 0===t&&(t={}),t.keyword=e,vR[e]=new fR(e,t)}var gR={num:new fR("num",dR),regexp:new fR("regexp",dR),string:new fR("string",dR),name:new fR("name",dR),eof:new fR("eof"),bracketL:new fR("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new fR("]"),braceL:new fR("{",{beforeExpr:!0,startsExpr:!0}),braceR:new fR("}"),parenL:new fR("(",{beforeExpr:!0,startsExpr:!0}),parenR:new fR(")"),comma:new fR(",",pR),semi:new fR(";",pR),colon:new fR(":",pR),dot:new fR("."),question:new fR("?",pR),questionDot:new fR("?."),arrow:new fR("=>",pR),template:new fR("template"),invalidTemplate:new fR("invalidTemplate"),ellipsis:new fR("...",pR),backQuote:new fR("`",dR),dollarBraceL:new fR("${",{beforeExpr:!0,startsExpr:!0}),eq:new fR("=",{beforeExpr:!0,isAssign:!0}),assign:new fR("_=",{beforeExpr:!0,isAssign:!0}),incDec:new fR("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new fR("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:hR("||",1),logicalAND:hR("&&",2),bitwiseOR:hR("|",3),bitwiseXOR:hR("^",4),bitwiseAND:hR("&",5),equality:hR("==/!=/===/!==",6),relational:hR("</>/<=/>=",7),bitShift:hR("<</>>/>>>",8),plusMin:new fR("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:hR("%",10),star:hR("*",10),slash:hR("/",10),starstar:new fR("**",{beforeExpr:!0}),coalesce:hR("??",1),_break:mR("break"),_case:mR("case",pR),_catch:mR("catch"),_continue:mR("continue"),_debugger:mR("debugger"),_default:mR("default",pR),_do:mR("do",{isLoop:!0,beforeExpr:!0}),_else:mR("else",pR),_finally:mR("finally"),_for:mR("for",{isLoop:!0}),_function:mR("function",dR),_if:mR("if"),_return:mR("return",pR),_switch:mR("switch"),_throw:mR("throw",pR),_try:mR("try"),_var:mR("var"),_const:mR("const"),_while:mR("while",{isLoop:!0}),_with:mR("with"),_new:mR("new",{beforeExpr:!0,startsExpr:!0}),_this:mR("this",dR),_super:mR("super",dR),_class:mR("class",dR),_extends:mR("extends",pR),_export:mR("export"),_import:mR("import",dR),_null:mR("null",dR),_true:mR("true",dR),_false:mR("false",dR),_in:mR("in",{beforeExpr:!0,binop:7}),_instanceof:mR("instanceof",{beforeExpr:!0,binop:7}),_typeof:mR("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:mR("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:mR("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},yR=/\r\n?|\n|\u2028|\u2029/,bR=new RegExp(yR.source,"g");function _R(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var ER=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,SR=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,TR=Object.prototype,xR=TR.hasOwnProperty,AR=TR.toString;function wR(e,t){return xR.call(e,t)}var OR=Array.isArray||function(e){return"[object Array]"===AR.call(e)};function CR(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var kR=function(e,t){this.line=e,this.column=t};kR.prototype.offset=function(e){return new kR(this.line,this.column+e)};var RR=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function PR(e,t){for(var n=1,r=0;;){bR.lastIndex=r;var i=bR.exec(e);if(!(i&&i.index<t))return new kR(n,t-r);++n,r=i.index+i[0].length}}var IR={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function NR(e){var t={};for(var n in IR)t[n]=e&&wR(e,n)?e[n]:IR[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),OR(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return OR(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(u.loc=new RR(this,o,s)),e.ranges&&(u.range=[i,a]),t.push(u)}}(t,t.onComment)),t}function LR(e,t){return 2|(e?4:0)|(t?8:0)}var MR=function(e,t,n){this.options=e=NR(e),this.sourceFile=e.sourceFile,this.keywords=CR(eR[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";if(!0!==e.allowReserved){for(var i=e.ecmaVersion;!(r=Jk[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=CR(r);var a=(r?r+" ":"")+Jk.strict;this.reservedWordsStrict=CR(a),this.reservedWordsStrictBind=CR(a+" "+Jk.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(yR).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=gR.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},DR={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};MR.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},DR.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},DR.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},DR.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},DR.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},DR.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},DR.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},MR.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},MR.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},MR.parse=function(e,t){return new this(t,e).parse()},MR.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},MR.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(MR.prototype,DR);var FR=MR.prototype,BR=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function UR(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}FR.strictDirective=function(e){for(;;){SR.lastIndex=e,e+=SR.exec(this.input)[0].length;var t=BR.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){SR.lastIndex=e+t[0].length;var n=SR.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||yR.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,SR.lastIndex=e,e+=SR.exec(this.input)[0].length,";"===this.input[e]&&e++}},FR.eat=function(e){return this.type===e&&(this.next(),!0)},FR.isContextual=function(e){return this.type===gR.name&&this.value===e&&!this.containsEsc},FR.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},FR.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},FR.canInsertSemicolon=function(){return this.type===gR.eof||this.type===gR.braceR||yR.test(this.input.slice(this.lastTokEnd,this.start))},FR.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},FR.semicolon=function(){this.eat(gR.semi)||this.insertSemicolon()||this.unexpected()},FR.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},FR.expect=function(e){this.eat(e)||this.unexpected()},FR.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},FR.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},FR.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},FR.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},FR.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var jR=MR.prototype;jR.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==gR.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var VR={kind:"loop"},HR={kind:"switch"};jR.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;SR.lastIndex=this.pos;var t=SR.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(cR(r,!0)){for(var i=n+1;lR(this.input.charCodeAt(i),!0);)++i;var a=this.input.slice(n,i);if(!tR.test(a))return!0}return!1},jR.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;SR.lastIndex=this.pos;var e=SR.exec(this.input),t=this.pos+e[0].length;return!(yR.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&lR(this.input.charAt(t+8)))},jR.parseStatement=function(e,t,n){var r,i=this.type,a=this.startNode();switch(this.isLet(e)&&(i=gR._var,r="let"),i){case gR._break:case gR._continue:return this.parseBreakContinueStatement(a,i.keyword);case gR._debugger:return this.parseDebuggerStatement(a);case gR._do:return this.parseDoStatement(a);case gR._for:return this.parseForStatement(a);case gR._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case gR._class:return e&&this.unexpected(),this.parseClass(a,!0);case gR._if:return this.parseIfStatement(a);case gR._return:return this.parseReturnStatement(a);case gR._switch:return this.parseSwitchStatement(a);case gR._throw:return this.parseThrowStatement(a);case gR._try:return this.parseTryStatement(a);case gR._const:case gR._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case gR._while:return this.parseWhileStatement(a);case gR._with:return this.parseWithStatement(a);case gR.braceL:return this.parseBlock(!0,a);case gR.semi:return this.parseEmptyStatement(a);case gR._export:case gR._import:if(this.options.ecmaVersion>10&&i===gR._import){SR.lastIndex=this.pos;var o=SR.exec(this.input),s=this.pos+o[0].length,u=this.input.charCodeAt(s);if(40===u||46===u)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===gR._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var c=this.value,l=this.parseExpression();return i===gR.name&&"Identifier"===l.type&&this.eat(gR.colon)?this.parseLabeledStatement(a,c,l,e):this.parseExpressionStatement(a,l)}},jR.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(gR.semi)||this.insertSemicolon()?e.label=null:this.type!==gR.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},jR.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},jR.parseDoStatement=function(e){return this.next(),this.labels.push(VR),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(gR._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(gR.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},jR.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(VR),this.enterScope(0),this.expect(gR.parenL),this.type===gR.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===gR._var||this.type===gR._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===gR._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===gR._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var a=new UR,o=this.parseExpression(!0,a);return this.type===gR._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===gR._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(e,o)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))},jR.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,zR|(n?0:XR),!1,t)},jR.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(gR._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},jR.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(gR.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},jR.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(gR.braceL),this.labels.push(HR),this.enterScope(0);for(var n=!1;this.type!==gR.braceR;)if(this.type===gR._case||this.type===gR._default){var r=this.type===gR._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(gR.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},jR.parseThrowStatement=function(e){return this.next(),yR.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var GR=[];jR.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===gR._catch){var t=this.startNode();if(this.next(),this.eat(gR.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(gR.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(gR._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},jR.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},jR.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(VR),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},jR.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},jR.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},jR.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){a[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===gR._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==e.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},jR.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},jR.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(gR.braceL),e&&this.enterScope(0);this.type!==gR.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},jR.parseFor=function(e,t){return e.init=t,this.expect(gR.semi),e.test=this.type===gR.semi?null:this.parseExpression(),this.expect(gR.semi),e.update=this.type===gR.parenR?null:this.parseExpression(),this.expect(gR.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},jR.parseForIn=function(e,t){var n=this.type===gR._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(gR.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},jR.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(gR.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===gR._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===gR._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(gR.comma))break}return e},jR.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var zR=1,XR=2;jR.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===gR.star&&t&XR&&this.unexpected(),e.generator=this.eat(gR.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&zR&&(e.id=4&t&&this.type!==gR.name?null:this.parseIdent(),!e.id||t&XR||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(LR(e.async,e.generator)),t&zR||(e.id=this.type===gR.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&zR?"FunctionDeclaration":"FunctionExpression")},jR.parseFunctionParams=function(e){this.expect(gR.parenL),e.params=this.parseBindingList(gR.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},jR.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(gR.braceL);this.type!==gR.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},jR.parseClassElement=function(e){var t=this;if(this.eat(gR.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,a=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===gR.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,a),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(gR.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(gR.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=e),this.parseClassMethod(n,i,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},jR.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},jR.parseClassId=function(e,t){this.type===gR.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},jR.parseClassSuper=function(e){e.superClass=this.eat(gR._extends)?this.parseExprSubscripts():null},jR.parseExport=function(e,t){if(this.next(),this.eat(gR.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==gR.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(gR._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===gR._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|zR,!1,n)}else if(this.type===gR._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==gR.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,o=e.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},jR.checkExport=function(e,t,n){e&&(wR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},jR.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if("ArrayPattern"===n)for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(e,u)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},jR.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},jR.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},jR.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(gR.braceL);!this.eat(gR.braceR);){if(n)n=!1;else if(this.expect(gR.comma),this.afterTrailingComma(gR.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},jR.parseImport=function(e){return this.next(),this.type===gR.string?(e.specifiers=GR,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===gR.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},jR.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===gR.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(gR.comma))return e}if(this.type===gR.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(gR.braceL);!this.eat(gR.braceR);){if(t)t=!1;else if(this.expect(gR.comma),this.afterTrailingComma(gR.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},jR.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},jR.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var WR=MR.prototype;WR.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},WR.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},WR.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},WR.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==gR.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},WR.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case gR.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(gR.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case gR.braceL:return this.parseObj(!0)}return this.parseIdent()},WR.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(gR.comma),t&&this.type===gR.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===gR.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===gR.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},WR.parseBindingListItem=function(e){return e},WR.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(gR.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},WR.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(wR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var qR=MR.prototype;qR.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var o=t[r="$"+r];if(o)("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property");else o=t[r]={init:!1,get:!1,set:!1};o[a]=!0}}},qR.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===gR.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(gR.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i},qR.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new UR,r=!0);var o=this.start,s=this.startLoc;this.type!==gR.parenL&&this.type!==gR.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var c=this.startNodeAt(o,s);return c.operator=this.value,c.left=this.type===gR.eq?this.toAssignable(u,!1,t):u,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.left.start&&(t.shorthandAssign=-1),this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),u},qR.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(gR.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(gR.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i},qR.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},qR.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==gR._in)&&a>r){var o=this.type===gR.logicalOR||this.type===gR.logicalAND,s=this.type===gR.coalesce;s&&(a=gR.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,a,i),h=this.buildBinary(t,n,e,f,u,o||s);return(o&&this.type===gR.coalesce||s&&(this.type===gR.logicalOR||this.type===gR.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(h,t,n,r,i)}return e},qR.buildBinary=function(e,t,n,r,i,a){var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},qR.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===gR.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(gR.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},qR.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},qR.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,r,i,a);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){var s=this.startNodeAt(t,n);s.expression=o,o=this.finishNode(s,"ChainExpression")}return o}e=o}},qR.parseSubscript=function(e,t,n,r,i,a){var o=this.options.ecmaVersion>=11,s=o&&this.eat(gR.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(gR.bracketL);if(u||s&&this.type!==gR.parenL&&this.type!==gR.backQuote||this.eat(gR.dot)){var c=this.startNodeAt(t,n);c.object=e,c.property=u?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,u&&this.expect(gR.bracketR),o&&(c.optional=s),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(gR.parenL)){var l=new UR,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var d=this.parseExprList(gR.parenR,this.options.ecmaVersion>=8,!1,l);if(i&&!s&&!this.canInsertSemicolon()&&this.eat(gR.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),d,!0);this.checkExpressionErrors(l,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var v=this.startNodeAt(t,n);v.callee=e,v.arguments=d,o&&(v.optional=s),e=this.finishNode(v,"CallExpression")}else if(this.type===gR.backQuote){(s||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(t,n);m.tag=e,m.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(m,"TaggedTemplateExpression")}return e},qR.parseExprAtom=function(e){this.type===gR.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case gR._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==gR.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==gR.dot&&this.type!==gR.bracketL&&this.type!==gR.parenL&&this.unexpected(),this.finishNode(t,"Super");case gR._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case gR.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(gR._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(gR.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===gR.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(gR.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case gR.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case gR.num:case gR.string:return this.parseLiteral(this.value);case gR._null:case gR._true:case gR._false:return(t=this.startNode()).value=this.type===gR._null?null:this.type===gR._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case gR.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case gR.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(gR.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case gR.braceL:return this.parseObj(!1,e);case gR._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case gR._class:return this.parseClass(this.startNode(),!1);case gR._new:return this.parseNew();case gR.backQuote:return this.parseTemplate();case gR._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},qR.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case gR.parenL:return this.parseDynamicImport(e);case gR.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},qR.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(gR.parenR)){var t=this.start;this.eat(gR.comma)&&this.eat(gR.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},qR.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},qR.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},qR.parseParenExpression=function(){this.expect(gR.parenL);var e=this.parseExpression();return this.expect(gR.parenR),e},qR.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],c=!0,l=!1,f=new UR,h=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==gR.parenR;){if(c?c=!1:this.expect(gR.comma),i&&this.afterTrailingComma(gR.parenR,!0)){l=!0;break}if(this.type===gR.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===gR.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var d=this.start,v=this.startLoc;if(this.expect(gR.parenR),e&&!this.canInsertSemicolon()&&this.eat(gR.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=p,this.parseParenArrowList(n,r,u);u.length&&!l||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(f,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?((t=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(t,"SequenceExpression",d,v)):t=u[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},qR.parseParenItem=function(e){return e},qR.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var YR=[];qR.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(gR.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===gR._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(gR.parenL)?e.arguments=this.parseExprList(gR.parenR,this.options.ecmaVersion>=8,!1):e.arguments=YR,this.finishNode(e,"NewExpression")},qR.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===gR.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===gR.backQuote,this.finishNode(n,"TemplateElement")},qR.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===gR.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(gR.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(gR.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},qR.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===gR.name||this.type===gR.num||this.type===gR.string||this.type===gR.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===gR.star)&&!yR.test(this.input.slice(this.lastTokEnd,this.start))},qR.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(gR.braceR);){if(r)r=!1;else if(this.expect(gR.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(gR.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},qR.parseProperty=function(e,t){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(gR.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===gR.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===gR.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,t),this.type===gR.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(n=this.eat(gR.star)));var s=this.containsEsc;return this.parsePropertyName(o),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(gR.star),this.parsePropertyName(o,t)):r=!1,this.parsePropertyValue(o,e,n,r,i,a,t,s),this.finishNode(o,"Property")},qR.parsePropertyValue=function(e,t,n,r,i,a,o,s){if((n||r)&&this.type===gR.colon&&this.unexpected(),this.eat(gR.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===gR.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===gR.comma||this.type===gR.braceR||this.type===gR.eq)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,e.key):this.type===gR.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},qR.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(gR.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(gR.bracketR),e.key;e.computed=!1}return e.key=this.type===gR.num||this.type===gR.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},qR.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},qR.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|LR(t,r.generator)|(n?128:0)),this.expect(gR.parenL),r.params=this.parseBindingList(gR.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},qR.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|LR(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},qR.parseFunctionBody=function(e,t,n){var r=t&&this.type!==gR.braceL,i=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!i&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,5),e.body=this.parseBlock(!1,void 0,a&&!i),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope()},qR.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},qR.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,1,t?null:n)}},qR.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(gR.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===gR.comma?o=null:this.type===gR.ellipsis?(o=this.parseSpread(r),r&&this.type===gR.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},qR.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},qR.parseIdent=function(e,t){var n=this.startNode();return this.type===gR.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},qR.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===gR.semi||this.canInsertSemicolon()||this.type!==gR.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(gR.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},qR.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var KR=MR.prototype;KR.raise=function(e,t){var n=PR(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},KR.raiseRecoverable=KR.raise,KR.curPosition=function(){if(this.options.locations)return new kR(this.curLine,this.pos-this.lineStart)};var ZR=MR.prototype,QR=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};ZR.enterScope=function(e){this.scopeStack.push(new QR(e))},ZR.exitScope=function(){this.scopeStack.pop()},ZR.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},ZR.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(e)>-1&&!(32&s.flags&&s.lexical[0]===e)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(e)>-1){r=!0;break}if(s.var.push(e),this.inModule&&1&s.flags&&delete this.undefinedExports[e],3&s.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ZR.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ZR.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ZR.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},ZR.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var JR=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new RR(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},$R=MR.prototype;function eP(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}$R.startNode=function(){return new JR(this,this.start,this.startLoc)},$R.startNodeAt=function(e,t){return new JR(this,e,t)},$R.finishNode=function(e,t){return eP.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},$R.finishNodeAt=function(e,t,n,r){return eP.call(this,e,t,n,r)};var tP=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},nP={b_stat:new tP("{",!1),b_expr:new tP("{",!0),b_tmpl:new tP("${",!1),p_stat:new tP("(",!1),p_expr:new tP("(",!0),q_tmpl:new tP("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new tP("function",!1),f_expr:new tP("function",!0),f_expr_gen:new tP("function",!0,!1,null,!0),f_gen:new tP("function",!1,!1,null,!0)},rP=MR.prototype;rP.initialContext=function(){return[nP.b_stat]},rP.braceIsBlock=function(e){var t=this.curContext();return t===nP.f_expr||t===nP.f_stat||(e!==gR.colon||t!==nP.b_stat&&t!==nP.b_expr?e===gR._return||e===gR.name&&this.exprAllowed?yR.test(this.input.slice(this.lastTokEnd,this.start)):e===gR._else||e===gR.semi||e===gR.eof||e===gR.parenR||e===gR.arrow||(e===gR.braceL?t===nP.b_stat:e!==gR._var&&e!==gR._const&&e!==gR.name&&!this.exprAllowed):!t.isExpr)},rP.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},rP.updateContext=function(e){var t,n=this.type;n.keyword&&e===gR.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},gR.parenR.updateContext=gR.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===nP.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},gR.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?nP.b_stat:nP.b_expr),this.exprAllowed=!0},gR.dollarBraceL.updateContext=function(){this.context.push(nP.b_tmpl),this.exprAllowed=!0},gR.parenL.updateContext=function(e){var t=e===gR._if||e===gR._for||e===gR._with||e===gR._while;this.context.push(t?nP.p_stat:nP.p_expr),this.exprAllowed=!0},gR.incDec.updateContext=function(){},gR._function.updateContext=gR._class.updateContext=function(e){!e.beforeExpr||e===gR.semi||e===gR._else||e===gR._return&&yR.test(this.input.slice(this.lastTokEnd,this.start))||(e===gR.colon||e===gR.braceL)&&this.curContext()===nP.b_stat?this.context.push(nP.f_stat):this.context.push(nP.f_expr),this.exprAllowed=!1},gR.backQuote.updateContext=function(){this.curContext()===nP.q_tmpl?this.context.pop():this.context.push(nP.q_tmpl),this.exprAllowed=!1},gR.star.updateContext=function(e){if(e===gR._function){var t=this.context.length-1;this.context[t]===nP.f_expr?this.context[t]=nP.f_expr_gen:this.context[t]=nP.f_gen}this.exprAllowed=!0},gR.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==gR.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var iP="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",aP=iP+" Extended_Pictographic",oP={9:iP,10:aP,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},sP="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",uP="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",cP=uP+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",lP={9:uP,10:cP,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},fP={};function hP(e){var t=fP[e]={binary:CR(oP[e]+" "+sP),nonBinary:{General_Category:CR(sP),Script:CR(lP[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}hP(9),hP(10),hP(11);var pP=MR.prototype,dP=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=fP[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function vP(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function mP(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function gP(e){return e>=65&&e<=90||e>=97&&e<=122}function yP(e){return gP(e)||95===e}function bP(e){return yP(e)||_P(e)}function _P(e){return e>=48&&e<=57}function EP(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function SP(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function TP(e){return e>=48&&e<=55}dP.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},dP.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},dP.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(i<<10)+a-56613888:i},dP.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,a=n.charCodeAt(e);return!t&&!this.switchU||a<=55295||a>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},dP.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},dP.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},dP.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},dP.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},pP.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},pP.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},pP.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},pP.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pP.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pP.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},pP.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},pP.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},pP.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},pP.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},pP.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pP.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},pP.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},pP.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pP.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pP.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pP.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!mP(t)&&(e.lastIntValue=t,e.advance(),!0)},pP.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!mP(n);)e.advance();return e.pos!==t},pP.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},pP.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},pP.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pP.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=vP(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=vP(e.lastIntValue);return!0}return!1},pP.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return cR(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},pP.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return lR(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},pP.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pP.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},pP.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pP.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pP.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},pP.regexp_eatZero=function(e){return 48===e.current()&&!_P(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},pP.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},pP.regexp_eatControlLetter=function(e){var t=e.current();return!!gP(t)&&(e.lastIntValue=t%32,e.advance(),!0)},pP.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n,r=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(i&&a>=55296&&a<=56319){var o=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(a-55296)+(s-56320)+65536,!0}e.pos=o,e.lastIntValue=a}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((n=e.lastIntValue)>=0&&n<=1114111))return!0;i&&e.raise("Invalid unicode escape"),e.pos=r}return!1},pP.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},pP.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},pP.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},pP.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},pP.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){wR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},pP.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},pP.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";yP(t=e.current());)e.lastStringValue+=vP(t),e.advance();return""!==e.lastStringValue},pP.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";bP(t=e.current());)e.lastStringValue+=vP(t),e.advance();return""!==e.lastStringValue},pP.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pP.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},pP.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},pP.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||TP(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},pP.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pP.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!_P(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},pP.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},pP.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;_P(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},pP.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;EP(n=e.current());)e.lastIntValue=16*e.lastIntValue+SP(n),e.advance();return e.pos!==t},pP.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},pP.regexp_eatOctalDigit=function(e){var t=e.current();return TP(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},pP.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!EP(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+SP(i),e.advance()}return!0};var xP=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new RR(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},AP=MR.prototype;function wP(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}function OP(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}AP.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new xP(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},AP.getToken=function(){return this.next(),new xP(this)},"undefined"!=typeof Symbol&&(AP[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===gR.eof,value:t}}}}),AP.curContext=function(){return this.context[this.context.length-1]},AP.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(gR.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},AP.readToken=function(e){return cR(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},AP.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},AP.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(bR.lastIndex=n;(e=bR.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},AP.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!_R(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},AP.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&ER.test(String.fromCharCode(e))))break e;++this.pos}}},AP.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},AP.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(gR.ellipsis)):(++this.pos,this.finishToken(gR.dot))},AP.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(gR.assign,2):this.finishOp(gR.slash,1)},AP.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?gR.star:gR.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=gR.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(gR.assign,n+1):this.finishOp(r,n)},AP.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(gR.assign,3);return this.finishOp(124===e?gR.logicalOR:gR.logicalAND,2)}return 61===t?this.finishOp(gR.assign,2):this.finishOp(124===e?gR.bitwiseOR:gR.bitwiseAND,1)},AP.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(gR.assign,2):this.finishOp(gR.bitwiseXOR,1)},AP.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!yR.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(gR.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(gR.assign,2):this.finishOp(gR.plusMin,1)},AP.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(gR.assign,n+1):this.finishOp(gR.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(gR.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},AP.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(gR.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(gR.arrow)):this.finishOp(61===e?gR.eq:gR.prefix,1)},AP.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(gR.questionDot,2)}if(63===t){if(e>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(gR.assign,3);return this.finishOp(gR.coalesce,2)}}return this.finishOp(gR.question,1)},AP.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(gR.parenL);case 41:return++this.pos,this.finishToken(gR.parenR);case 59:return++this.pos,this.finishToken(gR.semi);case 44:return++this.pos,this.finishToken(gR.comma);case 91:return++this.pos,this.finishToken(gR.bracketL);case 93:return++this.pos,this.finishToken(gR.bracketR);case 123:return++this.pos,this.finishToken(gR.braceL);case 125:return++this.pos,this.finishToken(gR.braceR);case 58:return++this.pos,this.finishToken(gR.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(gR.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(gR.prefix,1)}this.raise(this.pos,"Unexpected character '"+OP(e)+"'")},AP.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},AP.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(yR.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new dP(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(c){}return this.finishToken(gR.regexp,{pattern:i,flags:o,value:u})},AP.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),a=this.pos,o=0,s=0,u=0,c=null==t?1/0:t;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),f=void 0;if(r&&95===l)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=l;else{if((f=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=e)break;s=l,o=o*e+f}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||null!=t&&this.pos-a!==t?null:o},AP.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=wP(this.input.slice(t,this.pos)),++this.pos):cR(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(gR.num,n)},AP.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=wP(this.input.slice(t,this.pos));return++this.pos,cR(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(gR.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),cR(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a,o=(a=this.input.slice(t,this.pos),n?parseInt(a,8):parseFloat(a.replace(/_/g,"")));return this.finishToken(gR.num,o)},AP.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},AP.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(_R(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(gR.string,t)};var CP={};AP.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==CP)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},AP.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw CP;this.raise(e,t)},AP.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==gR.template&&this.type!==gR.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(gR.template,e)):36===n?(this.pos+=2,this.finishToken(gR.dollarBraceL)):(++this.pos,this.finishToken(gR.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(_R(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},AP.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(gR.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},AP.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return OP(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return _R(t)?"":String.fromCharCode(t)}},AP.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},AP.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(lR(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?cR:lR)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=OP(o),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},AP.readWord=function(){var e=this.readWord1(),t=gR.name;return this.keywords.test(e)&&(t=vR[e]),this.finishToken(t,e)};function kP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function RP(e){var t="function"==typeof Map?new Map:void 0;return(RP=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return IP(e,arguments,LP(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),NP(r,e)})(e)}function PP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function IP(e,t,n){return(IP=PP()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&NP(i,n.prototype),i}).apply(null,arguments)}function NP(e,t){return(NP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LP(e){return(LP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}MR.acorn={Parser:MR,version:"7.4.1",defaultOptions:IR,Position:kR,SourceLocation:RR,getLineInfo:PR,Node:JR,TokenType:fR,tokTypes:gR,keywordTypes:vR,TokContext:tP,tokContexts:nP,isIdentifierChar:lR,isIdentifierStart:cR,Token:xP,isNewLine:_R,lineBreak:yR,lineBreakG:bR,nonASCIIwhitespace:ER};var MP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(RP(Error)),DP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(RP(SyntaxError)),FP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(RP(ReferenceError)),BP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(RP(TypeError)),UP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(MP),jP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(DP),VP=function(e){function t(){return e.apply(this,arguments)||this}return kP(t,e),t}(FP),HP={UnknownError:[3001,"%0",UP],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",UP],NodeTypeSyntaxError:[1001,"Unknown node type: %0",VP],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",VP],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",VP],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",VP],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",VP],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",VP],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",VP],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",VP],ParamTypeSyntaxError:[1009,"Unknown param type: %0",VP],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",VP],FunctionUndefinedReferenceError:[2001,"%0 is not a function",FP],VariableUndefinedReferenceError:[2002,"%0 is not defined",FP],IsNotConstructor:[2003,"%0 is not a constructor",BP]};function GP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function zP(e,t,n){return(zP=GP()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&XP(i,n.prototype),i}).apply(null,arguments)}function XP(e,t){return(XP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WP(e,t){Object.defineProperty(e,"name",{value:t,writable:!1,enumerable:!1,configurable:!0})}var qP=Object.prototype.hasOwnProperty,YP=Symbol("Break"),KP=Symbol("Continue"),ZP=Symbol("DefaultCase"),QP=Symbol("EmptyStatementReturn"),JP=Symbol("WithScopeName"),$P=Symbol("SuperScopeName"),eI=Symbol("RootScopeName"),tI=Symbol("GlobalScopeName");function nI(e){return"function"==typeof e}var rI=function(){function e(e){this.interpreter=e}return e.prototype.generator=function(){var e=this.interpreter;return{getOptions:e.getOptions.bind(e),getCurrentScope:function(){return this.getCurrentScope()}.bind(e),getGlobalScope:function(){return this.getGlobalScope()}.bind(e),getCurrentContext:function(){return this.getCurrentContext()}.bind(e),getExecStartTime:e.getExecStartTime.bind(e)}},e}();function iI(e,t,n){if(void 0===n&&(n=!0),!(e instanceof rI))throw new Error("Illegal call");if("string"!=typeof t)return t;if(t){var r=e.generator(),i={timeout:r.getOptions().timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},a=n?r.getGlobalScope():r.getCurrentScope();return new pI(a,i).evaluate(t)}}function aI(e){if(!(e instanceof rI))throw new Error("Illegal call");for(var t=e.generator(),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=r.pop(),o=new pI(t.getGlobalScope(),t.getOptions()),s="\n\t\t    (function anonymous("+r.join(",")+"){\n\t\t        "+a+"\n\t\t    });\n\t\t    ";return o.evaluate(s)}Object.defineProperty(iI,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(aI,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var oI=function(e){this.value=e},sI=function(e){this.value=e},uI=function(e){this.value=e},cI=function(e,t,n){void 0===t&&(t=null),this.name=n,this.parent=t,this.data=e,this.labelStack=[]};function lI(){}function fI(e,t){return void 0===e&&(e=null),new cI(Object.create(null),e,t)}var hI={NaN:NaN,Infinity:1/0,undefined:void 0,Object:Object,Array:Array,String:String,Boolean:Boolean,Number:Number,Date:Date,RegExp:RegExp,Error:Error,URIError:URIError,TypeError:TypeError,RangeError:RangeError,SyntaxError:SyntaxError,ReferenceError:ReferenceError,Float32Array:Float32Array,Float64Array:Float64Array,Uint32Array:Uint32Array,Math:Math,parseInt:parseInt,parseFloat:parseFloat,isNaN:isNaN,isFinite:isFinite,decodeURI:decodeURI,decodeURIComponent:decodeURIComponent,encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escape:escape,unescape:unescape,eval:iI,Function:aI};"undefined"!=typeof JSON&&(hI.JSON=JSON),"undefined"!=typeof Promise&&(hI.Promise=Promise),"undefined"!=typeof Set&&(hI.Set=Set),"undefined"!=typeof Map&&(hI.Map=Map),"undefined"!=typeof Symbol&&(hI.Symbol=Symbol),"undefined"!=typeof Proxy&&(hI.Proxy=Proxy),"undefined"!=typeof WeakMap&&(hI.WeakMap=WeakMap),"undefined"!=typeof WeakSet&&(hI.WeakSet=WeakSet),"undefined"!=typeof Reflect&&(hI.Reflect=Reflect);var pI=function(){function e(t,n){void 0===t&&(t=e.global),void 0===n&&(n={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:n.ecmaVersion||e.ecmaVersion,timeout:n.timeout||0,rootContext:n.rootContext,globalContextInFunction:void 0===n.globalContextInFunction?e.globalContextInFunction:n.globalContextInFunction,_initEnv:n._initEnv},this.context=t||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var t=e.prototype;return t.initEnvironment=function(e){var t,n;if(e instanceof cI)t=e;else{var r=null,i=this.createSuperScope(e);this.options.rootContext&&(r=new cI((n=this.options.rootContext,Object.create(n)),i,eI)),t=new cI(e,r||i,tI)}this.globalScope=t,this.currentScope=this.globalScope,this.globalContext=t.data,this.currentContext=t.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var a=this.options._initEnv;a&&a.call(this)},t.getExecStartTime=function(){return this.execStartTime},t.getExecutionTime=function(){return this.execEndTime-this.execStartTime},t.setExecTimeout=function(e){void 0===e&&(e=0),this.options.timeout=e},t.getOptions=function(){return this.options},t.getGlobalScope=function(){return this.globalScope},t.getCurrentScope=function(){return this.currentScope},t.getCurrentContext=function(){return this.currentContext},t.isInterruptThrow=function(e){return e instanceof UP||e instanceof VP||e instanceof jP},t.createSuperScope=function(e){var t=Object.assign({},hI);return Object.keys(t).forEach((function(n){n in e&&delete t[n]})),new cI(t,null,$P)},t.setCurrentContext=function(e){this.currentContext=e},t.setCurrentScope=function(e){this.currentScope=e},t.evaluate=function(t){var n,r,i;if(void 0===t&&(t=""),t)return r=t,i={ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||e.ecmaVersion},n=MR.parse(r,i),this.evaluateNode(n,t)},t.appendCode=function(e){return this.evaluate(e)},t.evaluateNode=function(e,t){var n=this;void 0===t&&(t=""),this.value=void 0,this.source=t,this.sourceList.push(t),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var r=this.getCurrentScope(),i=this.getCurrentContext(),a=r.labelStack.concat([]),o=this.callStack.concat([]);try{var s=this.createClosure(e);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),s()}catch(u){throw u}finally{n.setCurrentScope(r),n.setCurrentContext(i),r.labelStack=a,n.callStack=o,this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},t.createErrorMessage=function(e,t,n){var r=e[1].replace("%0",String(t));return null!==n&&(r+=this.getNodePosition(n||this.lastExecNode)),r},t.createError=function(e,t){return new t(e)},t.createThrowError=function(e,t){return this.createError(e,t)},t.createInternalThrowError=function(e,t,n){return this.createError(this.createErrorMessage(e,t,n),e[2])},t.checkTimeout=function(){if(!this.isRunning)return!1;var e=this.options.timeout||0;return Date.now()-this.execStartTime>e},t.getNodePosition=function(e){if(e){return e.loc?" ["+e.loc.start.line+":"+e.loc.start.column+"]":""}return""},t.createClosure=function(e){var t,n=this;switch(e.type){case"BinaryExpression":t=this.binaryExpressionHandler(e);break;case"LogicalExpression":t=this.logicalExpressionHandler(e);break;case"UnaryExpression":t=this.unaryExpressionHandler(e);break;case"UpdateExpression":t=this.updateExpressionHandler(e);break;case"ObjectExpression":t=this.objectExpressionHandler(e);break;case"ArrayExpression":t=this.arrayExpressionHandler(e);break;case"CallExpression":t=this.callExpressionHandler(e);break;case"NewExpression":t=this.newExpressionHandler(e);break;case"MemberExpression":t=this.memberExpressionHandler(e);break;case"ThisExpression":t=this.thisExpressionHandler(e);break;case"SequenceExpression":t=this.sequenceExpressionHandler(e);break;case"Literal":t=this.literalHandler(e);break;case"Identifier":t=this.identifierHandler(e);break;case"AssignmentExpression":t=this.assignmentExpressionHandler(e);break;case"FunctionDeclaration":t=this.functionDeclarationHandler(e);break;case"VariableDeclaration":t=this.variableDeclarationHandler(e);break;case"BlockStatement":case"Program":t=this.programHandler(e);break;case"ExpressionStatement":t=this.expressionStatementHandler(e);break;case"EmptyStatement":t=this.emptyStatementHandler(e);break;case"ReturnStatement":t=this.returnStatementHandler(e);break;case"FunctionExpression":t=this.functionExpressionHandler(e);break;case"IfStatement":t=this.ifStatementHandler(e);break;case"ConditionalExpression":t=this.conditionalExpressionHandler(e);break;case"ForStatement":t=this.forStatementHandler(e);break;case"WhileStatement":t=this.whileStatementHandler(e);break;case"DoWhileStatement":t=this.doWhileStatementHandler(e);break;case"ForInStatement":t=this.forInStatementHandler(e);break;case"WithStatement":t=this.withStatementHandler(e);break;case"ThrowStatement":t=this.throwStatementHandler(e);break;case"TryStatement":t=this.tryStatementHandler(e);break;case"ContinueStatement":t=this.continueStatementHandler(e);break;case"BreakStatement":t=this.breakStatementHandler(e);break;case"SwitchStatement":t=this.switchStatementHandler(e);break;case"LabeledStatement":t=this.labeledStatementHandler(e);break;case"DebuggerStatement":t=this.debuggerStatementHandler(e);break;default:throw this.createInternalThrowError(HP.NodeTypeSyntaxError,e.type,e)}return function(){var r=n.options.timeout;if(r&&r>0&&n.checkTimeout())throw n.createInternalThrowError(HP.ExecutionTimeOutError,r,null);return n.lastExecNode=e,t.apply(void 0,arguments)}},t.binaryExpressionHandler=function(e){var t=this,n=this.createClosure(e.left),r=this.createClosure(e.right);return function(){var i=n(),a=r();switch(e.operator){case"==":return i==a;case"!=":return i!=a;case"===":return i===a;case"!==":return i!==a;case"<":return i<a;case"<=":return i<=a;case">":return i>a;case">=":return i>=a;case"<<":return i<<a;case">>":return i>>a;case">>>":return i>>>a;case"+":return i+a;case"-":return i-a;case"*":return i*a;case"**":return Math.pow(i,a);case"/":return i/a;case"%":return i%a;case"|":return i|a;case"^":return i^a;case"&":return i&a;case"in":return i in a;case"instanceof":return i instanceof a;default:throw t.createInternalThrowError(HP.BinaryOperatorSyntaxError,e.operator,e)}}},t.logicalExpressionHandler=function(e){var t=this,n=this.createClosure(e.left),r=this.createClosure(e.right);return function(){switch(e.operator){case"||":return n()||r();case"&&":return n()&&r();default:throw t.createInternalThrowError(HP.LogicalOperatorSyntaxError,e.operator,e)}}},t.unaryExpressionHandler=function(e){var t=this;switch(e.operator){case"delete":var n=this.createObjectGetter(e.argument),r=this.createNameGetter(e.argument);return function(){return delete n()[r()]};default:var i;if("typeof"===e.operator&&"Identifier"===e.argument.type){var a=this.createObjectGetter(e.argument),o=this.createNameGetter(e.argument);i=function(){return a()[o()]}}else i=this.createClosure(e.argument);return function(){var n=i();switch(e.operator){case"-":return-n;case"+":return+n;case"!":return!n;case"~":return~n;case"void":return;case"typeof":return typeof n;default:throw t.createInternalThrowError(HP.UnaryOperatorSyntaxError,e.operator,e)}}}},t.updateExpressionHandler=function(e){var t=this,n=this.createObjectGetter(e.argument),r=this.createNameGetter(e.argument);return function(){var i=n(),a=r();switch(t.assertVariable(i,a,e),e.operator){case"++":return e.prefix?++i[a]:i[a]++;case"--":return e.prefix?--i[a]:i[a]--;default:throw t.createInternalThrowError(HP.UpdateOperatorSyntaxError,e.operator,e)}}},t.objectExpressionHandler=function(e){var t=this,n=[];var r=Object.create(null);return e.properties.forEach((function(e){var i=e.kind,a=function(e){return"Identifier"===e.type?e.name:"Literal"===e.type?e.value:this.throwError(HP.ObjectStructureSyntaxError,e.type,e)}(e.key);r[a]&&"init"!==i||(r[a]={}),r[a][i]=t.createClosure(e.value),n.push({key:a,property:e})})),function(){for(var e={},t=n.length,i=0;i<t;i++){var a=n[i],o=a.key,s=r[o],u=s.init?s.init():void 0,c=s.get?s.get():function(){},l=s.set?s.set():function(e){};if("set"in s||"get"in s){var f={configurable:!0,enumerable:!0,get:c,set:l};Object.defineProperty(e,o,f)}else{var h=a.property,p=h.kind;"Identifier"!==h.key.type||"FunctionExpression"!==h.value.type||"init"!==p||h.value.id||WP(u,h.key.name),e[o]=u}}return e}},t.arrayExpressionHandler=function(e){var t=this,n=e.elements.map((function(e){return e?t.createClosure(e):e}));return function(){for(var e=n.length,t=Array(e),r=0;r<e;r++){var i=n[r];i&&(t[r]=i())}return t}},t.safeObjectGet=function(e,t,n){return e[t]},t.createCallFunctionGetter=function(e){var t=this;switch(e.type){case"MemberExpression":var n=this.createClosure(e.object),r=this.createMemberKeyGetter(e),i=this.source;return function(){var a=n(),o=r(),s=t.safeObjectGet(a,o,e);if(!s||!nI(s)){var u=i.slice(e.start,e.end);throw t.createInternalThrowError(HP.FunctionUndefinedReferenceError,u,e)}return s.__IS_EVAL_FUNC?function(e){return s(new rI(t),e,!0)}:s.__IS_FUNCTION_FUNC?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.apply(void 0,[new rI(t)].concat(n))}:s.bind(a)};default:var a=this.createClosure(e);return function(){var n="";"Identifier"===e.type&&(n=e.name);var r=a();if(!r||!nI(r))throw t.createInternalThrowError(HP.FunctionUndefinedReferenceError,n,e);if("Identifier"===e.type&&r.__IS_EVAL_FUNC&&"eval"===n)return function(e){var i=t.getScopeFromName(n,t.getCurrentScope()),a=i.name===$P||i.name===tI||i.name===eI;return r(new rI(t),e,!a)};if(r.__IS_EVAL_FUNC)return function(e){return r(new rI(t),e,!0)};if(r.__IS_FUNCTION_FUNC)return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r.apply(void 0,[new rI(t)].concat(n))};var i=t.options.globalContextInFunction;if("Identifier"===e.type){var o=t.getIdentifierScope(e);o.name===JP&&(i=o.data)}return r.bind(i)}}},t.callExpressionHandler=function(e){var t=this,n=this.createCallFunctionGetter(e.callee),r=e.arguments.map((function(e){return t.createClosure(e)}));return function(){return n().apply(void 0,r.map((function(e){return e()})))}},t.functionExpressionHandler=function(e){var t=this,n=this,r=this.source,i=this.collectDeclVars,a=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var o=e.id?e.id.name:"",s=e.params.length,u=e.params.map((function(e){return t.createParamNameGetter(e)})),c=this.createClosure(e.body),l=this.collectDeclVars,f=this.collectDeclFuncs;return this.collectDeclVars=i,this.collectDeclFuncs=a,function(){var t=n.getCurrentScope(),i=function e(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.callStack.push(""+o);var s=n.getCurrentScope(),h=fI(t,"FunctionScope("+o+")");n.setCurrentScope(h),n.addDeclarationsToScope(l,f,h),o&&(h.data[o]=e),h.data.arguments=arguments,u.forEach((function(e,t){h.data[e()]=i[t]}));var p=n.getCurrentContext();n.setCurrentContext(this);var d=c();if(n.setCurrentContext(p),n.setCurrentScope(s),n.callStack.pop(),d instanceof oI)return d.value};return WP(i,o),Object.defineProperty(i,"length",{value:s,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"toString",{value:function(){return r.slice(e.start,e.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(i,"valueOf",{value:function(){return r.slice(e.start,e.end)},writable:!0,configurable:!0,enumerable:!1}),i}},t.newExpressionHandler=function(e){var t=this,n=this.source,r=this.createClosure(e.callee),i=e.arguments.map((function(e){return t.createClosure(e)}));return function(){var a=r();if(!nI(a)||a.__IS_EVAL_FUNC){var o=e.callee,s=n.slice(o.start,o.end);throw t.createInternalThrowError(HP.IsNotConstructor,s,e)}return a.__IS_FUNCTION_FUNC?a.apply(void 0,[new rI(t)].concat(i.map((function(e){return e()})))):zP(a,i.map((function(e){return e()})))}},t.memberExpressionHandler=function(e){var t=this.createClosure(e.object),n=this.createMemberKeyGetter(e);return function(){return t()[n()]}},t.thisExpressionHandler=function(e){var t=this;return function(){return t.getCurrentContext()}},t.sequenceExpressionHandler=function(e){var t=this,n=e.expressions.map((function(e){return t.createClosure(e)}));return function(){for(var e,t=n.length,r=0;r<t;r++){e=(0,n[r])()}return e}},t.literalHandler=function(e){return function(){return e.regex?new RegExp(e.regex.pattern,e.regex.flags):e.value}},t.identifierHandler=function(e){var t=this;return function(){var n=t.getCurrentScope(),r=t.getScopeDataFromName(e.name,n);return t.assertVariable(r,e.name,e),r[e.name]}},t.getIdentifierScope=function(e){var t=this.getCurrentScope();return this.getScopeFromName(e.name,t)},t.assignmentExpressionHandler=function(e){var t=this;"Identifier"!==e.left.type||"FunctionExpression"!==e.right.type||e.right.id||(e.right.id={type:"Identifier",name:e.left.name});var n=this.createObjectGetter(e.left),r=this.createNameGetter(e.left),i=this.createClosure(e.right);return function(){var a=n(),o=r(),s=i();switch("="!==e.operator&&t.assertVariable(a,o,e),e.operator){case"=":return a[o]=s;case"+=":return a[o]+=s;case"-=":return a[o]-=s;case"*=":return a[o]*=s;case"**=":return a[o]=Math.pow(a[o],s);case"/=":return a[o]/=s;case"%=":return a[o]%=s;case"<<=":return a[o]<<=s;case">>=":return a[o]>>=s;case">>>=":return a[o]>>>=s;case"&=":return a[o]&=s;case"^=":return a[o]^=s;case"|=":return a[o]|=s;default:throw t.createInternalThrowError(HP.AssignmentExpressionSyntaxError,e.type,e)}}},t.functionDeclarationHandler=function(e){if(e.id){var t=this.functionExpressionHandler(e);Object.defineProperty(t,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(e.id.name,t)}return function(){return QP}},t.getVariableName=function(e){if("Identifier"===e.type)return e.name;throw this.createInternalThrowError(HP.VariableTypeSyntaxError,e.type,e)},t.variableDeclarationHandler=function(e){for(var t,n=this,r=[],i=0;i<e.declarations.length;i++){var a=e.declarations[i];this.varDeclaration(this.getVariableName(a.id)),a.init&&r.push({type:"AssignmentExpression",operator:"=",left:a.id,right:a.init})}return r.length&&(t=this.createClosure({type:"BlockStatement",body:r})),function(){if(t){var e=n.isVarDeclMode;n.isVarDeclMode=!0,t(),n.isVarDeclMode=e}return QP}},t.assertVariable=function(e,t,n){if(e===this.globalScope.data&&!(t in e))throw this.createInternalThrowError(HP.VariableUndefinedReferenceError,t,n)},t.programHandler=function(e){var t=this,n=e.body.map((function(e){return t.createClosure(e)}));return function(){for(var e=QP,r=0;r<n.length;r++){var i=n[r],a=t.setValue(i());if(a!==QP&&((e=a)instanceof oI||e instanceof sI||e instanceof uI||e===YP||e===KP))break}return e}},t.expressionStatementHandler=function(e){return this.createClosure(e.expression)},t.emptyStatementHandler=function(e){return function(){return QP}},t.returnStatementHandler=function(e){var t=e.argument?this.createClosure(e.argument):lI;return function(){return new oI(t())}},t.ifStatementHandler=function(e){var t=this.createClosure(e.test),n=this.createClosure(e.consequent),r=e.alternate?this.createClosure(e.alternate):function(){return QP};return function(){return t()?n():r()}},t.conditionalExpressionHandler=function(e){return this.ifStatementHandler(e)},t.forStatementHandler=function(e){var t=this,n=lI,r=e.test?this.createClosure(e.test):function(){return!0},i=lI,a=this.createClosure(e.body);return"ForStatement"===e.type&&(n=e.init?this.createClosure(e.init):n,i=e.update?this.createClosure(e.update):lI),function(o){var s,u=QP,c="DoWhileStatement"===e.type;for(o&&"LabeledStatement"===o.type&&(s=o.label.name),n();c||r();i()){c=!1;var l=t.setValue(a());if(l!==QP&&l!==KP){if(l===YP)break;if((u=l)instanceof uI&&u.value===s)u=QP;else if(u instanceof oI||u instanceof sI||u instanceof uI)break}}return u}},t.whileStatementHandler=function(e){return this.forStatementHandler(e)},t.doWhileStatementHandler=function(e){return this.forStatementHandler(e)},t.forInStatementHandler=function(e){var t=this,n=e.left,r=this.createClosure(e.right),i=this.createClosure(e.body);return"VariableDeclaration"===e.left.type&&(this.createClosure(e.left)(),n=e.left.declarations[0].id),function(e){var a,o,s=QP;e&&"LabeledStatement"===e.type&&(a=e.label.name);var u=r();for(o in u){t.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:n,right:{type:"Literal",value:o}})();var c=t.setValue(i());if(c!==QP&&c!==KP){if(c===YP)break;if((s=c)instanceof uI&&s.value===a)s=QP;else if(s instanceof oI||s instanceof sI||s instanceof uI)break}}return s}},t.withStatementHandler=function(e){var t=this,n=this.createClosure(e.object),r=this.createClosure(e.body);return function(){var e=n(),i=t.getCurrentScope(),a=new cI(e,i,JP);t.setCurrentScope(a);var o=t.setValue(r());return t.setCurrentScope(i),o}},t.throwStatementHandler=function(e){var t=this,n=this.createClosure(e.argument);return function(){throw t.setValue(void 0),n()}},t.tryStatementHandler=function(e){var t=this,n=this.createClosure(e.block),r=e.handler?this.catchClauseHandler(e.handler):null,i=e.finalizer?this.createClosure(e.finalizer):null;return function(){var e,a,o=t.getCurrentScope(),s=t.getCurrentContext(),u=o.labelStack.concat([]),c=t.callStack.concat([]),l=QP,f=function(){t.setCurrentScope(o),t.setCurrentContext(s),o.labelStack=u,t.callStack=c};try{(l=t.setValue(n()))instanceof oI&&(e=l)}catch(h){if(f(),t.isInterruptThrow(h))throw h;if(r)try{(l=t.setValue(r(h)))instanceof oI&&(e=l)}catch(p){if(f(),t.isInterruptThrow(p))throw p;a=p}}if(i)try{(l=i())instanceof oI&&(e=l)}catch(h){if(f(),t.isInterruptThrow(h))throw h;a=h}if(a)throw a;return e||l}},t.catchClauseHandler=function(e){var t=this,n=this.createParamNameGetter(e.param),r=this.createClosure(e.body);return function(e){var i,a=t.getCurrentScope().data,o=n(),s=qP.call(a,o),u=a[o];return a[o]=e,i=r(),s?a[o]=u:delete a[o],i}},t.continueStatementHandler=function(e){return function(){return e.label?new uI(e.label.name):KP}},t.breakStatementHandler=function(e){return function(){return e.label?new sI(e.label.name):YP}},t.switchStatementHandler=function(e){var t=this,n=this.createClosure(e.discriminant),r=e.cases.map((function(e){return t.switchCaseHandler(e)}));return function(){for(var e,i,a,o=n(),s=!1,u=0;u<r.length;u++){var c=r[u](),l=c.testClosure();if(l!==ZP){if(s||l===o){if(s=!0,(i=t.setValue(c.bodyClosure()))===QP)continue;if(i===YP)break;if((e=i)instanceof oI||e instanceof sI||e instanceof uI||e===KP)break}}else a=c}!s&&a&&((i=t.setValue(a.bodyClosure()))===QP||i===YP||i===KP||(e=i));return e}},t.switchCaseHandler=function(e){var t=e.test?this.createClosure(e.test):function(){return ZP},n=this.createClosure({type:"BlockStatement",body:e.consequent});return function(){return{testClosure:t,bodyClosure:n}}},t.labeledStatementHandler=function(e){var t=this,n=e.label.name,r=this.createClosure(e.body);return function(){var i,a=t.getCurrentScope();return a.labelStack.push(n),(i=r(e))instanceof sI&&i.value===n&&(i=QP),a.labelStack.pop(),i}},t.debuggerStatementHandler=function(e){return function(){return QP}},t.createParamNameGetter=function(e){if("Identifier"===e.type)return function(){return e.name};throw this.createInternalThrowError(HP.ParamTypeSyntaxError,e.type,e)},t.createObjectKeyGetter=function(e){var t;return t="Identifier"===e.type?function(){return e.name}:this.createClosure(e),function(){return t()}},t.createMemberKeyGetter=function(e){return e.computed?this.createClosure(e.property):this.createObjectKeyGetter(e.property)},t.createObjectGetter=function(e){var t=this;switch(e.type){case"Identifier":return function(){return t.getScopeDataFromName(e.name,t.getCurrentScope())};case"MemberExpression":return this.createClosure(e.object);default:throw this.createInternalThrowError(HP.AssignmentTypeSyntaxError,e.type,e)}},t.createNameGetter=function(e){switch(e.type){case"Identifier":return function(){return e.name};case"MemberExpression":return this.createMemberKeyGetter(e);default:throw this.createInternalThrowError(HP.AssignmentTypeSyntaxError,e.type,e)}},t.varDeclaration=function(e){this.collectDeclVars[e]=void 0},t.funcDeclaration=function(e,t){this.collectDeclFuncs[e]=t},t.addDeclarationsToScope=function(e,t,n){var r=n.data;for(var i in t){var a=t[i];r[i]=a?a():a}for(var o in e)o in r||(r[o]=void 0)},t.getScopeValue=function(e,t){return this.getScopeFromName(e,t).data[e]},t.getScopeDataFromName=function(e,t){return this.getScopeFromName(e,t).data},t.getScopeFromName=function(e,t){var n=t;do{if(e in n.data)return n}while(n=n.parent);return this.globalScope},t.setValue=function(e){var t=this.callStack.length;return this.isVarDeclMode||t||e===QP||e===YP||e===KP||e instanceof sI||e instanceof uI||(this.value=e instanceof oI?e.value:e),e},t.getValue=function(){return this.value},e}();function dI(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});var r=n.parsingContext,i=void 0===n.timeout?0:n.timeout,a="\n    (function anonymous("+t.join(",")+"){\n         "+e+"\n    });\n    ";return new pI(r,{ecmaVersion:n.ecmaVersion,timeout:i,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction}).evaluate(a)}function vI(e,t,n){return new pI(t,n).evaluate(e)}pI.version="0.0.3",pI.eval=iI,pI.Function=aI,pI.ecmaVersion=5,pI.globalContextInFunction=void 0,pI.global=Object.create(null);var mI=vI,gI=function(){function e(e){this._code=e}var t=e.prototype;return t.runInContext=function(e){return vI(this._code,e)},t.runInNewContext=function(e){return vI(this._code,e)},e}(),yI=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",createContext:function(e){return void 0===e&&(e=Object.create(null)),e},compileFunction:dI,runInContext:vI,runInNewContext:mI,Script:gI}),bI=function(e,t,n){return vI(e,t,n)};var _I,EI,SI,TI,xI,AI,wI,OI,CI,kI,RI,PI,II,NI,LI=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Interpreter:pI,vm:yI,evaluate:bI,Function:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();return dI(r||"",t)},default:bI}),MI=Qk.exports=function(e){var t=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},n=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},r="\n";function i(e){return"undefined"!=typeof atob?atob(e):"base64:"+e}function a(e){var t=new Error("(regl) "+e);throw console.error(t),t}function o(e,t){e||a(t)}function s(e){return e?": "+e:""}function u(e,t,n){e in t||a("unknown parameter ("+e+")"+s(n)+". possible values: "+Object.keys(t).join())}function c(e,n){t(e)||a("invalid parameter type"+s(n)+". must be a typed array")}function l(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function f(e,t,n){l(e,t)||a("invalid parameter type"+s(n)+". expected "+t+", got "+typeof e)}function h(e,t){e>=0&&(0|e)===e||a("invalid parameter type, ("+e+")"+s(t)+". must be a nonnegative integer")}function p(e,t,n){t.indexOf(e)<0&&a("invalid value"+s(n)+". must be one of: "+t)}var d=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function v(e){Object.keys(e).forEach((function(e){d.indexOf(e)<0&&a('invalid regl constructor argument "'+e+'". must be one of '+d)}))}function m(e,t){for(e+="";e.length<t;)e=" "+e;return e}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(e,t){this.number=e,this.line=t,this.errors=[]}function b(e,t,n){this.file=e,this.line=t,this.message=n}function _(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function E(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function S(e,t){var n=e.split("\n"),r=1,a=0,o={unknown:new g,0:new g};o.unknown.name=o[0].name=t||_(),o.unknown.lines.push(new y(0,""));for(var s=0;s<n.length;++s){var u=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(r=0|l[1],l[2]&&((a=0|l[2])in o||(o[a]=new g)));break;case"define":var f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);f&&(o[a].name=f[1]?i(f[2]):f[2])}o[a].lines.push(new y(r++,u))}return Object.keys(o).forEach((function(e){var t=o[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),o}function T(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new b(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new b("unknown",0,e))}})),t}function x(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))}function A(e,t,n,i,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),u=i===e.FRAGMENT_SHADER?"fragment":"vertex";I(n,"string",u+" shader source must be a string",a);var c=S(n,a),l=T(s);x(c,l),Object.keys(c).forEach((function(e){var t=c[e];if(t.hasErrors){var n=[""],i=[""];a("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){a(m(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),a(e.line+r,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(n){var i=n.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(o){var s=o[1];switch(i=o[2],s){case"assign":s="="}t=Math.max(e.line.indexOf(s,t),0)}else t=0;a(m("| ",6)),a(m("^^^",t+3)+r,"font-weight:bold"),a(m("| ",6)),a(i+r,"font-weight:bold")})),a(m("| ",6)+r)}else a(m(e.number,4)+"|  "),a(e.line+r,"color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(i[0]=n.join("%c"),console.log.apply(console,i))}function a(e,t){n.push(e),i.push(t||"")}})),o.raise("Error compiling "+u+" shader, "+c[0].name)}}function w(e,t,n,i,a){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),u=S(n,a),c='Error linking program with vertex shader, "'+S(i,a)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+c+r+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+r+s),o.raise(c)}}function O(e){e._commandRef=_()}function C(e,t,n,r){function i(e){return e?r.id(e):0}function a(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}O(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var o=e._uniformSet={};a(o,t.static),a(o,t.dynamic);var s=e._attributeSet={};a(s,n.static),a(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function k(e,t){var n=E();a(e+" in command "+(t||_())+("unknown"===n?"":" called from "+n))}function R(e,t,n){e||k(t,n||_())}function P(e,t,n,r){e in t||k("unknown parameter ("+e+")"+s(n)+". possible values: "+Object.keys(t).join(),r||_())}function I(e,t,n,r){l(e,t)||k("invalid parameter type"+s(n)+". expected "+t+", got "+typeof e,r||_())}function N(e){e()}function L(e,t,n){e.texture?p(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):p(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var M=33071,D=9728,F=9984,B=9985,U=9986,j=9987,V=5121,H=5122,G=5123,z=5124,X=5125,W=5126,q=32819,Y=32820,K=33635,Z=34042,Q=36193,J={};function $(e,t){return e===Y||e===q||e===K?2:e===Z?4:J[e]*t}function ee(e){return!(e&e-1||!e)}function te(e,t,n){var r,i=t.width,a=t.height,s=t.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),e.wrapS===M&&e.wrapT===M||o(ee(i)&&ee(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==a&&o(e.minFilter!==F&&e.minFilter!==U&&e.minFilter!==B&&e.minFilter!==j,"min filter requires mipmap"):(o(ee(i)&&ee(a),"texture must be a square power of 2 to support mipmapping"),o(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(e.minFilter===D&&e.magFilter===D,"filter not supported, must enable oes_texture_float_linear"),o(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(r=0;r<16;++r)if(u[r]){var c=i>>r,l=a>>r;o(t.mipmask&1<<r,"missing mipmap data");var f=u[r];if(o(f.width===c&&f.height===l,"invalid shape for mip images"),o(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil($(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;o(f.data.byteLength===h*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||o(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&o(!e.genMipmaps,"mipmap generation for compressed images not supported")}function ne(e,t,n,r){var i=e.width,a=e.height,s=e.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(t.wrapS===M&&t.wrapT===M,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];o(c.width===i&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(o(!c.compressed,"can not generate mipmap for compressed textures"),o(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var h=l[f];if(h){var p=i>>f,d=a>>f;o(c.mipmask&1<<f,"missing mipmap data"),o(h.width===p&&h.height===d,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?o(h.data.byteLength===p*d*Math.max($(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}J[5120]=J[V]=1,J[H]=J[G]=J[Q]=J[K]=J[q]=J[Y]=2,J[z]=J[X]=J[W]=J[Z]=4;var re=n(o,{optional:N,raise:a,commandRaise:k,command:R,parameter:u,commandParameter:P,constructor:v,type:f,commandType:I,isTypedArray:c,nni:h,oneOf:p,shaderError:A,linkError:w,callSite:E,saveCommandRef:O,saveDrawInfo:C,framebufferFormat:L,guessCommand:_,texture2D:te,textureCube:ne}),ie=0,ae=0,oe=5,se=6;function ue(e,t){this.id=ie++,this.type=e,this.data=t}function ce(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function le(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+ce(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return le(e.substr(0,r.index)).concat(le(r[1])).concat(le(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+ce(e)+'"'];for(var a=[],o=0;o<i.length;++o)a=a.concat(le(i[o]));return a}function fe(e){return"["+le(e).join("][")+"]"}function he(e,t){return new ue(e,fe(t+""))}function pe(e){return"function"==typeof e&&!e._reglType||e instanceof ue}function de(e,t){return"function"==typeof e?new ue(ae,e):"number"==typeof e||"boolean"==typeof e?new ue(oe,e):Array.isArray(e)?new ue(se,e.map((function(e,n){return de(e,t+"["+n+"]")}))):e instanceof ue?e:void re(!1,"invalid option type in uniform "+t)}var ve={DynamicVariable:ue,define:he,isDynamic:pe,unbox:de,accessor:fe},me={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},ge="undefined"!=typeof my&&my&&"function"==typeof my.showToast?function(){return+new Date}:"undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function ye(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function be(e,t,r){var i,a=document.createElement("canvas");function o(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var i=a.getBoundingClientRect();t=i.right-i.left,n=i.bottom-i.top}a.width=r*t,a.height=r*n}function s(){i?i.disconnect():window.removeEventListener("resize",o),e.removeChild(a)}return n(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(a),e===document.body&&(a.style.position="absolute",n(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(o)}))).observe(e):window.addEventListener("resize",o,!1),o(),{canvas:a,onDestroy:s}}function _e(e,t){function n(n){try{return e.getContext(n,t)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function Ee(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function Se(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function Te(e){return"string"==typeof e?e.split():(re(Array.isArray(e),"invalid extension array"),e)}function xe(e){return"string"==typeof e?(re("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function Ae(e){var t,n,r,i,a=e||{},o={},s=[],u=[],c="undefined"==typeof window?1:window.devicePixelRatio,l=!1,f=function(e){e&&re.raise(e)},h=function(){};if("string"==typeof a?(re("undefined"!=typeof document,"selector queries only supported in DOM environments"),t=document.querySelector(a),re(t,"invalid query string for element")):"object"==typeof a?Ee(a)?t=a:Se(a)?r=(i=a).canvas:(re.constructor(a),"gl"in a?i=a.gl:"canvas"in a?r=xe(a.canvas):"container"in a&&(n=xe(a.container)),"attributes"in a&&(o=a.attributes,re.type(o,"object","invalid context attributes")),"extensions"in a&&(s=Te(a.extensions)),"optionalExtensions"in a&&(u=Te(a.optionalExtensions)),"onDone"in a&&(re.type(a.onDone,"function","invalid or missing onDone callback"),f=a.onDone),"profile"in a&&(l=!!a.profile),"pixelRatio"in a&&(c=+a.pixelRatio,re(c>0,"invalid pixel ratio"))):re.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){re("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=be(n||document.body,f,c);if(!p)return null;r=p.canvas,h=p.onDestroy}void 0===o.premultipliedAlpha&&(o.premultipliedAlpha=!0),i=_e(r,o)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function we(e,t){var n={};function r(e){re.type(e,"string","extension name must be string");var t,r=e.toLowerCase();try{t=n[r]=i(e)}catch(a){}return!!t}function i(t){return e.getExtension(t)?e.getExtension(t):e.getExtension(t.toLowerCase())?e.getExtension(t.toLowerCase()):null}for(var a=0;a<t.extensions.length;++a){var o=t.extensions[a];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function Oe(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var Ce=5120,ke=5121,Re=5122,Pe=5123,Ie=5124,Ne=5125,Le=5126;function Me(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function De(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function Fe(){var e=Oe(8,(function(){return[]}));function t(t){var n=Me(t),r=e[De(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[De(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case Ce:r=new Int8Array(t(n),0,n);break;case ke:r=new Uint8Array(t(n),0,n);break;case Re:r=new Int16Array(t(2*n),0,n);break;case Pe:r=new Uint16Array(t(2*n),0,n);break;case Ie:r=new Int32Array(t(4*n),0,n);break;case Ne:r=new Uint32Array(t(4*n),0,n);break;case Le:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var Be=Fe();Be.zero=Fe();var Ue=3408,je=3410,Ve=3411,He=3412,Ge=3413,ze=3414,Xe=3415,We=33901,qe=33902,Ye=3379,Ke=3386,Ze=34921,Qe=36347,Je=36348,$e=35661,et=35660,tt=34930,nt=36349,rt=34076,it=34024,at=7936,ot=7937,st=7938,ut=35724,ct=34047,lt=36063,ft=34852,ht=3553,pt=34067,dt=34069,vt=33984,mt=6408,gt=5126,yt=5121,bt=36160,_t=36053,Et=36064,St=16384,Tt=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(ct));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(ft),i=e.getParameter(lt));var a=!!t.oes_texture_float;if(a){var o=e.createTexture();e.bindTexture(ht,o),e.texImage2D(ht,0,mt,1,1,0,mt,gt,null);var s=e.createFramebuffer();if(e.bindFramebuffer(bt,s),e.framebufferTexture2D(bt,Et,ht,o,0),e.bindTexture(ht,null),e.checkFramebufferStatus(bt)!==_t)a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(St);var u=Be.allocType(gt,4);e.readPixels(0,0,1,1,mt,gt,u),e.getError()?a=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),a=1===u[0]),Be.freeType(u)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var l=e.createTexture(),f=Be.allocType(yt,36);e.activeTexture(vt),e.bindTexture(pt,l),e.texImage2D(dt,0,mt,3,3,0,mt,yt,f),Be.freeType(f),e.bindTexture(pt,null),e.deleteTexture(l),c=!e.getError()}return{colorBits:[e.getParameter(je),e.getParameter(Ve),e.getParameter(He),e.getParameter(Ge)],depthBits:e.getParameter(ze),stencilBits:e.getParameter(Xe),subpixelBits:e.getParameter(Ue),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(We),lineWidthDims:e.getParameter(qe),maxViewportDims:e.getParameter(Ke),maxCombinedTextureUnits:e.getParameter($e),maxCubeMapSize:e.getParameter(rt),maxRenderbufferSize:e.getParameter(it),maxTextureUnits:e.getParameter(tt),maxTextureSize:e.getParameter(Ye),maxAttributes:e.getParameter(Ze),maxVertexUniforms:e.getParameter(Qe),maxVertexTextureUnits:e.getParameter(et),maxVaryingVectors:e.getParameter(Je),maxFragmentUniforms:e.getParameter(nt),glsl:e.getParameter(ut),renderer:e.getParameter(ot),vendor:e.getParameter(at),version:e.getParameter(st),readFloat:a,npotTextureCube:c}};function xt(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var At=function(e){return Object.keys(e).map((function(t){return e[t]}))},wt={shape:It,flatten:Pt};function Ot(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function Ct(e,t,n,r){for(var i=0,a=0;a<t;++a)for(var o=e[a],s=0;s<n;++s)r[i++]=o[s]}function kt(e,t,n,r,i,a){for(var o=a,s=0;s<t;++s)for(var u=e[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[o++]=l[f]}function Rt(e,t,n,r,i){for(var a=1,o=n+1;o<t.length;++o)a*=t[o];var s=t[n];if(t.length-n==4){var u=t[n+1],c=t[n+2],l=t[n+3];for(o=0;o<s;++o)kt(e[o],u,c,l,r,i),i+=a}else for(o=0;o<s;++o)Rt(e[o],t,n+1,r,i),i+=a}function Pt(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var o=r||Be.allocType(n,i);switch(t.length){case 0:break;case 1:Ot(e,t[0],o);break;case 2:Ct(e,t[0],t[1],o);break;case 3:kt(e,t[0],t[1],t[2],o,0);break;default:Rt(e,t,0,o,0)}return o}function It(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Nt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Lt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Mt={dynamic:35048,stream:35040,static:35044},Dt=wt.flatten,Ft=wt.shape,Bt=35044,Ut=35040,jt=5121,Vt=5126,Ht=[];function Gt(e){return 0|Nt[Object.prototype.toString.call(e)]}function zt(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function Xt(e,t,n,r,i,a,o){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)e[s++]=t[i*u+a*c+o]}function Wt(e,n,r,i){var a=0,o={};function s(t){this.id=a++,this.buffer=e.createBuffer(),this.type=t,this.usage=Bt,this.byteLength=0,this.dimension=1,this.dtype=jt,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){p(this)};var u=[];function c(e,t){var n=u.pop();return n||(n=new s(e)),n.bind(),h(n,t,Ut,0,1,!1),n}function l(e){u.push(e)}function f(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function h(e,n,r,i,a,o){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Vt,n.length>0)if(Array.isArray(n[0])){s=Ft(n);for(var c=1,l=1;l<s.length;++l)c*=s[l];e.dimension=c,f(e,u=Dt(n,s,e.dtype),r),o?e.persistentData=u:Be.freeType(u)}else if("number"==typeof n[0]){e.dimension=a;var h=Be.allocType(e.dtype,n.length);zt(h,n),f(e,h,r),o?e.persistentData=h:Be.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||Gt(n[0])||Vt,f(e,u=Dt(n,[n.length,n[0].length],e.dtype),r),o?e.persistentData=u:Be.freeType(u)):re.raise("invalid buffer data")}else if(t(n))e.dtype=i||Gt(n),e.dimension=a,f(e,n,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(xt(n)){s=n.shape;var p=n.stride,d=n.offset,v=0,m=0,g=0,y=0;1===s.length?(v=s[0],m=1,g=p[0],y=0):2===s.length?(v=s[0],m=s[1],g=p[0],y=p[1]):re.raise("invalid shape"),e.dtype=i||Gt(n.data)||Vt,e.dimension=m;var b=Be.allocType(e.dtype,v*m);Xt(b,n.data,v,m,g,y,d),f(e,b,r),o?e.persistentData=b:Be.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=jt,e.dimension=a,f(e,n,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):re.raise("invalid buffer data")}function p(t){n.bufferCount--,i(t);var r=t.buffer;re(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete o[t.id]}function d(i,a,u,c){n.bufferCount++;var l=new s(a);function f(n){var i=Bt,a=null,o=0,s=0,u=1;return Array.isArray(n)||t(n)||xt(n)||n instanceof ArrayBuffer?a=n:"number"==typeof n?o=0|n:n&&(re.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(re(null===a||Array.isArray(a)||t(a)||xt(a),"invalid data for buffer"),a=n.data),"usage"in n&&(re.parameter(n.usage,Mt,"invalid buffer usage"),i=Mt[n.usage]),"type"in n&&(re.parameter(n.type,Lt,"invalid buffer type"),s=Lt[n.type]),"dimension"in n&&(re.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(re.nni(o,"buffer length must be a nonnegative integer"),o=0|n.length)),l.bind(),a?h(l,a,i,s,u,c):(o&&e.bufferData(l.type,o,i),l.dtype=s||jt,l.usage=i,l.dimension=u,l.byteLength=o),r.profile&&(l.stats.size=l.byteLength*Ht[l.dtype]),f}function d(t,n){re(n+t.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+l.byteLength),e.bufferSubData(l.type,n,t)}function v(e,n){var r,i=0|(n||0);if(l.bind(),t(e)||e instanceof ArrayBuffer)d(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var a=Be.allocType(l.dtype,e.length);zt(a,e),d(a,i),Be.freeType(a)}else if(Array.isArray(e[0])||t(e[0])){r=Ft(e);var o=Dt(e,r,l.dtype);d(o,i),Be.freeType(o)}else re.raise("invalid buffer data")}else if(xt(e)){r=e.shape;var s=e.stride,u=0,c=0,h=0,p=0;1===r.length?(u=r[0],c=1,h=s[0],p=0):2===r.length?(u=r[0],c=r[1],h=s[0],p=s[1]):re.raise("invalid shape");var v=Array.isArray(e.data)?l.dtype:Gt(e.data),m=Be.allocType(v,u*c);Xt(m,e.data,u,c,h,p,e.offset),d(m,i),Be.freeType(m)}else re.raise("invalid data for buffer subdata");return f}return o[l.id]=l,u||f(i),f._reglType="buffer",f._buffer=l,f.subdata=v,r.profile&&(f.stats=l.stats),f.destroy=function(){p(l)},f}function v(){At(o).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(o).forEach((function(t){e+=o[t].stats.size})),e}),{create:d,createStream:c,destroyStream:l,clear:function(){At(o).forEach(p),u.forEach(p)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:v,_initBuffer:h}}Ht[5120]=1,Ht[5122]=2,Ht[5124]=4,Ht[5121]=1,Ht[5123]=2,Ht[5125]=4,Ht[5126]=4;var qt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Yt=0,Kt=1,Zt=4,Qt=5120,Jt=5121,$t=5122,en=5123,tn=5124,nn=5125,rn=34963,an=35040,on=35044;function sn(e,n,r,i){var a={},o=0,s={uint8:Jt,uint16:en};function u(e){this.id=o++,a[this.id]=this,this.buffer=e,this.primType=Zt,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=nn),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(e){var t=c.pop();return t||(t=new u(r.create(null,rn,!0,!1)._buffer)),h(t,e,an,-1,-1,0,0),t}function f(e){c.push(e)}function h(i,a,o,s,u,c,l){var f;if(i.buffer.bind(),a){var h=l;l||t(a)&&(!xt(a)||t(a.data))||(h=n.oes_element_index_uint?nn:en),r._initBuffer(i.buffer,a,o,h,3)}else e.bufferData(rn,c,o),i.buffer.dtype=f||Jt,i.buffer.usage=o,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case Jt:case Qt:f=Jt;break;case en:case $t:f=en;break;case nn:case tn:f=nn;break;default:re.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,re(f!==nn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=i.buffer.byteLength,f===en?p>>=1:f===nn&&(p>>=2)),i.vertCount=p;var d=s;if(s<0){d=Zt;var v=i.buffer.dimension;1===v&&(d=Yt),2===v&&(d=Kt),3===v&&(d=Zt)}i.primType=d}function p(e){i.elementsCount--,re(null!==e.buffer,"must not double destroy elements"),delete a[e.id],e.buffer.destroy(),e.buffer=null}function d(e,n){var a=r.create(null,rn,!0),o=new u(a._buffer);function c(e){if(e)if("number"==typeof e)a(e),o.primType=Zt,o.vertCount=0|e,o.type=Jt;else{var n=null,r=on,i=-1,u=-1,l=0,f=0;Array.isArray(e)||t(e)||xt(e)?n=e:(re.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,re(Array.isArray(n)||t(n)||xt(n),"invalid data for element buffer")),"usage"in e&&(re.parameter(e.usage,Mt,"invalid element buffer usage"),r=Mt[e.usage]),"primitive"in e&&(re.parameter(e.primitive,qt,"invalid element buffer primitive"),i=qt[e.primitive]),"count"in e&&(re("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(re.parameter(e.type,s,"invalid buffer type"),f=s[e.type]),"length"in e?l=0|e.length:(l=u,f===en||f===$t?l*=2:f!==nn&&f!==tn||(l*=4))),h(o,n,r,i,u,l,f)}else a(),o.primType=Zt,o.vertCount=0,o.type=Jt;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=o,c.subdata=function(e,t){return a.subdata(e,t),c},c.destroy=function(){p(o)},c}return{create:d,createStream:l,destroyStream:f,getElements:function(e){return"function"==typeof e&&e._elements instanceof u?e._elements:null},clear:function(){At(a).forEach(p)}}}var un=new Float32Array(1),cn=new Uint32Array(un.buffer),ln=5123;function fn(e){for(var t=Be.allocType(ln,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{un[0]=e[n];var r=cn[0],i=r>>>31<<15,a=(r<<1>>>24)-127,o=r>>13&1023;if(a<-24)t[n]=i;else if(a<-14){var s=-14-a;t[n]=i+(o+1024>>s)}else t[n]=a>15?i+31744:i+(a+15<<10)+o}return t}function hn(e){return Array.isArray(e)||t(e)}var pn=function(e){return!(e&e-1||!e)},dn=34467,vn=3553,mn=34067,gn=34069,yn=6408,bn=6406,_n=6407,En=6409,Sn=6410,Tn=32854,xn=32855,An=36194,wn=32819,On=32820,Cn=33635,kn=34042,Rn=6402,Pn=34041,In=35904,Nn=35906,Ln=36193,Mn=33776,Dn=33777,Fn=33778,Bn=33779,Un=35986,jn=35987,Vn=34798,Hn=35840,Gn=35841,zn=35842,Xn=35843,Wn=36196,qn=5121,Yn=5123,Kn=5125,Zn=5126,Qn=10242,Jn=10243,$n=10497,er=33071,tr=33648,nr=10240,rr=10241,ir=9728,ar=9729,or=9984,sr=9985,ur=9986,cr=9987,lr=33170,fr=4352,hr=4353,pr=4354,dr=34046,vr=3317,mr=37440,gr=37441,yr=37443,br=37444,_r=33984,Er=[or,ur,sr,cr],Sr=[0,En,Sn,_n,yn],Tr={};function xr(e){return"[object "+e+"]"}Tr[En]=Tr[bn]=Tr[Rn]=1,Tr[Pn]=Tr[Sn]=2,Tr[_n]=Tr[In]=3,Tr[yn]=Tr[Nn]=4;var Ar=xr("HTMLCanvasElement"),wr=xr("OffscreenCanvas"),Or=xr("CanvasRenderingContext2D"),Cr=xr("ImageBitmap"),kr=xr("HTMLImageElement"),Rr=xr("HTMLVideoElement"),Pr=Object.keys(Nt).concat([Ar,wr,Or,Cr,kr,Rr]),Ir=[];Ir[qn]=1,Ir[Zn]=4,Ir[Ln]=2,Ir[Yn]=2,Ir[Kn]=4;var Nr=[];function Lr(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Mr(e){return!!Array.isArray(e)&&!(0===e.length||!hn(e[0]))}function Dr(e){return Object.prototype.toString.call(e)}function Fr(e){return Dr(e)===Ar}function Br(e){return Dr(e)===wr}function Ur(e){return Dr(e)===Or}function jr(e){return Dr(e)===Cr}function Vr(e){return Dr(e)===kr}function Hr(e){return Dr(e)===Rr}function Gr(e){return!!("undefined"!=typeof my&&my&&"function"==typeof my.showToast&&e&&e.getContext)}function zr(e){return!!("undefined"!=typeof my&&my&&"function"==typeof my.showToast&&e&&"src"in e&&"crossOrigin"in e)}function Xr(e){if(!e)return!1;if(Gr(e)||zr(e))return!0;var t=Dr(e);return Pr.indexOf(t)>=0||Lr(e)||Mr(e)||xt(e)}function Wr(e){return 0|Nt[Object.prototype.toString.call(e)]}function qr(e,t){var n=t.length;switch(e.type){case qn:case Yn:case Kn:case Zn:var r=Be.allocType(e.type,n);r.set(t),e.data=r;break;case Ln:e.data=fn(t);break;default:re.raise("unsupported texture type, must specify a typed array")}}function Yr(e,t){return Be.allocType(e.type===Ln?Zn:e.type,t)}function Kr(e,t){e.type===Ln?(e.data=fn(t),Be.freeType(t)):e.data=t}function Zr(e,t,n,r,i,a){for(var o=e.width,s=e.height,u=e.channels,c=Yr(e,o*s*u),l=0,f=0;f<s;++f)for(var h=0;h<o;++h)for(var p=0;p<u;++p)c[l++]=t[n*h+r*f+i*p+a];Kr(e,c)}function Qr(e,t,n,r,i,a){var o;if(o=void 0!==Nr[e]?Nr[e]:Tr[e]*Ir[t],a&&(o*=6),i){for(var s=0,u=n;u>=1;)s+=o*u*u,u/=2;return s}return o*n*r}function Jr(e,r,i,a,o,s,u){var c={"don't care":fr,"dont care":fr,nice:pr,fast:hr},l={repeat:$n,clamp:er,mirror:tr},f={nearest:ir,linear:ar},h=n({mipmap:cr,"nearest mipmap nearest":or,"linear mipmap nearest":sr,"nearest mipmap linear":ur,"linear mipmap linear":cr},f),p={none:0,browser:br},d={uint8:qn,rgba4:wn,rgb565:Cn,"rgb5 a1":On},v={alpha:bn,luminance:En,"luminance alpha":Sn,rgb:_n,rgba:yn,rgba4:Tn,"rgb5 a1":xn,rgb565:An},m={};r.ext_srgb&&(v.srgb=In,v.srgba=Nn),r.oes_texture_float&&(d.float32=d.float=Zn),r.oes_texture_half_float&&(d.float16=d["half float"]=Ln),r.webgl_depth_texture&&(n(v,{depth:Rn,"depth stencil":Pn}),n(d,{uint16:Yn,uint32:Kn,"depth stencil":kn})),r.webgl_compressed_texture_s3tc&&n(m,{"rgb s3tc dxt1":Mn,"rgba s3tc dxt1":Dn,"rgba s3tc dxt3":Fn,"rgba s3tc dxt5":Bn}),r.webgl_compressed_texture_atc&&n(m,{"rgb atc":Un,"rgba atc explicit alpha":jn,"rgba atc interpolated alpha":Vn}),r.webgl_compressed_texture_pvrtc&&n(m,{"rgb pvrtc 4bppv1":Hn,"rgb pvrtc 2bppv1":Gn,"rgba pvrtc 4bppv1":zn,"rgba pvrtc 2bppv1":Xn}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=Wn);var g=Array.prototype.slice.call(e.getParameter(dn)||new Uint32Array(0));Object.keys(m).forEach((function(e){var t=m[e];g.indexOf(t)>=0&&(v[e]=t)}));var y=Object.keys(v);i.textureFormats=y;var b=[];Object.keys(v).forEach((function(e){var t=v[e];b[t]=e}));var _=[];Object.keys(d).forEach((function(e){var t=d[e];_[t]=e}));var E=[];Object.keys(f).forEach((function(e){var t=f[e];E[t]=e}));var S=[];Object.keys(h).forEach((function(e){var t=h[e];S[t]=e}));var T=[];Object.keys(l).forEach((function(e){var t=l[e];T[t]=e}));var x=y.reduce((function(e,t){var n=v[t];return n===En||n===bn||n===En||n===Sn||n===Rn||n===Pn||r.ext_srgb&&(n===In||n===Nn)?e[n]=n:n===xn||t.indexOf("rgba")>=0?e[n]=yn:e[n]=_n,e}),{});function A(){this.internalformat=yn,this.format=yn,this.type=qn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=br,this.width=0,this.height=0,this.channels=0}function w(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function O(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(re.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(re.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(re.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(re.parameter(t.colorSpace,p,"invalid colorSpace"),e.colorSpace=p[t.colorSpace]),"type"in t){var n=t.type;re(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),re(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),re(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(n,d,"invalid texture type"),e.type=d[n]}var a=e.width,o=e.height,s=e.channels,u=!1;"shape"in t?(re(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),a=t.shape[0],o=t.shape[1],3===t.shape.length&&(s=t.shape[2],re(s>0&&s<=4,"invalid number of channels"),u=!0),re(a>=0&&a<=i.maxTextureSize,"invalid width"),re(o>=0&&o<=i.maxTextureSize,"invalid height")):("radius"in t&&(a=o=t.radius,re(a>=0&&a<=i.maxTextureSize,"invalid radius")),"width"in t&&(a=t.width,re(a>=0&&a<=i.maxTextureSize,"invalid width")),"height"in t&&(o=t.height,re(o>=0&&o<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,re(s>0&&s<=4,"invalid number of channels"),u=!0)),e.width=0|a,e.height=0|o,e.channels=0|s;var c=!1;if("format"in t){var l=t.format;re(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(l,v,"invalid texture format");var f=e.internalformat=v[l];e.format=x[f],l in d&&("type"in t||(e.type=d[l])),l in m&&(e.compressed=!0),c=!0}!u&&c?e.channels=Tr[e.format]:u&&!c?e.channels!==Sr[e.format]&&(e.format=e.internalformat=Sr[e.channels]):c&&u&&re(e.channels===Tr[e.format],"number of channels inconsistent with specified format")}}function C(t){e.pixelStorei(mr,t.flipY),e.pixelStorei(gr,t.premultiplyAlpha),e.pixelStorei(yr,t.colorSpace),e.pixelStorei(vr,t.unpackAlignment)}function k(){A.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function R(e,n){var r=null;if(Xr(n)?r=n:n&&(re.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Xr(n.data)&&(r=n.data)),re(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){re(!r,"can not specify copy and data field for the same texture");var a=o.viewportWidth,s=o.viewportHeight;e.width=e.width||a-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,re(e.xOffset>=0&&e.xOffset<a&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=a&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==qn||(e.type=Wr(r));else if(Lr(r))e.channels=e.channels||4,qr(e,r),e.alignment=1,e.needsFree=!0;else if(xt(r)){var u=r.data;Array.isArray(u)||e.type!==qn||(e.type=Wr(u));var c,l,f,h,p,d,v=r.shape,m=r.stride;3===v.length?(f=v[2],d=m[2]):(re(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),c=v[0],l=v[1],h=m[0],p=m[1],e.alignment=1,e.width=c,e.height=l,e.channels=f,e.format=e.internalformat=Sr[f],e.needsFree=!0,Zr(e,u,h,p,d,r.offset)}else if(Gr(r)||Fr(r)||Br(r)||Ur(r))Gr(r)||Fr(r)||Br(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(jr(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(Vr(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(zr(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(Hr(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Mr(r)){var g=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=hn(r[0][0])?b||r[0][0].length:b||1;for(var _=wt.shape(r),E=1,S=0;S<_.length;++S)E*=_[S];var T=Yr(e,E);wt.flatten(r,_,"",T),Kr(e,T),e.alignment=1,e.width=g,e.height=y,e.channels=b,e.format=e.internalformat=Sr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Zn?re(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Ln&&re(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function P(t,n,r){var i=t.element,o=t.data,s=t.internalformat,u=t.format,c=t.type,l=t.width,f=t.height;C(t),i?e.texImage2D(n,r,u,u,c,i):t.compressed?e.compressedTexImage2D(n,r,s,l,f,0,o):t.needsCopy?(a(),e.copyTexImage2D(n,r,u,t.xOffset,t.yOffset,l,f,0)):e.texImage2D(n,r,u,l,f,0,u,c,o||null)}function I(t,n,r,i,o){var s=t.element,u=t.data,c=t.internalformat,l=t.format,f=t.type,h=t.width,p=t.height;C(t),s?e.texSubImage2D(n,o,r,i,l,f,s):t.compressed?e.compressedTexSubImage2D(n,o,r,i,c,h,p,u):t.needsCopy?(a(),e.copyTexSubImage2D(n,o,r,i,t.xOffset,t.yOffset,h,p)):e.texSubImage2D(n,o,r,i,h,p,l,f,u)}var N=[];function L(){return N.pop()||new k}function M(e){e.needsFree&&Be.freeType(e.data),k.call(e),N.push(e)}function D(){A.call(this),this.genMipmaps=!1,this.mipmapHint=fr,this.mipmask=0,this.images=Array(16)}function F(e,t,n){var r=e.images[0]=L();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function B(e,t){var n=null;if(Xr(t))w(n=e.images[0]=L(),e),R(n,t),e.mipmask=1;else if(O(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)w(n=e.images[i]=L(),e),n.width>>=i,n.height>>=i,R(n,r[i]),e.mipmask|=1<<i;else w(n=e.images[0]=L(),e),R(n,t),e.mipmask=1;w(e,e.images[0]),!e.compressed||e.internalformat!==Mn&&e.internalformat!==Dn&&e.internalformat!==Fn&&e.internalformat!==Bn||re(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function U(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;P(n[r],t,r)}}var j=[];function V(){var e=j.pop()||new D;A.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function H(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&M(t[n]),t[n]=null;j.push(e)}function G(){this.minFilter=ir,this.magFilter=ir,this.wrapS=er,this.wrapT=er,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=fr}function z(e,t){if("min"in t){var n=t.min;re.parameter(n,h),e.minFilter=h[n],Er.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;re.parameter(r,f),e.magFilter=f[r]}var a=e.wrapS,o=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(re.parameter(s,l),a=o=l[s]):Array.isArray(s)&&(re.parameter(s[0],l),re.parameter(s[1],l),a=l[s[0]],o=l[s[1]])}else{if("wrapS"in t){var u=t.wrapS;re.parameter(u,l),a=l[u]}if("wrapT"in t){var p=t.wrapT;re.parameter(p,l),o=l[p]}}if(e.wrapS=a,e.wrapT=o,"anisotropic"in t){var d=t.anisotropic;re("number"==typeof d&&d>=1&&d<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var v=!1;switch(typeof t.mipmap){case"string":re.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,v=!0;break;case"boolean":v=e.genMipmaps=t.mipmap;break;case"object":re(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,v=!0;break;default:re.raise("invalid mipmap type")}v&&!("min"in t)&&(e.minFilter=or)}}function X(t,n){e.texParameteri(n,rr,t.minFilter),e.texParameteri(n,nr,t.magFilter),e.texParameteri(n,Qn,t.wrapS),e.texParameteri(n,Jn,t.wrapT),r.ext_texture_filter_anisotropic&&e.texParameteri(n,dr,t.anisotropic),t.genMipmaps&&(e.hint(lr,t.mipmapHint),e.generateMipmap(n))}var W=0,q={},Y=i.maxTextureUnits,K=Array(Y).map((function(){return null}));function Z(t){A.call(this),this.mipmask=0,this.internalformat=yn,this.id=W++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new G,u.profile&&(this.stats={size:0})}function Q(t){e.activeTexture(_r),e.bindTexture(t.target,t.texture)}function J(){var t=K[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(vn,null)}function $(t){var n=t.texture;re(n,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(e.activeTexture(_r+r),e.bindTexture(i,null),K[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete q[t.id],s.textureCount--}function ee(t,n){var r=new Z(vn);function a(e,t){var n=r.texInfo;G.call(n);var o=V();return"number"==typeof e?F(o,0|e,"number"==typeof t?0|t:0|e):e?(re.type(e,"object","invalid arguments to regl.texture"),z(n,e),B(o,e)):F(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),r.mipmask=o.mipmask,w(r,o),re.texture2D(n,o,i),r.internalformat=o.internalformat,a.width=o.width,a.height=o.height,Q(r),U(o,vn),X(n,vn),J(),H(o),u.profile&&(r.stats.size=Qr(r.internalformat,r.type,o.width,o.height,n.genMipmaps,!1)),a.format=b[r.internalformat],a.type=_[r.type],a.mag=E[n.magFilter],a.min=S[n.minFilter],a.wrapS=T[n.wrapS],a.wrapT=T[n.wrapT],a}function o(e,t,n,i){re(!!e,"must specify image data");var o=0|t,s=0|n,u=0|i,c=L();return w(c,r),c.width=0,c.height=0,R(c,e),c.width=c.width||(r.width>>u)-o,c.height=c.height||(r.height>>u)-s,re(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),re(o>=0&&s>=0&&o+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),re(r.mipmask&1<<u,"missing mipmap data"),re(c.data||c.element||c.needsCopy,"missing image data"),Q(r),I(c,vn,o,s,u),J(),M(c),a}function c(t,n){var i=0|t,o=0|n||i;if(i===r.width&&o===r.height)return a;a.width=r.width=i,a.height=r.height=o,Q(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=o>>s;if(!c||!l)break;e.texImage2D(vn,s,r.format,c,l,0,r.format,r.type,null)}return J(),u.profile&&(r.stats.size=Qr(r.internalformat,r.type,i,o,!1,!1)),a}return q[r.id]=r,s.textureCount++,a(t,n),a.subimage=o,a.resize=c,a._reglType="texture2d",a._texture=r,u.profile&&(a.stats=r.stats),a.destroy=function(){r.decRef()},a}function te(t,n,r,a,o,c){var l=new Z(mn);q[l.id]=l,s.cubeCount++;var f=new Array(6);function h(e,t,n,r,a,o){var s,c=l.texInfo;for(G.call(c),s=0;s<6;++s)f[s]=V();if("number"!=typeof e&&e)if("object"==typeof e)if(t)B(f[0],e),B(f[1],t),B(f[2],n),B(f[3],r),B(f[4],a),B(f[5],o);else if(z(c,e),O(l,e),"faces"in e){var p=e.faces;for(re(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)re("object"==typeof p[s]&&!!p[s],"invalid input for cube map face"),w(f[s],l),B(f[s],p[s])}else for(s=0;s<6;++s)B(f[s],e);else re.raise("invalid arguments to cube map");else{var d=0|e||1;for(s=0;s<6;++s)F(f[s],d,d)}for(w(l,f[0]),re.optional((function(){i.npotTextureCube||re(pn(l.width)&&pn(l.height),"your browser does not support non power or two texture dimensions")})),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,re.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,h.width=f[0].width,h.height=f[0].height,Q(l),s=0;s<6;++s)U(f[s],gn+s);for(X(c,mn),J(),u.profile&&(l.stats.size=Qr(l.internalformat,l.type,h.width,h.height,c.genMipmaps,!0)),h.format=b[l.internalformat],h.type=_[l.type],h.mag=E[c.magFilter],h.min=S[c.minFilter],h.wrapS=T[c.wrapS],h.wrapT=T[c.wrapT],s=0;s<6;++s)H(f[s]);return h}function p(e,t,n,r,i){re(!!t,"must specify image data"),re("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var a=0|n,o=0|r,s=0|i,u=L();return w(u,l),u.width=0,u.height=0,R(u,t),u.width=u.width||(l.width>>s)-a,u.height=u.height||(l.height>>s)-o,re(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),re(a>=0&&o>=0&&a+u.width<=l.width&&o+u.height<=l.height,"texture.subimage write out of bounds"),re(l.mipmask&1<<s,"missing mipmap data"),re(u.data||u.element||u.needsCopy,"missing image data"),Q(l),I(u,gn+e,a,o,s),J(),M(u),h}function d(t){var n=0|t;if(n!==l.width){h.width=l.width=n,h.height=l.height=n,Q(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)e.texImage2D(gn+r,i,l.format,n>>i,n>>i,0,l.format,l.type,null);return J(),u.profile&&(l.stats.size=Qr(l.internalformat,l.type,h.width,h.height,!1,!0)),h}}return h(t,n,r,a,o,c),h.subimage=p,h.resize=d,h._reglType="textureCube",h._texture=l,u.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h}function ne(){for(var t=0;t<Y;++t)e.activeTexture(_r+t),e.bindTexture(vn,null),K[t]=null;At(q).forEach($),s.cubeCount=0,s.textureCount=0}function ie(){for(var t=0;t<Y;++t){var n=K[t];n&&(n.bindCount=0,n.unit=-1,K[t]=null)}At(q).forEach((function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;n<32;++n)if(0!=(t.mipmask&1<<n))if(t.target===vn)e.texImage2D(vn,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)e.texImage2D(gn+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);X(t.texInfo,t.target)}))}function ae(){for(var t=0;t<Y;++t){var n=K[t];n&&(n.bindCount=0,n.unit=-1,K[t]=null),e.activeTexture(_r+t),e.bindTexture(vn,null),e.bindTexture(mn,null)}}return n(Z.prototype,{bind:function(){var t=this;t.bindCount+=1;var n=t.unit;if(n<0){for(var r=0;r<Y;++r){var i=K[r];if(i){if(i.bindCount>0)continue;i.unit=-1}K[r]=t,n=r;break}n>=Y&&re.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<n+1&&(s.maxTextureUnits=n+1),t.unit=n,e.activeTexture(_r+n),e.bindTexture(t.target,t.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$(this)}}),u.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(q).forEach((function(t){e+=q[t].stats.size})),e}),{create2D:ee,createCube:te,clear:ne,getTexture:function(e){return null},restore:ie,refresh:ae}}Nr[Tn]=2,Nr[xn]=2,Nr[An]=2,Nr[Pn]=4,Nr[Mn]=.5,Nr[Dn]=.5,Nr[Fn]=1,Nr[Bn]=1,Nr[Un]=.5,Nr[jn]=1,Nr[Vn]=1,Nr[Hn]=.5,Nr[Gn]=.25,Nr[zn]=.5,Nr[Xn]=.25,Nr[Wn]=.5;var $r=36161,ei=32854,ti=32855,ni=36194,ri=33189,ii=36168,ai=34041,oi=35907,si=34836,ui=34842,ci=34843,li=[];function fi(e,t,n){return li[e]*t*n}li[ei]=2,li[ti]=2,li[ni]=2,li[ri]=2,li[ii]=1,li[ai]=4,li[oi]=4,li[si]=16,li[ui]=8,li[ci]=6;var hi=function(e,t,n,r,i){var a={rgba4:ei,rgb565:ni,"rgb5 a1":ti,depth:ri,stencil:ii,"depth stencil":ai};t.ext_srgb&&(a.srgba=oi),t.ext_color_buffer_half_float&&(a.rgba16f=ui,a.rgb16f=ci),t.webgl_color_buffer_float&&(a.rgba32f=si);var o=[];Object.keys(a).forEach((function(e){var t=a[e];o[t]=e}));var s=0,u={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=ei,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(t){var n=t.renderbuffer;re(n,"must not double destroy renderbuffer"),e.bindRenderbuffer($r,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete u[t.id],r.renderbufferCount--}function f(t,s){var l=new c(e.createRenderbuffer());function f(t,r){var s=0,u=0,c=ei;if("object"==typeof t&&t){var h=t;if("shape"in h){var p=h.shape;re(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],u=0|p[1]}else"radius"in h&&(s=u=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(u=0|h.height);"format"in h&&(re.parameter(h.format,a,"invalid renderbuffer format"),c=a[h.format])}else"number"==typeof t?(s=0|t,u="number"==typeof r?0|r:s):t?re.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(re(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,e.bindRenderbuffer($r,l.renderbuffer),e.renderbufferStorage($r,c,s,u),re(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=fi(l.format,l.width,l.height)),f.format=o[l.format],f}function h(t,r){var a=0|t,o=0|r||a;return a===l.width&&o===l.height||(re(a>0&&o>0&&a<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=a,f.height=l.height=o,e.bindRenderbuffer($r,l.renderbuffer),e.renderbufferStorage($r,l.format,a,o),re(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=fi(l.format,l.width,l.height))),f}return u[l.id]=l,r.renderbufferCount++,f(t,s),f.resize=h,f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f}function h(){At(u).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer($r,t.renderbuffer),e.renderbufferStorage($r,t.format,t.width,t.height)})),e.bindRenderbuffer($r,null)}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach((function(t){e+=u[t].stats.size})),e}),{create:f,clear:function(){At(u).forEach(l)},restore:h}},pi=36160,di=36161,vi=3553,mi=34069,gi=36064,yi=36096,bi=36128,_i=33306,Ei=36053,Si=36054,Ti=36055,xi=36057,Ai=36061,wi=36193,Oi=5121,Ci=5126,ki=6407,Ri=6408,Pi=6402,Ii=[ki,Ri],Ni=[];Ni[Ri]=4,Ni[ki]=3;var Li=[];Li[Oi]=1,Li[Ci]=4,Li[wi]=2;var Mi=33189,Di=36168,Fi=34041,Bi=[32854,32855,36194,35907,34842,34843,34836],Ui={};function ji(e,t,r,i,a,o){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&c.push("srgba"),t.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function p(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),a=Math.max(1,r.height);re(i===t&&a===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var o=e.renderbuffer._renderbuffer;re(o.width===t&&o.height===n,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function d(t,n){n&&(n.texture?e.framebufferTexture2D(pi,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(pi,t,di,n.renderbuffer._renderbuffer.renderbuffer))}function v(e){var t=vi,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),re.type(i,"function","invalid attachment data");var a=i._reglType;return"texture2d"===a?(n=i,re(t===vi)):"textureCube"===a?(n=i,re(t>=mi&&t<mi+6,"invalid cube map target")):"renderbuffer"===a?(r=i,t=di):re.raise("invalid regl object for attachment"),new f(t,n,r)}function m(e,t,n,r,o){if(n){var s=i.create2D({width:e,height:t,format:r,type:o});return s._texture.refCount=0,new f(vi,s,null)}var u=a.create({width:e,height:t,format:r});return u._renderbuffer.refCount=0,new f(di,null,u)}function g(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}t.oes_texture_half_float&&l.push("half float","float16"),t.oes_texture_float&&l.push("float","float32");var b=0,_={};function E(){this.id=b++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(e){e.colorAttachments.forEach(h),h(e.depthAttachment),h(e.stencilAttachment),h(e.depthStencilAttachment)}function T(t){var n=t.framebuffer;re(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,o.framebufferCount--,delete _[t.id]}function x(t){var n;e.bindFramebuffer(pi,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)d(gi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(pi,gi+n,vi,null,0);e.framebufferTexture2D(pi,_i,vi,null,0),e.framebufferTexture2D(pi,yi,vi,null,0),e.framebufferTexture2D(pi,bi,vi,null,0),d(yi,t.depthAttachment),d(bi,t.stencilAttachment),d(_i,t.depthStencilAttachment);var a=e.checkFramebufferStatus(pi);e.isContextLost()||a===Ei||re.raise("framebuffer configuration not supported, status = "+Ui[a]),e.bindFramebuffer(pi,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function A(e,i){var a=new E;function f(e,n){var i;re(s.next!==a,"can not update framebuffer which is currently in use");var o=0,h=0,d=!0,y=!0,b=null,_=!0,E="rgba",T="uint8",A=1,w=null,O=null,C=null,k=!1;if("number"==typeof e)o=0|e,h=0|n||o;else if(e){re.type(e,"object","invalid arguments for framebuffer");var R=e;if("shape"in R){var P=R.shape;re(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),o=P[0],h=P[1]}else"radius"in R&&(o=h=R.radius),"width"in R&&(o=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&re(1===b.length||t.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(A=0|R.colorCount,re(A>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,E="rgba4"),"colorType"in R&&(T=R.colorType,_?(re(t.oes_texture_float||!("float"===T||"float32"===T),"you must enable OES_texture_float in order to use floating point framebuffer objects"),re(t.oes_texture_half_float||!("half float"===T||"float16"===T),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===T||"float16"===T?(re(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f"):"float"!==T&&"float32"!==T||(re(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),E="rgba32f"),re.oneOf(T,l,"invalid color type")),"colorFormat"in R&&(E=R.colorFormat,u.indexOf(E)>=0?_=!0:c.indexOf(E)>=0?_=!1:re.optional((function(){_?re.oneOf(R.colorFormat,u,"invalid color format for texture"):re.oneOf(R.colorFormat,c,"invalid color format for renderbuffer")})))),("depthTexture"in R||"depthStencilTexture"in R)&&(k=!(!R.depthTexture&&!R.depthStencilTexture),re(!k||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(w=R.depth,y=!1)),"stencil"in R&&("boolean"==typeof R.stencil?y=R.stencil:(O=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=y=R.depthStencil:(C=R.depthStencil,d=!1,y=!1))}else o=h=1;var I=null,N=null,L=null,M=null;if(Array.isArray(b))I=b.map(v);else if(b)I=[v(b)];else for(I=new Array(A),i=0;i<A;++i)I[i]=m(o,h,_,E,T);re(t.webgl_draw_buffers||I.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),re(I.length<=r.maxColorAttachments,"too many color attachments, not supported"),o=o||I[0].width,h=h||I[0].height,w?N=v(w):d&&!y&&(N=m(o,h,k,"depth","uint32")),O?L=v(O):y&&!d&&(L=m(o,h,!1,"stencil","uint8")),C?M=v(C):!w&&!O&&y&&d&&(M=m(o,h,k,"depth stencil","depth stencil")),re(!!w+!!O+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(i=0;i<I.length;++i)if(p(I[i],o,h),re(!I[i]||I[i].texture&&Ii.indexOf(I[i].texture._texture.format)>=0||I[i].renderbuffer&&Bi.indexOf(I[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),I[i]&&I[i].texture){var F=Ni[I[i].texture._texture.format]*Li[I[i].texture._texture.type];null===D?D=F:re(D===F,"all color attachments much have the same number of bits per pixel.")}return p(N,o,h),re(!N||N.texture&&N.texture._texture.format===Pi||N.renderbuffer&&N.renderbuffer._renderbuffer.format===Mi,"invalid depth attachment for framebuffer object"),p(L,o,h),re(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Di,"invalid stencil attachment for framebuffer object"),p(M,o,h),re(!M||M.texture&&M.texture._texture.format===Fi||M.renderbuffer&&M.renderbuffer._renderbuffer.format===Fi,"invalid depth-stencil attachment for framebuffer object"),S(a),a.width=o,a.height=h,a.colorAttachments=I,a.depthAttachment=N,a.stencilAttachment=L,a.depthStencilAttachment=M,f.color=I.map(g),f.depth=g(N),f.stencil=g(L),f.depthStencil=g(M),f.width=a.width,f.height=a.height,x(a),f}function h(e,t){re(s.next!==a,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===a.width&&r===a.height)return f;for(var i=a.colorAttachments,o=0;o<i.length;++o)y(i[o],n,r);return y(a.depthAttachment,n,r),y(a.stencilAttachment,n,r),y(a.depthStencilAttachment,n,r),a.width=f.width=n,a.height=f.height=r,x(a),f}return o.framebufferCount++,f(e,i),n(f,{resize:h,_reglType:"framebuffer",_framebuffer:a,destroy:function(){T(a),S(a)},use:function(e){s.setFBO({framebuffer:f},e)}})}function w(e){var a=Array(6);function o(e){var r;re(a.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},h=0,p=null,d="rgba",v="uint8",m=1;if("number"==typeof e)h=0|e;else if(e){re.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var y=g.shape;re(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),re(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in g&&(h=0|g.radius),"width"in g?(h=0|g.width,"height"in g&&re(g.height===h,"must be square")):"height"in g&&(h=0|g.height);("color"in g||"colors"in g)&&(p=g.color||g.colors,Array.isArray(p)&&re(1===p.length||t.webgl_draw_buffers,"multiple render targets not supported")),p||("colorCount"in g&&(m=0|g.colorCount,re(m>0,"invalid color buffer count")),"colorType"in g&&(re.oneOf(g.colorType,l,"invalid color type"),v=g.colorType),"colorFormat"in g&&(d=g.colorFormat,re.oneOf(g.colorFormat,u,"invalid color format for texture"))),"depth"in g&&(f.depth=g.depth),"stencil"in g&&(f.stencil=g.stencil),"depthStencil"in g&&(f.depthStencil=g.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(c=[],r=0;r<p.length;++r)c[r]=p[r];else c=[p];else{c=Array(m);var b={radius:h,format:d,type:v};for(r=0;r<m;++r)c[r]=i.createCube(b)}for(f.color=Array(c.length),r=0;r<c.length;++r){var _=c[r];re("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,re(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:mi,data:c[r]}}for(r=0;r<6;++r){for(var E=0;E<c.length;++E)f.color[E].target=mi+r;r>0&&(f.depth=a[0].depth,f.stencil=a[0].stencil,f.depthStencil=a[0].depthStencil),a[r]?a[r](f):a[r]=A(f)}return n(o,{width:h,height:h,color:c})}function c(e){var t,n=0|e;if(re(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===o.width)return o;var i=o.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)a[t].resize(n);return o.width=o.height=n,o}return o(e),n(o,{faces:a,resize:c,_reglType:"framebufferCube",destroy:function(){a.forEach((function(e){e.destroy()}))}})}function O(){s.cur=null,s.next=null,s.dirty=!0,At(_).forEach((function(t){t.framebuffer=e.createFramebuffer(),x(t)}))}return n(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof E)return t}return null},create:A,createCube:w,clear:function(){At(_).forEach(T)},restore:O})}Ui[Ei]="complete",Ui[Si]="incomplete attachment",Ui[xi]="incomplete dimensions",Ui[Ti]="incomplete, missing attachment",Ui[Ai]="unsupported";var Vi=5126,Hi=34962,Gi=34963,zi=["attributes","elements","offset","count","primitive","instances"];function Xi(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Vi,this.offset=0,this.stride=0,this.divisor=0}function Wi(e,n,r,i,a,o,s){for(var u=r.maxAttributes,c=new Array(u),l=0;l<u;++l)c[l]=new Xi;var f=0,h={},p={Record:Xi,scope:{},state:c,currentVAO:null,targetVAO:null,restore:v()?S:function(){},createVAO:T,getVAO:g,destroyBuffer:d,setVAO:v()?y:b,clear:v()?_:function(){}};function d(t){for(var n=0;n<c.length;++n){var r=c[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function v(){return n.oes_vertex_array_object}function m(){return n.angle_instanced_arrays}function g(e){return"function"==typeof e&&e._vao?e._vao:null}function y(e){if(e!==p.currentVAO){var t=v();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),p.currentVAO=e}}function b(t){if(t!==p.currentVAO){if(t)t.bindAttrs();else{for(var n=m(),r=0;r<c.length;++r){var i=c[r];i.buffer?(e.enableVertexAttribArray(r),i.buffer.bind(),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}s.elements?e.bindBuffer(Gi,s.elements.buffer.buffer):e.bindBuffer(Gi,null)}p.currentVAO=t}}function _(){At(h).forEach((function(e){e.destroy()}))}function E(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=v();this.vao=e?e.createVertexArrayOES():null,h[this.id]=this,this.buffers=[]}function S(){v()&&At(h).forEach((function(e){e.refresh()}))}function T(e){var r=new E;function s(e){var i;if(Array.isArray(e))i=e,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(re("object"==typeof e,"invalid arguments for create vao"),re("attributes"in e,"must specify attributes for vao"),e.elements){var c=e.elements;r.ownsElements?"function"==typeof c&&"elements"===c._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(c),r.ownsElements=!1):o.getElements(e.elements)?(r.elements=e.elements,r.ownsElements=!1):(r.elements=o.create(e.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;i=e.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in e&&(r.offset=0|e.offset),"count"in e&&(r.count=0|e.count),"instances"in e&&(r.instances=0|e.instances),"primitive"in e&&(re(e.primitive in qt,"bad primitive type: "+e.primitive),r.primitive=qt[e.primitive]),re.optional((()=>{for(var t=Object.keys(e),n=0;n<t.length;++n)re(zi.indexOf(t[n])>=0,'invalid option for vao: "'+t[n]+'" valid options are '+zi)})),re(Array.isArray(i),"attributes must be an array")}re(i.length<u,"too many attributes"),re(i.length>0,"must specify at least one attribute");var l={},f=r.attributes;f.length=i.length;for(var h=0;h<i.length;++h){var p,d=i[h],v=f[h]=new Xi,m=d.data||d;Array.isArray(m)||t(m)||xt(m)?(r.buffers[h]&&(p=r.buffers[h],t(m)&&p._buffer.byteLength>=m.byteLength?p.subdata(m):(p.destroy(),r.buffers[h]=null)),r.buffers[h]||(p=r.buffers[h]=a.create(d,Hi,!1,!0)),v.buffer=a.getBuffer(p),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1,l[h]=1):a.getBuffer(d)?(v.buffer=a.getBuffer(d),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1):a.getBuffer(d.buffer)?(v.buffer=a.getBuffer(d.buffer),v.size=0|(+d.size||v.buffer.dimension),v.normalized=!!d.normalized||!1,"type"in d?(re.parameter(d.type,Lt,"invalid buffer type"),v.type=Lt[d.type]):v.type=v.buffer.dtype,v.offset=0|(d.offset||0),v.stride=0|(d.stride||0),v.divisor=0|(d.divisor||0),v.state=1,re(v.size>=1&&v.size<=4,"size must be between 1 and 4"),re(v.offset>=0,"invalid offset"),re(v.stride>=0&&v.stride<=255,"stride must be between 0 and 255"),re(v.divisor>=0,"divisor must be positive"),re(!v.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(re(h>0,"first attribute must not be a constant"),v.x=+d.x||0,v.y=+d.y||0,v.z=+d.z||0,v.w=+d.w||0,v.state=2):re(!1,"invalid attribute spec for location "+h)}for(var g=0;g<r.buffers.length;++g)!l[g]&&r.buffers[g]&&(r.buffers[g].destroy(),r.buffers[g]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(e)}return E.prototype.bindAttrs=function(){for(var t=m(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(Hi,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var a=n.length;a<u;++a)e.disableVertexAttribArray(a);var s=o.getElements(this.elements);s?e.bindBuffer(Gi,s.buffer.buffer):e.bindBuffer(Gi,null)},E.prototype.refresh=function(){var e=v();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),p.currentVAO=null,e.bindVertexArrayOES(null))},E.prototype.destroy=function(){if(this.vao){var e=v();this===p.currentVAO&&(p.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),h[this.id]&&(delete h[this.id],i.vaoCount-=1)},p}var qi=35632,Yi=35633,Ki=35718,Zi=35721;function Qi(e,t,r,i){var a={},o={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(n,r,i){var s=n===qi?a:o,u=s[r];if(!u){var c=t.str(r);u=e.createShader(n),e.shaderSource(u,c),e.compileShader(u),re.shaderError(e,u,c,n,i),s[r]=u}return u}var l={},f=[],h=0;function p(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(n,r,a){var o,l,f=c(qi,n.fragId),h=c(Yi,n.vertId),p=n.program=e.createProgram();if(e.attachShader(p,f),e.attachShader(p,h),a)for(o=0;o<a.length;++o){var d=a[o];e.bindAttribLocation(p,d[0],d[1])}e.linkProgram(p),re.linkError(e,p,t.str(n.fragId),t.str(n.vertId),r);var v=e.getProgramParameter(p,Ki);i.profile&&(n.stats.uniformsCount=v);var m=n.uniforms;for(o=0;o<v;++o)if(l=e.getActiveUniform(p,o))if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");u(m,new s(y,t.id(y),e.getUniformLocation(p,y),l))}else u(m,new s(l.name,t.id(l.name),e.getUniformLocation(p,l.name),l));var b=e.getProgramParameter(p,Zi);i.profile&&(n.stats.attributesCount=b);var _=n.attributes;for(o=0;o<b;++o)(l=e.getActiveAttrib(p,o))&&u(_,new s(l.name,t.id(l.name),e.getAttribLocation(p,l.name),l))}function v(){a={},o={};for(var e=0;e<f.length;++e)d(f[e],null,f[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);At(a).forEach(t),a={},At(o).forEach(t),o={},f.forEach((function(t){e.deleteProgram(t.program)})),f.length=0,l={},r.shaderCount=0},program:function(t,i,s,u){re.command(t>=0,"missing vertex shader",s),re.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var h=c[t];if(h&&(h.refCount++,!u))return h;var v=new p(i,t);return r.shaderCount++,d(v,s,u),h||(c[t]=v),f.push(v),n(v,{destroy:function(){if(v.refCount--,v.refCount<=0){e.deleteProgram(v.program);var t=f.indexOf(v);f.splice(t,1),r.shaderCount--}c[v.vertId].refCount<=0&&(e.deleteShader(o[v.vertId]),delete o[v.vertId],delete l[v.fragId][v.vertId]),Object.keys(l[v.fragId]).length||(e.deleteShader(a[v.fragId]),delete a[v.fragId],delete l[v.fragId])}})},restore:v,shader:c,frag:-1,vert:-1}}var Ji=6408,$i=5121,ea=3333,ta=5126;function na(e,n,r,i,a,o,s){function u(u){var c;null===n.next?(re(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=$i):(re(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,re.optional((function(){o.oes_texture_float?(re(c===$i||c===ta,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===ta&&re(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):re(c===$i,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var l=0,f=0,h=i.framebufferWidth,p=i.framebufferHeight,d=null;t(u)?d=u:u&&(re.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,re(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),re(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||i.framebufferWidth-l),p=0|(u.height||i.framebufferHeight-f),d=u.data||null),d&&(c===$i?re(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===ta&&re(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),re(h>0&&h+l<=i.framebufferWidth,"invalid width for read pixels"),re(p>0&&p+f<=i.framebufferHeight,"invalid height for read pixels"),r();var v=h*p*4;return d||(c===$i?d=new Uint8Array(v):c===ta&&(d=d||new Float32Array(v))),re.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),re(d.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(ea,4),e.readPixels(l,f,h,p,Ji,c,d),d}function c(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=u(e)})),t}function l(e){return e&&"framebuffer"in e?c(e):u(e)}return l}function ra(e){return Array.prototype.slice.call(e)}function ia(e){return ra(e).join("")}function aa(){var t=0,r=[],i=[];function a(e){for(var n=0;n<i.length;++n)if(i[n]===e)return r[n];var a="g"+t++;return r.push(a),i.push(e),a}function o(){var e=[];function r(){e.push.apply(e,ra(arguments))}var i=[];function a(){var n="v"+t++;return i.push(n),arguments.length>0&&(e.push(n,"="),e.push.apply(e,ra(arguments)),e.push(";")),n}return n(r,{def:a,toString:function(){return ia([i.length>0?"var "+i.join(",")+";":"",ia(e)])}})}function s(){var e=o(),t=o(),r=e.toString,i=t.toString;function a(n,r){t(n,r,"=",e.def(n,r),";")}return n((function(){e.apply(e,ra(arguments))}),{def:e.def,entry:e,exit:t,save:a,set:function(t,n,r){a(t,n),e(t,n,"=",r,";")},toString:function(){return r()+i()}})}function u(){var e=ia(arguments),t=s(),r=s(),i=t.toString,a=r.toString;return n(t,{then:function(){return t.apply(t,ra(arguments)),this},else:function(){return r.apply(r,ra(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),ia(["if(",e,"){",i(),"}",t])}})}var c=o(),l={};function f(e,t){var r=[];function i(){var e="a"+r.length;return r.push(e),e}t=t||0;for(var a=0;a<t;++a)i();var o=s(),u=o.toString;return l[e]=n(o,{arg:i,toString:function(){return ia(["function(",r.join(),"){",u(),"}"])}})}function h(){var t=['"use strict";',c,"return {"];Object.keys(l).forEach((function(e){t.push('"',e,'":',l[e].toString(),",")})),t.push("}");var n=ia(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return("undefined"!=typeof my&&my&&"function"==typeof my.showToast?e.Function.apply(null,r.concat(n)):Function.apply(null,r.concat(n))).apply(null,i)}return{global:c,link:a,block:o,proc:f,scope:s,cond:u,compile:h}}var oa="xyzw".split(""),sa=5121,ua=1,ca=2,la=0,fa=1,ha=2,pa=3,da=4,va=5,ma=6,ga="dither",ya="blend.enable",ba="blend.color",_a="blend.equation",Ea="blend.func",Sa="depth.enable",Ta="depth.func",xa="depth.range",Aa="depth.mask",wa="colorMask",Oa="cull.enable",Ca="cull.face",ka="frontFace",Ra="lineWidth",Pa="polygonOffset.enable",Ia="polygonOffset.offset",Na="sample.alpha",La="sample.enable",Ma="sample.coverage",Da="stencil.enable",Fa="stencil.mask",Ba="stencil.func",Ua="stencil.opFront",ja="stencil.opBack",Va="scissor.enable",Ha="scissor.box",Ga="viewport",za="profile",Xa="framebuffer",Wa="vert",qa="frag",Ya="elements",Ka="primitive",Za="count",Qa="offset",Ja="instances",$a="vao",eo="Width",to="Height",no=Xa+eo,ro=Xa+to,io=Ga+eo,ao=Ga+to,oo="drawingBuffer",so=oo+eo,uo=oo+to,co=[Ea,_a,Ba,Ua,ja,Ma,Ga,Ha,Ia],lo=34962,fo=34963,ho=3553,po=34067,vo=2884,mo=3042,go=3024,yo=2960,bo=2929,_o=3089,Eo=32823,So=32926,To=32928,xo=5126,Ao=35664,wo=35665,Oo=35666,Co=5124,ko=35667,Ro=35668,Po=35669,Io=35670,No=35671,Lo=35672,Mo=35673,Do=35674,Fo=35675,Bo=35676,Uo=35678,jo=35680,Vo=4,Ho=1028,Go=1029,zo=2304,Xo=2305,Wo=32775,qo=32776,Yo=519,Ko=7680,Zo=0,Qo=1,Jo=32774,$o=513,es=36160,ts=36064,ns={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rs=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],is={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},as={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},os={frag:35632,vert:35633},ss={cw:zo,ccw:Xo};function us(e){return Array.isArray(e)||t(e)||xt(e)}function cs(e){return e.sort((function(e,t){return e===Ga?-1:t===Ga?1:e<t?-1:1}))}function ls(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function fs(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function hs(e){return new ls(!1,!1,!1,e)}function ps(e,t){var n=e.type;if(n===la){var r=e.data.length;return new ls(!0,r>=1,r>=2,t)}if(n===da){var i=e.data;return new ls(i.thisDep,i.contextDep,i.propDep,t)}if(n===va)return new ls(!1,!1,!1,t);if(n===ma){for(var a=!1,o=!1,s=!1,u=0;u<e.data.length;++u){var c=e.data[u];if(c.type===fa)s=!0;else if(c.type===ha)o=!0;else if(c.type===pa)a=!0;else if(c.type===la){a=!0;var l=c.data;l>=1&&(o=!0),l>=2&&(s=!0)}else c.type===da&&(a=a||c.data.thisDep,o=o||c.data.contextDep,s=s||c.data.propDep)}return new ls(a,o,s,t)}return new ls(n===pa,n===ha,n===fa,t)}var ds=new ls(!1,!1,!1,(function(){}));function vs(e,t,r,i,a,o,s,u,c,l,f,h,p,d,v){var m=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=Wo,g.max=qo);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_=r.oes_vertex_array_object,E={dirty:!0,profile:v.profile},S={},T=[],x={},A={};function w(e){return e.replace(".","_")}function O(e,t,n){var r=w(e);T.push(e),S[r]=E[r]=!!n,x[r]=t}function C(e,t,n){var r=w(e);T.push(e),Array.isArray(n)?(E[r]=n.slice(),S[r]=n.slice()):E[r]=S[r]=n,A[r]=t}O(ga,go),O(ya,mo),C(ba,"blendColor",[0,0,0,0]),C(_a,"blendEquationSeparate",[Jo,Jo]),C(Ea,"blendFuncSeparate",[Qo,Zo,Qo,Zo]),O(Sa,bo,!0),C(Ta,"depthFunc",$o),C(xa,"depthRange",[0,1]),C(Aa,"depthMask",!0),C(wa,wa,[!0,!0,!0,!0]),O(Oa,vo),C(Ca,"cullFace",Go),C(ka,ka,Xo),C(Ra,Ra,1),O(Pa,Eo),C(Ia,"polygonOffset",[0,0]),O(Na,So),O(La,To),C(Ma,"sampleCoverage",[1,!1]),O(Da,yo),C(Fa,"stencilMask",-1),C(Ba,"stencilFunc",[Yo,0,-1]),C(Ua,"stencilOpSeparate",[Ho,Ko,Ko,Ko]),C(ja,"stencilOpSeparate",[Go,Ko,Ko,Ko]),O(Va,_o),C(Ha,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),C(Ga,Ga,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var k={gl:e,context:p,strings:t,next:S,current:E,draw:h,elements:o,buffer:a,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:d,isBufferArgs:us},R={primTypes:qt,compareFuncs:is,blendFuncs:ns,blendEquations:g,stencilOps:as,glTypes:Lt,orientationType:ss};re.optional((function(){k.isArrayLike=hn})),b&&(R.backBuffer=[Go],R.drawBuffer=Oe(i.maxDrawbuffers,(function(e){return 0===e?[0]:Oe(e,(function(e){return ts+e}))})));var P=0;function I(){var e=aa(),n=e.link,r=e.global;e.id=P++,e.batchId="0";var i=n(k),a=e.shared={props:"a0"};Object.keys(k).forEach((function(e){a[e]=r.def(i,".",e)})),re.optional((function(){e.CHECK=n(re),e.commandStr=re.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},R.invalidBlendCombinations=rs}));var o=e.next={},s=e.current={};Object.keys(A).forEach((function(e){Array.isArray(E[e])&&(o[e]=r.def(a.next,".",e),s[e]=r.def(a.current,".",e))}));var u=e.constants={};Object.keys(R).forEach((function(e){u[e]=r.def(JSON.stringify(R[e]))})),e.invoke=function(t,r){switch(r.type){case la:var i=["this",a.context,a.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case fa:return t.def(a.props,r.data);case ha:return t.def(a.context,r.data);case pa:return t.def("this",r.data);case da:return r.data.append(e,t),r.data.ref;case va:return r.data.toString();case ma:return r.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var r=t.id(e);if(r in c)return c[r];var i=l.scope[r];return i||(i=l.scope[r]=new m),c[r]=n(i)},e}function N(e){var t,n=e.static,r=e.dynamic;if(za in n){var i=!!n[za];(t=hs((function(e,t){return i}))).enable=i}else if(za in r){var a=r[za];t=ps(a,(function(e,t){return e.invoke(t,a)}))}return t}function L(e,t){var n=e.static,r=e.dynamic;if(Xa in n){var i=n[Xa];return i?(i=u.getFramebuffer(i),re.command(i,"invalid framebuffer object"),hs((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var a=r.context;return t.set(a,"."+no,n+".width"),t.set(a,"."+ro,n+".height"),n}))):hs((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+no,r+"."+so),t.set(r,"."+ro,r+"."+uo),"null"}))}if(Xa in r){var a=r[Xa];return ps(a,(function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer,o=t.def(i,".getFramebuffer(",n,")");re.optional((function(){e.assert(t,"!"+n+"||"+o,"invalid framebuffer object")})),t.set(i,".next",o);var s=r.context;return t.set(s,"."+no,o+"?"+o+".width:"+s+"."+so),t.set(s,"."+ro,o+"?"+o+".height:"+s+"."+uo),o}))}return null}function M(e,t,n){var r=e.static,i=e.dynamic;function a(e){if(e in r){var a=r[e];re.commandType(a,"object","invalid "+e,n.commandStr);var o,s,u=!0,c=0|a.x,l=0|a.y;return"width"in a?(o=0|a.width,re.command(o>=0,"invalid "+e,n.commandStr)):u=!1,"height"in a?(s=0|a.height,re.command(s>=0,"invalid "+e,n.commandStr)):u=!1,new ls(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=o;"width"in a||(r=t.def(n,".",no,"-",c));var i=s;return"height"in a||(i=t.def(n,".",ro,"-",l)),[c,l,r,i]}))}if(e in i){var f=i[e],h=ps(f,(function(t,n){var r=t.invoke(n,f);re.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=t.shared.context,a=n.def(r,".x|0"),o=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",no,"-",a,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",ro,"-",o,")");return re.optional((function(){t.assert(n,s+">=0&&"+u+">=0","invalid "+e)})),[a,o,s,u]}));return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new ls(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",no),t.def(n,".",ro)]})):null}var o=a(Ga);if(o){var s=o;o=new ls(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+io,n[2]),t.set(r,"."+ao,n[3]),n}))}return{viewport:o,scissor_box:a(Ha)}}function D(e,t){var n=e.static;if("string"==typeof n[qa]&&"string"==typeof n[Wa]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var a=[],o=0;o<i.length;++o)re("number"==typeof r[i[o]],"must specify all vertex attribute locations when using vaos"),a.push([0|r[i[o]],i[o]]);return a}}return null}function F(e,n,r){var i=e.static,a=e.dynamic;function o(e){if(e in i){var n=t.id(i[e]);re.optional((function(){f.shader(os[e],n,re.guessCommand())}));var r=hs((function(){return n}));return r.id=n,r}if(e in a){var o=a[e];return ps(o,(function(t,n){var r=t.invoke(n,o),i=n.def(t.shared.strings,".id(",r,")");return re.optional((function(){n(t.shared.shader,".shader(",os[e],",",i,",",t.command,");")})),i}))}return null}var s,u=o(qa),c=o(Wa),l=null;return fs(u)&&fs(c)?(l=f.program(c.id,u.id,null,r),s=hs((function(e,t){return e.link(l)}))):s=new ls(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(e,t){var n,r=e.shared.shader;n=u?u.append(e,t):t.def(r,".",qa);var i=r+".program("+(c?c.append(e,t):t.def(r,".",Wa))+","+n;return re.optional((function(){i+=","+e.command})),t.def(i+")")})),{frag:u,vert:c,progVar:s,program:l}}function B(e,t){var n=e.static,r=e.dynamic,i={},a=!1;function s(){if($a in n){var e=n[$a];return null!==e&&null===l.getVAO(e)&&(e=l.createVAO(e)),a=!0,i.vao=e,hs((function(t){var n=l.getVAO(e);return n?t.link(n):"null"}))}if($a in r){a=!0;var t=r[$a];return ps(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}var u=s(),c=!1;function f(){if(Ya in n){var e=n[Ya];if(i.elements=e,us(e)){var s=i.elements=o.create(e,!0);e=o.getElements(s),c=!0}else e&&(e=o.getElements(e),c=!0,re.command(e,"invalid elements",t.commandStr));var l=hs((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return l.value=e,l}if(Ya in r){c=!0;var f=r[Ya];return ps(f,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,f),o=t.def("null"),s=t.def(r,"(",a,")"),u=e.cond(s).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");");return re.optional((function(){e.assert(u.else,"!"+a+"||"+o,"invalid elements")})),t.entry(u),t.exit(e.cond(s).then(i,".destroyStream(",o,");")),e.ELEMENTS=o,o}))}return a?new ls(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}var h=f();function p(){if(Ka in n){var e=n[Ka];return i.primitive=e,re.commandParameter(e,qt,"invalid primitve",t.commandStr),hs((function(t,n){return qt[e]}))}if(Ka in r){var o=r[Ka];return ps(o,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,o);return re.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(qt))})),t.def(n,"[",r,"]")}))}return c?fs(h)?h.value?hs((function(e,t){return t.def(e.ELEMENTS,".primType")})):hs((function(){return Vo})):new ls(h.thisDep,h.contextDep,h.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Vo)})):a?new ls(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:"+Vo)})):null}function d(e,o){if(e in n){var s=0|n[e];return o?i.offset=s:i.instances=s,re.command(!o||s>=0,"invalid "+e,t.commandStr),hs((function(e,t){return o&&(e.OFFSET=s),s}))}if(e in r){var l=r[e];return ps(l,(function(t,n){var r=t.invoke(n,l);return o&&(t.OFFSET=r,re.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}if(o){if(c)return hs((function(e,t){return e.OFFSET=0,0}));if(a)return new ls(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(a)return new ls(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var v=d(Qa,!0);function m(){if(Za in n){var e=0|n[Za];return i.count=e,re.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),hs((function(){return e}))}if(Za in r){var o=r[Za];return ps(o,(function(e,t){var n=e.invoke(t,o);return re.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(c){if(fs(h)){if(h)return v?new ls(v.thisDep,v.contextDep,v.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return re.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):hs((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var s=hs((function(){return-1}));return re.optional((function(){s.MISSING=!0})),s}var l=new ls(h.thisDep||v.thisDep,h.contextDep||v.contextDep,h.propDep||v.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return re.optional((function(){l.DYNAMIC=!0})),l}return a?new ls(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")})):null}var g=p(),y=m(),b=d(Ja,!1);return{elements:h,primitive:g,count:y,instances:b,offset:v,vao:u,vaoActive:a,elementsActive:c,static:i}}function U(e,t){var n=e.static,r=e.dynamic,a={};return T.forEach((function(e){var o=w(e);function s(t,i){if(e in n){var s=t(n[e]);a[o]=hs((function(){return s}))}else if(e in r){var u=r[e];a[o]=ps(u,(function(e,t){return i(e,t,e.invoke(t,u))}))}}switch(e){case Oa:case ya:case ga:case Da:case Sa:case Va:case Pa:case Na:case La:case Aa:return s((function(n){return re.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return re.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case Ta:return s((function(n){return re.commandParameter(n,is,"invalid "+e,t.commandStr),is[n]}),(function(t,n,r){var i=t.constants.compareFuncs;return re.optional((function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(is))})),n.def(i,"[",r,"]")}));case xa:return s((function(e){return re.command(hn(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return re.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case Ea:return s((function(e){re.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,a="dstAlpha"in e?e.dstAlpha:e.dst;return re.commandParameter(n,ns,o+".srcRGB",t.commandStr),re.commandParameter(r,ns,o+".srcAlpha",t.commandStr),re.commandParameter(i,ns,o+".dstRGB",t.commandStr),re.commandParameter(a,ns,o+".dstAlpha",t.commandStr),re.command(-1===rs.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[ns[n],ns[i],ns[r],ns[a]]}),(function(t,n,r){var i=t.constants.blendFuncs;function a(a,o){var s=n.def('"',a,o,'" in ',r,"?",r,".",a,o,":",r,".",a);return re.optional((function(){t.assert(n,s+" in "+i,"invalid "+e+"."+a+o+", must be one of "+Object.keys(ns))})),s}re.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var o=a("src","RGB"),s=a("dst","RGB");re.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+o+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",o,"]"),c=n.def(i,"[",a("src","Alpha"),"]");return[u,n.def(i,"[",s,"]"),c,n.def(i,"[",a("dst","Alpha"),"]")]}));case _a:return s((function(n){return"string"==typeof n?(re.commandParameter(n,g,"invalid "+e,t.commandStr),[g[n],g[n]]):"object"==typeof n?(re.commandParameter(n.rgb,g,e+".rgb",t.commandStr),re.commandParameter(n.alpha,g,e+".alpha",t.commandStr),[g[n.rgb],g[n.alpha]]):void re.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var i=t.constants.blendEquations,a=n.def(),o=n.def(),s=t.cond("typeof ",r,'==="string"');return re.optional((function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(g))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(a,"=",o,"=",i,"[",r,"];"),s.else(a,"=",i,"[",r,".rgb];",o,"=",i,"[",r,".alpha];"),n(s),[a,o]}));case ba:return s((function(e){return re.command(hn(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),Oe(4,(function(t){return+e[t]}))}),(function(e,t,n){return re.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Oe(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case Fa:return s((function(e){return re.commandType(e,"number",o,t.commandStr),0|e}),(function(e,t,n){return re.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case Ba:return s((function(n){re.commandType(n,"object",o,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,a="mask"in n?n.mask:-1;return re.commandParameter(r,is,e+".cmp",t.commandStr),re.commandType(i,"number",e+".ref",t.commandStr),re.commandType(a,"number",e+".mask",t.commandStr),[is[r],i,a]}),(function(e,t,n){var r=e.constants.compareFuncs;return re.optional((function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Ko),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Ua:case ja:return s((function(n){re.commandType(n,"object",o,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",a=n.zpass||"keep";return re.commandParameter(r,as,e+".fail",t.commandStr),re.commandParameter(i,as,e+".zfail",t.commandStr),re.commandParameter(a,as,e+".zpass",t.commandStr),[e===ja?Go:Ho,as[r],as[i],as[a]]}),(function(t,n,r){var i=t.constants.stencilOps;function a(a){return re.optional((function(){t.assert(n,'!("'+a+'" in '+r+")||("+r+"."+a+" in "+i+")","invalid "+e+"."+a+", must be one of "+Object.keys(as))})),n.def('"',a,'" in ',r,"?",i,"[",r,".",a,"]:",Ko)}return re.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===ja?Go:Ho,a("fail"),a("zfail"),a("zpass")]}));case Ia:return s((function(e){re.commandType(e,"object",o,t.commandStr);var n=0|e.factor,r=0|e.units;return re.commandType(n,"number",o+".factor",t.commandStr),re.commandType(r,"number",o+".units",t.commandStr),[n,r]}),(function(t,n,r){return re.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Ca:return s((function(e){var n=0;return"front"===e?n=Ho:"back"===e&&(n=Go),re.command(!!n,o,t.commandStr),n}),(function(e,t,n){return re.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',Ho,":",Go)}));case Ra:return s((function(e){return re.command("number"==typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return re.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case ka:return s((function(e){return re.commandParameter(e,ss,o,t.commandStr),ss[e]}),(function(e,t,n){return re.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?'+zo+":"+Xo)}));case wa:return s((function(e){return re.command(hn(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return re.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Oe(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Ma:return s((function(e){re.command("object"==typeof e&&e,o,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return re.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return re.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),a}function j(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var r,a=n[e];if("number"==typeof a||"boolean"==typeof a)r=hs((function(){return a}));else if("function"==typeof a){var o=a._reglType;"texture2d"===o||"textureCube"===o?r=hs((function(e){return e.link(a)})):"framebuffer"===o||"framebufferCube"===o?(re.command(a.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=hs((function(e){return e.link(a.color[0])}))):re.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else hn(a)?r=hs((function(t){return t.global.def("[",Oe(a.length,(function(n){return re.command("number"==typeof a[n]||"boolean"==typeof a[n],"invalid uniform "+e,t.commandStr),a[n]})),"]")})):re.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=a,i[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=ps(t,(function(e,n){return e.invoke(n,t)}))})),i}function V(e,n){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach((function(e){var i=r[e],s=t.id(e),u=new m;if(us(i))u.state=ua,u.buffer=a.getBuffer(a.create(i,lo,!1,!0)),u.type=0;else{var c=a.getBuffer(i);if(c)u.state=ua,u.buffer=c,u.type=0;else if(re.command("object"==typeof i&&i,"invalid data for attribute "+e,n.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=ca,"number"==typeof l?u.x=l:(re.command(hn(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+e,n.commandStr),oa.forEach((function(e,t){t<l.length&&(u[e]=l[t])})))}else{c=us(i.buffer)?a.getBuffer(a.create(i.buffer,lo,!1,!0)):a.getBuffer(i.buffer),re.command(!!c,'missing buffer for attribute "'+e+'"',n.commandStr);var f=0|i.offset;re.command(f>=0,'invalid offset for attribute "'+e+'"',n.commandStr);var h=0|i.stride;re.command(h>=0&&h<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|i.size;re.command(!("size"in i)||p>0&&p<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',n.commandStr);var d=!!i.normalized,v=0;"type"in i&&(re.commandParameter(i.type,Lt,"invalid type for attribute "+e,n.commandStr),v=Lt[i.type]);var g=0|i.divisor;re.optional((function(){"divisor"in i&&(re.command(0===g||y,'cannot specify divisor for attribute "'+e+'", instancing not supported',n.commandStr),re.command(g>=0,'invalid divisor for attribute "'+e+'"',n.commandStr));var t=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(n){re.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",t)}))})),u.buffer=c,u.state=ua,u.size=p,u.normalized=d,u.type=v||c.dtype,u.offset=f,u.stride=h,u.divisor=g}}o[e]=hs((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(e){r[e]=u[e]})),u.buffer&&(r.buffer=e.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(n,r){var i=n.invoke(r,t),a=n.shared,o=n.constants,s=a.isBufferArgs,u=a.buffer;re.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+a.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')}));var c={isStream:r.def(!1)},l=new m;l.state=ua,Object.keys(l).forEach((function(e){c[e]=r.def(""+l[e])}));var f=c.buffer,h=c.type;function p(e){r(c[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",lo,",",i,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",ca,";","if(typeof "+i+'.constant === "number"){',c[oa[0]],"=",i,".constant;",oa.slice(1).map((function(e){return c[e]})).join("="),"=0;","}else{",oa.map((function(e,t){return c[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",lo,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c}o[e]=ps(t,n)})),o}function H(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=hs((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=ps(t,(function(e,n){return e.invoke(n,t)}))})),r}function G(e,t,n,i,a){var o=e.static,s=e.dynamic;re.optional((function(){var e=[Xa,Wa,qa,Ya,Ka,Qa,Za,Ja,za,$a].concat(T);function t(t){Object.keys(t).forEach((function(t){re.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',a.commandStr)}))}t(o),t(s)}));var u=D(e,t),c=L(e),f=M(e,c,a),h=B(e,a),p=U(e,a),d=F(e,a,u);function v(e){var t=f[e];t&&(p[e]=t)}v(Ga),v(w(Ha));var m=Object.keys(p).length>0,g={framebuffer:c,draw:h,shader:d,state:p,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(g.profile=N(e),g.uniforms=j(n,a),g.drawVAO=g.scopeVAO=h.vao,!g.drawVAO&&d.program&&!u&&r.angle_instanced_arrays&&h.static.elements){var y=!0,b=d.program.attributes.map((function(e){var n=t.static[e];return y=y&&!!n,n}));if(y&&b.length>0){var _=l.getVAO(l.createVAO({attributes:b,elements:h.static.elements}));g.drawVAO=new ls(null,null,null,(function(e,t){return e.link(_)})),g.useVAO=!0}}return u?g.useVAO=!0:g.attributes=V(t,a),g.context=H(i),g}function z(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(a){t.save(r,"."+a);var o=n[a].append(e,t);Array.isArray(o)?i(r,".",a,"=[",o.join(),"];"):i(r,".",a,"=",o,";")})),t(i)}function X(e,t,n,r){var i,a=e.shared,o=a.gl,s=a.framebuffer;b&&(i=t.def(a.extensions,".webgl_draw_buffers"));var u,c=e.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(e,t):t.def(s,".next"),r||t("if(",u,"!==",s,".cur){"),t("if(",u,"){",o,".bindFramebuffer(",es,",",u,".framebuffer);"),b&&t(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",es,",null);"),b&&t(i,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",u,";"),r||t("}")}function W(e,t,n){var r=e.shared,i=r.gl,a=e.current,o=e.next,s=r.current,u=r.next,c=e.cond(s,".dirty");T.forEach((function(t){var r,l,f=w(t);if(!(f in n.state))if(f in o){r=o[f],l=a[f];var h=Oe(E[f].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(h.map((function(e,t){return e+"!=="+l+"["+t+"]"})).join("||")).then(i,".",A[f],"(",h,");",h.map((function(e,t){return l+"["+t+"]="+e})).join(";"),";"))}else{r=c.def(u,".",f);var p=e.cond(r,"!==",s,".",f);c(p),f in x?p(e.cond(r).then(i,".enable(",x[f],");").else(i,".disable(",x[f],");"),s,".",f,"=",r,";"):p(i,".",A[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function q(e,t,n,r){var i=e.shared,a=e.current,o=i.current,s=i.gl;cs(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(e,t);if(x[i]){var l=x[i];fs(u)?t(s,c?".enable(":".disable(",l,");"):t(e.cond(c).then(s,".enable(",l,");").else(s,".disable(",l,");")),t(o,".",i,"=",c,";")}else if(hn(c)){var f=a[i];t(s,".",A[i],"(",c,");",c.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";")}else t(s,".",A[i],"(",c,");",o,".",i,"=",c,";")}}))}function Y(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function K(e,t,n,r,i){var a,o,s,u=e.shared,c=e.stats,l=u.current,f=u.timer,h=n.profile;function p(){return"undefined"!=typeof my&&my&&"function"==typeof my.showToast||"undefined"==typeof performance?"Date.now()":"performance.now()"}function v(e){e(a=t.def(),"=",p(),";"),"string"==typeof i?e(c,".count+=",i,";"):e(c,".count++;"),d&&(r?e(o=t.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",c,");"))}function m(e){e(c,".cpuTime+=",p(),"-",a,";"),d&&(r?e(f,".pushScopeStats(",o,",",f,".getNumPendingQueries(),",c,");"):e(f,".endQuery();"))}function g(e){var n=t.def(l,".profile");t(l,".profile=",e,";"),t.exit(l,".profile=",n,";")}if(h){if(fs(h))return void(h.enable?(v(t),m(t.exit),g("true")):g("false"));g(s=h.append(e,t))}else s=t.def(l,".profile");var y=e.block();v(y),t("if(",s,"){",y,"}");var b=e.block();m(b),t.exit("if(",s,"){",b,"}")}function Z(e,t,n,r,i){var a=e.shared;function o(e){switch(e){case Ao:case ko:case No:return 2;case wo:case Ro:case Lo:return 3;case Oo:case Po:case Mo:return 4;default:return 1}}function s(n,r,i){var o=a.gl,s=t.def(n,".location"),u=t.def(a.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function p(){t("if(!",u,".buffer){",o,".enableVertexAttribArray(",s,");}");var n,a=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",u,".type!==",a,"||",u,".size!==",n,"||",h.map((function(e){return u+"."+e+"!=="+i[e]})).join("||"),"){",o,".bindBuffer(",lo,",",l,".buffer);",o,".vertexAttribPointer(",[s,n,a,i.normalized,i.stride,i.offset],");",u,".type=",a,";",u,".size=",n,";",h.map((function(e){return u+"."+e+"="+i[e]+";"})).join(""),"}"),y){var c=i.divisor;t("if(",u,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function d(){t("if(",u,".buffer){",o,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",oa.map((function(e,t){return u+"."+e+"!=="+f[t]})).join("||"),"){",o,".vertexAttrib4f(",s,",",f,");",oa.map((function(e,t){return u+"."+e+"="+f[t]+";"})).join(""),"}")}c===ua?p():c===ca?d():(t("if(",c,"===",ua,"){"),p(),t("}else{"),d(),t("}"))}r.forEach((function(r){var a,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;a=c.append(e,t)}else{if(!i(ds))return;var l=e.scopeAttrib(u);re.optional((function(){e.assert(t,l+".state","missing attribute "+u)})),a={},Object.keys(new m).forEach((function(e){a[e]=t.def(l,".",e)}))}s(e.link(r),o(r.info.type),a)}))}function Q(e,n,r,i,a,o){for(var s,u=e.shared,c=u.gl,l=0;l<i.length;++l){var f,h=i[l],p=h.name,d=h.info.type,v=r.uniforms[p],m=e.link(h)+".location";if(v){if(!a(v))continue;if(fs(v)){var g=v.value;if(re.command(null!=g,'missing uniform "'+p+'"',e.commandStr),d===Uo||d===jo){re.command("function"==typeof g&&(d===Uo&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||d===jo&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+p,e.commandStr);var y=e.link(g._texture||g.color[0]._texture);n(c,".uniform1i(",m,",",y+".bind());"),n.exit(y,".unbind();")}else if(d===Do||d===Fo||d===Bo){re.optional((function(){re.command(hn(g),"invalid matrix for uniform "+p,e.commandStr),re.command(d===Do&&4===g.length||d===Fo&&9===g.length||d===Bo&&16===g.length,"invalid length for matrix uniform "+p,e.commandStr)}));var b=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),_=2;d===Fo?_=3:d===Bo&&(_=4),n(c,".uniformMatrix",_,"fv(",m,",false,",b,");")}else{switch(d){case xo:re.commandType(g,"number","uniform "+p,e.commandStr),s="1f";break;case Ao:re.command(hn(g)&&2===g.length,"uniform "+p,e.commandStr),s="2f";break;case wo:re.command(hn(g)&&3===g.length,"uniform "+p,e.commandStr),s="3f";break;case Oo:re.command(hn(g)&&4===g.length,"uniform "+p,e.commandStr),s="4f";break;case Io:re.commandType(g,"boolean","uniform "+p,e.commandStr),s="1i";break;case Co:re.commandType(g,"number","uniform "+p,e.commandStr),s="1i";break;case No:case ko:re.command(hn(g)&&2===g.length,"uniform "+p,e.commandStr),s="2i";break;case Lo:case Ro:re.command(hn(g)&&3===g.length,"uniform "+p,e.commandStr),s="3i";break;case Mo:case Po:re.command(hn(g)&&4===g.length,"uniform "+p,e.commandStr),s="4i"}n(c,".uniform",s,"(",m,",",hn(g)?Array.prototype.slice.call(g):g,");")}continue}f=v.append(e,n)}else{if(!a(ds))continue;f=n.def(u.uniforms,"[",t.id(p),"]")}d===Uo?(re(!Array.isArray(f),"must specify a scalar prop for textures"),n("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):d===jo&&(re(!Array.isArray(f),"must specify a scalar prop for cube maps"),n("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),re.optional((function(){function t(t,r){e.assert(n,t,'bad data or missing for uniform "'+p+'".  '+r)}function r(e){re(!Array.isArray(f),"must not specify an array type for uniform"),t("typeof "+f+'==="'+e+'"',"invalid type, expected "+e)}function i(n,r){Array.isArray(f)?re(f.length===n,"must have length "+n):t(u.isArrayLike+"("+f+")&&"+f+".length==="+n,"invalid vector, should have length "+n,e.commandStr)}function a(n){re(!Array.isArray(f),"must not specify a value type"),t("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(n===ho?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(d){case Co:r("number");break;case ko:i(2);break;case Ro:i(3);break;case Po:i(4);break;case xo:r("number");break;case Ao:i(2);break;case wo:i(3);break;case Oo:i(4);break;case Io:r("boolean");break;case No:i(2);break;case Lo:i(3);break;case Mo:case Do:i(4);break;case Fo:i(9);break;case Bo:i(16);break;case Uo:a(ho);break;case jo:a(po)}}));var E=1;switch(d){case Uo:case jo:var S=n.def(f,"._texture");n(c,".uniform1i(",m,",",S,".bind());"),n.exit(S,".unbind();");continue;case Co:case Io:s="1i";break;case ko:case No:s="2i",E=2;break;case Ro:case Lo:s="3i",E=3;break;case Po:case Mo:s="4i",E=4;break;case xo:s="1f";break;case Ao:s="2f",E=2;break;case wo:s="3f",E=3;break;case Oo:s="4f",E=4;break;case Do:s="Matrix2fv";break;case Fo:s="Matrix3fv";break;case Bo:s="Matrix4fv"}if("M"===s.charAt(0)){n(c,".uniform",s,"(",m,",");var T=Math.pow(d-Do+2,2),x=e.global.def("new Float32Array(",T,")");Array.isArray(f)?n("false,(",Oe(T,(function(e){return x+"["+e+"]="+f[e]})),",",x,")"):n("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",Oe(T,(function(e){return x+"["+e+"]="+f+"["+e+"]"})),",",x,")"),n(");")}else if(E>1){for(var A=[],w=[],O=0;O<E;++O)Array.isArray(f)?w.push(f[O]):w.push(n.def(f+"["+O+"]")),o&&A.push(n.def());o&&n("if(!",e.batchId,"||",A.map((function(e,t){return e+"!=="+w[t]})).join("||"),"){",A.map((function(e,t){return e+"="+w[t]+";"})).join("")),n(c,".uniform",s,"(",m,",",w.join(","),");"),o&&n("}")}else{if(re(!Array.isArray(f),"uniform value must not be an array"),o){var C=n.def();n("if(!",e.batchId,"||",C,"!==",f,"){",C,"=",f,";")}n(c,".uniform",s,"(",m,",",f,");"),o&&n("}")}}}function J(e,t,n,r){var i=e.shared,a=i.gl,o=i.draw,s=r.draw;function u(){var u,c=s.elements,l=t;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(l=n),u=c.append(e,l),s.elementsActive&&l("if("+u+")"+a+".bindBuffer("+fo+","+u+".buffer.buffer);")):(u=l.def(),l(u,"=",o,".",Ya,";","if(",u,"){",a,".bindBuffer(",fo,",",u,".buffer.buffer);}","else if(",i.vao,".currentVAO){",u,"=",e.shared.elements+".getElements("+i.vao,".currentVAO.elements);",_?"":"if("+u+")"+a+".bindBuffer("+fo+","+u+".buffer.buffer);","}")),u}function c(){var i,a=s.count,u=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(u=n),i=a.append(e,u),re.optional((function(){a.MISSING&&e.assert(t,"false","missing vertex count"),a.DYNAMIC&&e.assert(u,i+">=0","missing vertex count")}))):(i=u.def(o,".",Za),re.optional((function(){e.assert(u,i+">=0","missing vertex count")}))),i}var l=u();function f(i){var a=s[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(o,".",i)}var h,p,d=f(Ka),v=f(Qa),m=c();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(h=f(Ja),p=e.instancing);var g=l+".type",b=s.elements&&fs(s.elements)&&!s.vaoActive;function E(){function e(){n(p,".drawElementsInstancedANGLE(",[d,m,g,v+"<<(("+g+"-"+sa+")>>1)",h],");")}function t(){n(p,".drawArraysInstancedANGLE(",[d,v,m,h],");")}l&&"null"!==l?b?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}function S(){function e(){n(a+".drawElements("+[d,m,g,v+"<<(("+g+"-"+sa+")>>1)"]+");")}function t(){n(a+".drawArrays("+[d,v,m]+");")}l&&"null"!==l?b?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!=typeof h||h>=0)?"string"==typeof h?(n("if(",h,">0){"),E(),n("}else if(",h,"<0){"),S(),n("}")):E():S()}function $(e,t,n,r,i){var a=I(),o=a.proc("body",i);return re.optional((function(){a.commandStr=t.commandStr,a.command=a.link(t.commandStr)})),y&&(a.instancing=o.def(a.shared.extensions,".angle_instanced_arrays")),e(a,o,n,r),a.compile().body}function ee(e,t,n,r){Y(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),Z(e,t,n,r.attributes,(function(){return!0}))),Q(e,t,n,r.uniforms,(function(){return!0}),!1),J(e,t,t,n)}function te(e,t){var n=e.proc("draw",1);Y(e,n),z(e,n,t.context),X(e,n,t.framebuffer),W(e,n,t),q(e,n,t.state),K(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ee(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link((function(n){return $(ee,e,t,n,1)})),"(",r,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function ne(e,t,n,r){function i(){return!0}e.batchId="a1",Y(e,t),Z(e,t,n,r.attributes,i),Q(e,t,n,r.uniforms,i,!1),J(e,t,t,n)}function ie(e,t,n,r){Y(e,t);var i=n.contextDep,a=t.def(),o="a0",s="a1",u=t.def();e.shared.props=u,e.batchId=a;var c=e.scope(),l=e.scope();function f(e){return e.contextDep&&i||e.propDep}function h(e){return!f(e)}if(t(c.entry,"for(",a,"=0;",a,"<",s,";++",a,"){",u,"=",o,"[",a,"];",l,"}",c.exit),n.needsContext&&z(e,l,n.context),n.needsFramebuffer&&X(e,l,n.framebuffer),q(e,l,n.state,f),n.profile&&f(n.profile)&&K(e,l,n,!1,!0),r)n.useVAO?n.drawVAO?f(n.drawVAO)?l(e.shared.vao,".setVAO(",n.drawVAO.append(e,l),");"):c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):c(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(c(e.shared.vao,".setVAO(null);"),Z(e,c,n,r.attributes,h),Z(e,l,n,r.attributes,f)),Q(e,c,n,r.uniforms,h,!1),Q(e,l,n,r.uniforms,f,!0),J(e,c,l,n);else{var p=e.global.def("{}"),d=n.shader.progVar.append(e,l),v=l.def(d,".id"),m=l.def(p,"[",v,"]");l(e.shared.gl,".useProgram(",d,".program);","if(!",m,"){",m,"=",p,"[",v,"]=",e.link((function(t){return $(ne,e,n,t,2)})),"(",d,");}",m,".call(this,a0[",a,"],",a,");")}}function ae(e,t){var n=e.proc("batch",2);e.batchId="0",Y(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(z(e,n,t.context),i=!1);var a=t.framebuffer,o=!1;function s(e){return e.contextDep&&r||e.propDep}a?(a.propDep?r=o=!0:a.contextDep&&r&&(o=!0),o||X(e,n,a)):X(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),W(e,n,t),q(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||K(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=o;var u=t.shader.progVar;if(u.contextDep&&r||u.propDep)ie(e,n,t,null);else{var c=u.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)ie(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var l=e.global.def("{}"),f=n.def(c,".id"),h=n.def(l,"[",f,"]");n(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",l,"[",f,"]=",e.link((function(n){return $(ie,e,t,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function oe(e,n){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;function o(t){var a=n.shader[t];a&&r.set(i.shader,"."+t,a.append(e,r))}z(e,r,n.context),n.framebuffer&&n.framebuffer.append(e,r),cs(Object.keys(n.state)).forEach((function(t){var a=n.state[t].append(e,r);hn(a)?a.forEach((function(n,i){r.set(e.next[t],"["+i+"]",n)})):r.set(i.next,"."+t,a)})),K(e,r,n,!0,!0),[Ya,Qa,Za,Ja,Ka].forEach((function(t){var a=n.draw[t];a&&r.set(i.draw,"."+t,""+a.append(e,r))})),Object.keys(n.uniforms).forEach((function(a){var o=n.uniforms[a].append(e,r);Array.isArray(o)&&(o="["+o.join()+"]"),r.set(i.uniforms,"["+t.id(a)+"]",o)})),Object.keys(n.attributes).forEach((function(t){var i=n.attributes[t].append(e,r),a=e.scopeAttrib(t);Object.keys(new m).forEach((function(e){r.set(a,"."+e,i[e])}))})),n.scopeVAO&&r.set(i.vao,".targetVAO",n.scopeVAO.append(e,r)),o(Wa),o(qa),Object.keys(n.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function se(e){if("object"==typeof e&&!hn(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(ve.isDynamic(e[t[n]]))return!0;return!1}}function ue(e,t,n){var r=t.static[n];if(r&&se(r)){var i=e.global,a=Object.keys(r),o=!1,s=!1,u=!1,c=e.global.def("{}");a.forEach((function(t){var n=r[t];if(ve.isDynamic(n)){"function"==typeof n&&(n=r[t]=ve.unbox(n));var a=ps(n,null);o=o||a.thisDep,u=u||a.propDep,s=s||a.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new ve.DynamicVariable(da,{thisDep:o,contextDep:s,propDep:u,ref:c,append:l}),delete t.static[n]}function l(e,t){a.forEach((function(n){var i=r[n];if(ve.isDynamic(i)){var a=e.invoke(t,i);t(c,".",n,"=",a,";")}}))}}function ce(e,t,r,i,a){var o=I();o.stats=o.link(a),Object.keys(t.static).forEach((function(e){ue(o,t,e)})),co.forEach((function(t){ue(o,e,t)}));var s=G(e,t,r,i,o);return te(o,s),oe(o,s),ae(o,s),n(o.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:S,current:E,procs:function(){var e=I(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,u=s.gl,c=s.next,l=s.current;a(l,".dirty=false;"),X(e,t),X(e,n,null,!0),y&&(o=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var h=n.def(s.attributes,"[",f,"]"),p=e.cond(h,".buffer");p.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",lo,",",h,".buffer.buffer);",u,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(p),y&&n(o,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(x).forEach((function(r){var i=x[r],o=a.def(c,".",r),s=e.block();s("if(",o,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",o,";"),n(s),t("if(",o,"!==",l,".",r,"){",s,"}")})),Object.keys(A).forEach((function(r){var i,o,s=A[r],f=E[r],h=e.block();if(h(u,".",s,"("),hn(f)){var p=f.length;i=e.global.def(c,".",r),o=e.global.def(l,".",r),h(Oe(p,(function(e){return i+"["+e+"]"})),");",Oe(p,(function(e){return o+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",Oe(p,(function(e){return i+"["+e+"]!=="+o+"["+e+"]"})).join("||"),"){",h,"}")}else i=a.def(c,".",r),o=a.def(l,".",r),h(i,");",l,".",r,"=",i,";"),t("if(",i,"!==",o,"){",h,"}");n(h)})),e.compile()}(),compile:ce}}function ms(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var gs=34918,ys=34919,bs=35007,_s=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var a=[];function o(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(bs,n),a.push(n),p(a.length-1,a.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(bs)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function l(){return c.pop()||new u}function f(e){c.push(e)}var h=[];function p(e,t,n){var r=l();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,h.push(r)}var d=[],v=[];function m(){var e,n,r=a.length;if(0!==r){v.length=Math.max(v.length,r+1),d.length=Math.max(d.length,r+1),d[0]=0,v[0]=0;var o=0;for(e=0,n=0;n<a.length;++n){var s=a[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,ys)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,gs),i(s)):a[e++]=s,d[n+1]=o,v[n+1]=e}for(a.length=e,e=0,n=0;n<h.length;++n){var u=h[n],c=u.startQueryIndex,l=u.endQueryIndex;u.sum+=d[l]-d[c];var p=v[c],m=v[l];m===p?(u.stats.gpuTime+=u.sum/1e6,f(u)):(u.startQueryIndex=p,u.endQueryIndex=m,h[e++]=u)}h.length=e}}return{beginQuery:o,endQuery:s,pushScopeStats:p,update:m,getNumPendingQueries:function(){return a.length},clear:function(){n.push.apply(n,a);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);a.length=0,n.length=0},restore:function(){a.length=0,n.length=0}}},Es=16384,Ss=256,Ts=1024,xs=34962,As="webglcontextlost",ws="webglcontextrestored",Os=1,Cs=2,ks=3;function Rs(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function Ps(e){var t=Ae(e);if(!t)return null;var r=t.gl,i=r.getContextAttributes(),a=r.isContextLost(),o=we(r,t);if(!o)return null;var s=ye(),u=ms(),c=o.extensions,l=_s(r,c),f=ge(),h=r.drawingBufferWidth,p=r.drawingBufferHeight,d={tick:0,time:0,viewportWidth:h,viewportHeight:p,framebufferWidth:h,framebufferHeight:p,drawingBufferWidth:h,drawingBufferHeight:p,pixelRatio:t.pixelRatio},v={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},g=Tt(r,c),y=Wt(r,u,t,E),b=sn(r,c,y,u),_=Wi(r,c,g,u,y,b,m);function E(e){return _.destroyBuffer(e)}var S=Qi(r,s,u,t),T=Jr(r,c,g,(function(){w.procs.poll()}),d,u,t),x=hi(r,c,g,u,t),A=ji(r,c,g,T,x,u),w=vs(r,s,c,g,y,b,T,A,v,_,S,m,d,l,t),O=na(r,A,w.procs.poll,d,i,c,g),C=w.next,k=r.canvas,R=[],P=[],I=[],N=[t.onDestroy],L=null;function M(){if(0===R.length)return l&&l.update(),void(L=null);L=me.next(M),Y();for(var e=R.length-1;e>=0;--e){var t=R[e];t&&t(d,null,0)}r.flush(),l&&l.update()}function D(){!L&&R.length>0&&(L=me.next(M))}function F(){L&&(me.cancel(M),L=null)}function B(e){e.preventDefault(),a=!0,F(),P.forEach((function(e){e()}))}function U(e){r.getError(),a=!1,o.restore(),S.restore(),y.restore(),T.restore(),x.restore(),A.restore(),_.restore(),l&&l.restore(),w.procs.refresh(),D(),I.forEach((function(e){e()}))}var j="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast;function V(){R.length=0,F(),!j&&k&&(k.removeEventListener(As,B),k.removeEventListener(ws,U)),S.clear(),A.clear(),x.clear(),_.clear(),T.clear(),b.clear(),y.clear(),l&&l.clear(),N.forEach((function(e){e()}))}function H(e){function t(e){var t=n({},e);function r(e){if(e in t){var n=t[e];delete t[e],Object.keys(n).forEach((function(r){t[e+"."+r]=n[r]}))}}return delete t.uniforms,delete t.attributes,delete t.context,delete t.vao,"stencil"in t&&t.stencil.op&&(t.stencil.opBack=t.stencil.opFront=t.stencil.op,delete t.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(t.vao=e.vao),t}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var a=e[i];if(ve.isDynamic(a))r[i]=ve.unbox(a,i);else{if(t&&Array.isArray(a))for(var o=0;o<a.length;++o)if(ve.isDynamic(a[o]))return void(r[i]=ve.unbox(a,i));n[i]=a}})),{dynamic:r,static:n}}re(!!e,"invalid args to regl({...})"),re.type(e,"object","invalid args to regl({...})");var i=r(e.context||{},!0),o=r(e.uniforms||{},!0),s=r(e.attributes||{},!1),u=r(t(e),!1),c={gpuTime:0,cpuTime:0,count:0},l=w.compile(u,s,o,i,c),f=l.draw,h=l.batch,p=l.scope,d=[];function v(e){for(;d.length<e;)d.push(null);return d}function m(e,t){var n;if(a&&re.raise("context lost"),"function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)p.call(this,null,t,n);else{if(!Array.isArray(e))return p.call(this,e,t,0);for(n=0;n<e.length;++n)p.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return h.call(this,v(0|e),0|e)}else{if(!Array.isArray(e))return f.call(this,e);if(e.length)return h.call(this,e,e.length)}}return n(m,{stats:c,destroy:function(){l.destroy()}})}!j&&k&&(k.addEventListener(As,B,!1),k.addEventListener(ws,U,!1));var G=A.setFBO=H({framebuffer:ve.define.call(null,Os,"framebuffer")});function z(e,t){var n=0;w.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=Es),"depth"in t&&(r.clearDepth(+t.depth),n|=Ss),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=Ts),re(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function X(e){if(re("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)G(n({framebuffer:e.framebuffer.faces[t]},e),z);else G(e,z);else z(null,e)}function W(e){function t(){var t=Rs(R,e);function n(){var e=Rs(R,n);R[e]=R[R.length-1],R.length-=1,R.length<=0&&F()}re(t>=0,"cannot cancel a frame twice"),R[t]=n}return re.type(e,"function","regl.frame() callback must be a function"),R.push(e),D(),{cancel:t}}function q(){var e=C.viewport,t=C.scissor_box;e[0]=e[1]=t[0]=t[1]=0,d.viewportWidth=d.framebufferWidth=d.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,d.viewportHeight=d.framebufferHeight=d.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function Y(){d.tick+=1,d.time=Z(),q(),w.procs.poll()}function K(){T.refresh(),q(),w.procs.refresh(),l&&l.update()}function Z(){return(ge()-f)/1e3}function Q(e,t){var n;switch(re.type(t,"function","listener callback must be a function"),e){case"frame":return W(t);case"lost":n=P;break;case"restore":n=I;break;case"destroy":n=N;break;default:re.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}K();var J=n(H,{clear:X,prop:ve.define.bind(null,Os),context:ve.define.bind(null,Cs),this:ve.define.bind(null,ks),draw:H({}),buffer:function(e){return y.create(e,xs,!1,!1)},elements:function(e){return b.create(e,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:x.create,framebuffer:A.create,framebufferCube:A.createCube,vao:_.createVAO,attributes:i,frame:W,on:Q,limits:g,hasExtension:function(e){return g.extensions.indexOf(e.toLowerCase())>=0},read:O,destroy:V,_gl:r,_refresh:K,poll:function(){Y(),l&&l.update()},now:Z,stats:u});return t.onDone(null,J),J}return Ps}(t(LI)),DI=function(){function e(t,n){Bl(this,e),ll(this,"attribute",void 0),ll(this,"buffer",void 0);var r=n.buffer,i=n.offset,a=n.stride,o=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:u||0},s&&(this.attribute.size=s)}return jl(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),FI=(ll(_I={},nx.POINTS,"points"),ll(_I,nx.LINES,"lines"),ll(_I,nx.LINE_LOOP,"line loop"),ll(_I,nx.LINE_STRIP,"line strip"),ll(_I,nx.TRIANGLES,"triangles"),ll(_I,nx.TRIANGLE_FAN,"triangle fan"),ll(_I,nx.TRIANGLE_STRIP,"triangle strip"),_I),BI=(ll(EI={},nx.STATIC_DRAW,"static"),ll(EI,nx.DYNAMIC_DRAW,"dynamic"),ll(EI,nx.STREAM_DRAW,"stream"),EI),UI=(ll(SI={},nx.BYTE,"int8"),ll(SI,nx.UNSIGNED_INT,"int16"),ll(SI,nx.INT,"int32"),ll(SI,nx.UNSIGNED_BYTE,"uint8"),ll(SI,nx.UNSIGNED_SHORT,"uint16"),ll(SI,nx.UNSIGNED_INT,"uint32"),ll(SI,nx.FLOAT,"float"),SI),jI=(ll(TI={},nx.ALPHA,"alpha"),ll(TI,nx.LUMINANCE,"luminance"),ll(TI,nx.LUMINANCE_ALPHA,"luminance alpha"),ll(TI,nx.RGB,"rgb"),ll(TI,nx.RGBA,"rgba"),ll(TI,nx.RGBA4,"rgba4"),ll(TI,nx.RGB5_A1,"rgb5 a1"),ll(TI,nx.RGB565,"rgb565"),ll(TI,nx.DEPTH_COMPONENT,"depth"),ll(TI,nx.DEPTH_STENCIL,"depth stencil"),TI),VI=(ll(xI={},nx.DONT_CARE,"dont care"),ll(xI,nx.NICEST,"nice"),ll(xI,nx.FASTEST,"fast"),xI),HI=(ll(AI={},nx.NEAREST,"nearest"),ll(AI,nx.LINEAR,"linear"),ll(AI,nx.LINEAR_MIPMAP_LINEAR,"mipmap"),ll(AI,nx.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),ll(AI,nx.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),ll(AI,nx.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),AI),GI=(ll(wI={},nx.REPEAT,"repeat"),ll(wI,nx.CLAMP_TO_EDGE,"clamp"),ll(wI,nx.MIRRORED_REPEAT,"mirror"),wI),zI=(ll(OI={},nx.NONE,"none"),ll(OI,nx.BROWSER_DEFAULT_WEBGL,"browser"),OI),XI=(ll(CI={},nx.NEVER,"never"),ll(CI,nx.ALWAYS,"always"),ll(CI,nx.LESS,"less"),ll(CI,nx.LEQUAL,"lequal"),ll(CI,nx.GREATER,"greater"),ll(CI,nx.GEQUAL,"gequal"),ll(CI,nx.EQUAL,"equal"),ll(CI,nx.NOTEQUAL,"notequal"),CI),WI=(ll(kI={},nx.FUNC_ADD,"add"),ll(kI,nx.MIN_EXT,"min"),ll(kI,nx.MAX_EXT,"max"),ll(kI,nx.FUNC_SUBTRACT,"subtract"),ll(kI,nx.FUNC_REVERSE_SUBTRACT,"reverse subtract"),kI),qI=(ll(RI={},nx.ZERO,"zero"),ll(RI,nx.ONE,"one"),ll(RI,nx.SRC_COLOR,"src color"),ll(RI,nx.ONE_MINUS_SRC_COLOR,"one minus src color"),ll(RI,nx.SRC_ALPHA,"src alpha"),ll(RI,nx.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),ll(RI,nx.DST_COLOR,"dst color"),ll(RI,nx.ONE_MINUS_DST_COLOR,"one minus dst color"),ll(RI,nx.DST_ALPHA,"dst alpha"),ll(RI,nx.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),ll(RI,nx.CONSTANT_COLOR,"constant color"),ll(RI,nx.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),ll(RI,nx.CONSTANT_ALPHA,"constant alpha"),ll(RI,nx.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),ll(RI,nx.SRC_ALPHA_SATURATE,"src alpha saturate"),RI),YI=(ll(PI={},nx.NEVER,"never"),ll(PI,nx.ALWAYS,"always"),ll(PI,nx.LESS,"less"),ll(PI,nx.LEQUAL,"lequal"),ll(PI,nx.GREATER,"greater"),ll(PI,nx.GEQUAL,"gequal"),ll(PI,nx.EQUAL,"equal"),ll(PI,nx.NOTEQUAL,"notequal"),PI),KI=(ll(II={},nx.ZERO,"zero"),ll(II,nx.KEEP,"keep"),ll(II,nx.REPLACE,"replace"),ll(II,nx.INVERT,"invert"),ll(II,nx.INCR,"increment"),ll(II,nx.DECR,"decrement"),ll(II,nx.INCR_WRAP,"increment wrap"),ll(II,nx.DECR_WRAP,"decrement wrap"),II),ZI=(ll(NI={},nx.FRONT,"front"),ll(NI,nx.BACK,"back"),NI),QI=function(){function e(t,n){Bl(this,e),ll(this,"buffer",void 0);var r=n.data,i=n.usage,a=n.type;this.buffer=t.buffer({data:r,usage:BI[i||nx.STATIC_DRAW],type:UI[a||nx.UNSIGNED_BYTE]})}return jl(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.buffer.subdata(t,n)}}]),e}(),JI=function(){function e(t,n){Bl(this,e),ll(this,"elements",void 0);var r=n.data,i=n.usage,a=n.type,o=n.count;this.elements=t.elements({data:r,usage:BI[i||nx.STATIC_DRAW],type:UI[a||nx.UNSIGNED_BYTE],count:o})}return jl(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){}}]),e}(),$I=function(){function e(t,n){Bl(this,e),ll(this,"framebuffer",void 0);var r=n.width,i=n.height,a=n.color,o=n.colors;n.depth,n.stencil;var s={width:r,height:i};Array.isArray(o)&&(s.colors=o.map((function(e){return e.get()}))),a&&"boolean"!=typeof a&&(s.color=a.get()),this.framebuffer=t.framebuffer(s)}return jl(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.framebuffer.resize(t,n)}}]),e}();function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nN,rN=function(){function e(t,n){Bl(this,e),ll(this,"reGl",void 0),ll(this,"destroyed",!1),ll(this,"drawCommand",void 0),ll(this,"drawParams",void 0),ll(this,"options",void 0),ll(this,"uniforms",{}),this.reGl=t;var r=n.vs,i=n.fs,a=n.attributes,o=n.uniforms,s=n.primitive,u=n.count,c=n.elements,l=n.depth,f=n.blend,h=n.stencil,p=n.cull,d=n.instances,v={};this.options=n,o&&(this.uniforms=this.extractUniforms(o),Object.keys(o).forEach((function(e){v[e]=t.prop(e)})));var m={};Object.keys(a).forEach((function(e){m[e]=a[e].get()}));var g={attributes:m,frag:i,uniforms:v,vert:r,primitive:FI[void 0===s?nx.TRIANGLES:s]};d&&(g.instances=d),u&&(g.count=u),c&&(g.elements=c.get()),this.initDepthDrawParams({depth:l},g),this.initBlendDrawParams({blend:f},g),this.initStencilDrawParams({stencil:h},g),this.initCullDrawParams({cull:p},g),this.drawCommand=t(g),this.drawParams=g}return jl(e,[{key:"addUniforms",value:function(e){this.uniforms=tN(tN({},this.uniforms),this.extractUniforms(e))}},{key:"draw",value:function(e){if(!this.drawParams.attributes||0!==Object.keys(this.drawParams.attributes).length){var t=tN(tN({},this.uniforms),this.extractUniforms(e.uniforms||{})),n={};Object.keys(t).forEach((function(e){var r=Wl(t[e]);"boolean"===r||"number"===r||Array.isArray(t[e])||t[e].BYTES_PER_ELEMENT?n[e]=t[e]:n[e]=t[e].get()})),this.drawCommand(n)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach((function(e){e.destroy()})),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(e,t){var n=e.depth;n&&(t.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:XI[n.func||nx.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var n=e.blend;if(n){var r=n.enable,i=n.func,a=n.equation,o=n.color,s=void 0===o?[0,0,0,0]:o;t.blend={enable:!!r,func:{srcRGB:qI[i&&i.srcRGB||nx.SRC_ALPHA],srcAlpha:qI[i&&i.srcAlpha||nx.SRC_ALPHA],dstRGB:qI[i&&i.dstRGB||nx.ONE_MINUS_SRC_ALPHA],dstAlpha:qI[i&&i.dstAlpha||nx.ONE_MINUS_SRC_ALPHA]},equation:{rgb:WI[a&&a.rgb||nx.FUNC_ADD],alpha:WI[a&&a.alpha||nx.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(e,t){var n=e.stencil;if(n){var r=n.enable,i=n.mask,a=void 0===i?-1:i,o=n.func,s=void 0===o?{cmp:nx.ALWAYS,ref:0,mask:-1}:o,u=n.opFront,c=void 0===u?{fail:nx.KEEP,zfail:nx.KEEP,zpass:nx.KEEP}:u,l=n.opBack,f=void 0===l?{fail:nx.KEEP,zfail:nx.KEEP,zpass:nx.KEEP}:l;t.stencil={enable:!!r,mask:a,func:tN(tN({},s),{},{cmp:YI[s.cmp]}),opFront:{fail:KI[c.fail],zfail:KI[c.zfail],zpass:KI[c.zpass]},opBack:{fail:KI[f.fail],zfail:KI[f.zfail],zpass:KI[f.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var n=e.cull;if(n){var r=n.enable,i=n.face,a=void 0===i?nx.BACK:i;t.cull={enable:!!r,face:ZI[a]}}}},{key:"extractUniforms",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){t.extractUniformsRecursively(r,e[r],n,"")})),n}},{key:"extractUniformsRecursively",value:function(e,t,n,r){var i=this;null===t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&"number"==typeof t[0]||Mm(t)||""===t||"resize"in t?n["".concat(r&&r+".").concat(e)]=t:(Tm(t)&&Object.keys(t).forEach((function(a){i.extractUniformsRecursively(a,t[a],n,"".concat(r&&r+".").concat(e))})),Array.isArray(t)&&t.forEach((function(t,a){Object.keys(t).forEach((function(o){i.extractUniformsRecursively(o,t[o],n,"".concat(r&&r+".").concat(e,"[").concat(a,"]"))}))})))}}]),e}(),iN=function(){function e(t,n){Bl(this,e),ll(this,"texture",void 0),ll(this,"width",void 0),ll(this,"height",void 0);var r=n.data,i=n.type,a=void 0===i?nx.UNSIGNED_BYTE:i,o=n.width,s=n.height,u=n.flipY,c=void 0!==u&&u,l=n.format,f=void 0===l?nx.RGBA:l,h=n.mipmap,p=void 0!==h&&h,d=n.wrapS,v=void 0===d?nx.CLAMP_TO_EDGE:d,m=n.wrapT,g=void 0===m?nx.CLAMP_TO_EDGE:m,y=n.aniso,b=void 0===y?0:y,_=n.alignment,E=void 0===_?1:_,S=n.premultiplyAlpha,T=void 0!==S&&S,x=n.mag,A=void 0===x?nx.NEAREST:x,w=n.min,O=void 0===w?nx.NEAREST:w,C=n.colorSpace,k=void 0===C?nx.BROWSER_DEFAULT_WEBGL:C;this.width=o,this.height=s;var R={width:o,height:s,type:UI[a],format:jI[f],wrapS:GI[v],wrapT:GI[g],mag:HI[A],min:HI[O],alignment:E,flipY:c,colorSpace:zI[k],premultiplyAlpha:T,aniso:b};r&&(R.data=r),"number"==typeof p?R.mipmap=VI[p]:"boolean"==typeof p&&(R.mipmap=p),this.texture=t.texture(R)}return jl(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.texture(e)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.texture.resize(t,n),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),aN=xS()(nN=function(){function e(){var t=this;Bl(this,e),ll(this,"extensionObject",void 0),ll(this,"gl",void 0),ll(this,"$container",void 0),ll(this,"canvas",void 0),ll(this,"width",void 0),ll(this,"height",void 0),ll(this,"isDirty",void 0),ll(this,"createModel",(function(e){return new rN(t.gl,e)})),ll(this,"createAttribute",(function(e){return new DI(t.gl,e)})),ll(this,"createBuffer",(function(e){return new QI(t.gl,e)})),ll(this,"createElements",(function(e){return new JI(t.gl,e)})),ll(this,"createTexture2D",(function(e){return new iN(t.gl,e)})),ll(this,"createFramebuffer",(function(e){return new $I(t.gl,e)})),ll(this,"useFramebuffer",(function(e,n){t.gl({framebuffer:e?e.get():null})(n)})),ll(this,"clear",(function(e){var n=e.color,r=e.depth,i=e.stencil,a=e.framebuffer,o=void 0===a?null:a,s={color:n,depth:r,stencil:i};s.framebuffer=null===o?o:o.get(),t.gl.clear(s)})),ll(this,"viewport",(function(e){var n=e.x,r=e.y,i=e.width,a=e.height;t.gl._gl.viewport(n,r,i,a),t.width=i,t.height=a,t.gl._refresh()})),ll(this,"readPixels",(function(e){var n=e.framebuffer,r={x:e.x,y:e.y,width:e.width,height:e.height};return n&&(r.framebuffer=n.get()),t.gl.read(r)})),ll(this,"getViewportSize",(function(){return{width:t.gl._gl.drawingBufferWidth,height:t.gl._gl.drawingBufferHeight}})),ll(this,"getContainer",(function(){return uh?t.canvas:null===(e=t.canvas)||void 0===e?void 0:e.parentElement;var e})),ll(this,"getCanvas",(function(){return t.canvas})),ll(this,"getGLContext",(function(){return t.gl._gl})),ll(this,"destroy",(function(){t.gl.destroy()}))}var t;return jl(e,[{key:"init",value:(t=ex(vx.mark((function e(t,n){var r=this;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.canvas=t,e.next=3,new Promise((function(e,t){MI({canvas:r.canvas,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(n,r){!n&&r||t(n),e(r)}})}));case 3:this.gl=e.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"testExtension",value:function(e){return!!this.getGLContext().getExtension(e)}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var e=this.getGLContext();e.disable(e.CULL_FACE)}},{key:"setDirty",value:function(e){this.isDirty=e}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||nN;function oN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oN(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uN,cN,lN,fN=function(){function e(t){Bl(this,e),ll(this,"sceneService",void 0),ll(this,"mapService",void 0),ll(this,"controlService",void 0),ll(this,"layerService",void 0),ll(this,"iconService",void 0),ll(this,"markerService",void 0),ll(this,"popupService",void 0),ll(this,"fontService",void 0),ll(this,"interactionService",void 0),ll(this,"container",void 0);var n=t.id,r=t.map,i=t.canvas,a=t.hasBaseMap,o=function(){var e=new TS;return e.parent=dk,e.bind(OS.SceneID).toConstantValue("".concat(wk++)),e.bind(OS.ILayerService).to(Ix).inSingletonScope(),e.bind(OS.ISceneService).to(IA).inSingletonScope(),e.bind(OS.ICameraService).to(fT).inSingletonScope(),e.bind(OS.ICoordinateSystemService).to(jT).inSingletonScope(),e.bind(OS.IInteractionService).to(JT).inSingletonScope(),e.bind(OS.IPickingService).to(Rx).inSingletonScope(),e.bind(OS.IControlService).to(gT).inSingletonScope(),e.bind(OS.IMarkerService).to(yT).inSingletonScope(),e.bind(OS.IIconService).to(QS).inSingletonScope(),e.bind(OS.IFontService).to(KS).inSingletonScope(),e.bind(OS.IPopupService).to(bT).inSingletonScope(),e.bind(OS.INormalPass).to(kw).whenTargetNamed("clear"),e.bind(OS.INormalPass).to(Fw).whenTargetNamed("pixelPicking"),e.bind(OS.INormalPass).to(rk).whenTargetNamed("render"),e.bind(OS.INormalPass).to(pk).whenTargetNamed("taa"),e.bind(OS.IFactoryNormalPass).toFactory((function(e){return function(t){return e.container.getNamed(OS.INormalPass,t)}})),e.bind(OS.IPostProcessingPass).to(OC).whenTargetNamed("copy"),e.bind(OS.IPostProcessingPass).to(dC).whenTargetNamed("blurH"),e.bind(OS.IPostProcessingPass).to(bC).whenTargetNamed("blurV"),e.bind(OS.IPostProcessingPass).to(jC).whenTargetNamed("noise"),e.bind(OS.IPostProcessingPass).to(KC).whenTargetNamed("sepia"),e.bind(OS.IPostProcessingPass).to(xC).whenTargetNamed("colorHalftone"),e.bind(OS.IPostProcessingPass).to(IC).whenTargetNamed("hexagonalPixelate"),e.bind(OS.IPostProcessingPass).to(FC).whenTargetNamed("ink"),e.bind(OS.IFactoryPostProcessingPass).toFactory((function(e){return function(t){var n=e.container.getNamed(OS.IPostProcessingPass,t);return n.setName(t),n}})),e}();this.container=o,r.setContainer(o,n,i,a),o.bind(OS.IRendererService).to(aN).inSingletonScope(),this.sceneService=o.get(OS.ISceneService),this.mapService=o.get(OS.IMapService),this.iconService=o.get(OS.IIconService),this.fontService=o.get(OS.IFontService),this.controlService=o.get(OS.IControlService),this.layerService=o.get(OS.ILayerService),this.markerService=o.get(OS.IMarkerService),this.interactionService=o.get(OS.IInteractionService),this.popupService=o.get(OS.IPopupService),uh?this.sceneService.initMiniScene(t):(this.initComponent(n),this.sceneService.init(t),this.initControl())}return jl(e,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(e){return this.sceneService.exportPng(e)}},{key:"exportMap",value:function(e){return this.sceneService.exportPng(e)}},{key:"registerRenderService",value:function(e){var t=this;this.sceneService.loaded?new e(this).init():this.on("loaded",(function(){new e(t).init()}))}},{key:"map",get:function(){return this.mapService.map}},{key:"setBgColor",value:function(e){this.mapService.setBgColor(e)}},{key:"addLayer",value:function(e){var t=function(e){var t=new TS;return t.parent=e,t.bind(OS.IStyleAttributeService).to(Wx).inSingletonScope(),t.bind(OS.IMultiPassRenderer).to(Nw).inSingletonScope(),t.bind(OS.IPostProcessor).to(ZC).inSingletonScope(),t}(this.container);e.setContainer(t,this.container),this.sceneService.addLayer(e)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(e){return this.layerService.getLayer(e)}},{key:"getLayerByName",value:function(e){return this.layerService.getLayerByName(e)}},{key:"removeLayer",value:function(e,t){this.layerService.remove(e,t)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addIconFont",value:function(e,t){this.fontService.addIconFont(e,t)}},{key:"addIconFonts",value:function(e){var t=this;e.forEach((function(e){var n=Ll(e,2),r=n[0],i=n[1];t.fontService.addIconFont(r,i)}))}},{key:"addFontFace",value:function(e,t){this.sceneService.addFontFace(e,t)}},{key:"addImage",value:function(e,t){uh?this.iconService.addImageMini(e,t,this.sceneService):this.iconService.addImage(e,t)}},{key:"hasImage",value:function(e){return this.iconService.hasImage(e)}},{key:"removeImage",value:function(e){this.iconService.removeImage(e)}},{key:"addIconFontGlyphs",value:function(e,t){this.fontService.addIconGlyphs(t)}},{key:"addControl",value:function(e){this.controlService.addControl(e,this.container)}},{key:"removeControl",value:function(e){this.controlService.removeControl(e)}},{key:"getControlByName",value:function(e){return this.controlService.getControlByName(e)}},{key:"addMarker",value:function(e){this.markerService.addMarker(e)}},{key:"addMarkerLayer",value:function(e){this.markerService.addMarkerLayer(e)}},{key:"removeMarkerLayer",value:function(e){this.markerService.removeMarkerLayer(e)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(e){this.popupService.addPopup(e)}},{key:"on",value:function(e,t){-1===Rk.indexOf(e)?this.mapService.on(e,t):this.sceneService.on(e,t)}},{key:"once",value:function(e,t){-1===Rk.indexOf(e)?this.mapService.once(e,t):this.sceneService.once(e,t)}},{key:"off",value:function(e,t){-1===Rk.indexOf(e)?this.mapService.off(e,t):this.sceneService.off(e,t)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(e){return this.mapService.getCenter(e)}},{key:"setCenter",value:function(e,t){return this.mapService.setCenter(e,t)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(e){return this.mapService.setPitch(e)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(e){this.mapService.setRotation(e)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(e){this.mapService.panTo(e)}},{key:"panBy",value:function(e,t){this.mapService.panBy(e,t)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(e){this.mapService.setZoom(e)}},{key:"fitBounds",value:function(e,t){var n=this.sceneService.getSceneConfig(),r=n.fitBoundsOptions,i=n.animate;this.mapService.fitBounds(e,t||sN(sN({},r),{},{animate:i}))}},{key:"setZoomAndCenter",value:function(e,t){this.mapService.setZoomAndCenter(e,t)}},{key:"setMapStyle",value:function(e){this.mapService.setMapStyle(e)}},{key:"setMapStatus",value:function(e){this.mapService.setMapStatus(e)}},{key:"pixelToLngLat",value:function(e){return this.mapService.pixelToLngLat(e)}},{key:"lngLatToPixel",value:function(e){return this.mapService.lngLatToPixel(e)}},{key:"containerToLngLat",value:function(e){return this.mapService.containerToLngLat(e)}},{key:"lngLatToContainer",value:function(e){return this.mapService.lngLatToContainer(e)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(e,t){this.container.bind(OS.IPostProcessingPass).to(e).whenTargetNamed(t)}},{key:"initComponent",value:function(e){var t,n;this.controlService.init({container:(t=e,n=t,"string"==typeof t&&(n=lh.document.getElementById(t)),n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var e=this.sceneService.getSceneConfig(),t=e.logoVisible,n=e.logoPosition;t&&this.addControl(new Bk({position:n}))}}]),e}();function hN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hN(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dN,vN,mN,gN,yN=(dN=OS.IGlobalConfigService,vN=Ak.lazyInject(dN),uN=function(e,t,n){vN.call(this,e,t),n&&(n.initializer=function(){return e[t]})},cN=function(){function e(t){Bl(this,e),CT(this,"configService",lN,this),ll(this,"config",void 0),this.config=t}return jl(e,[{key:"setContainer",value:function(e,t,n,r){e.bind(OS.MapConfig).toConstantValue(pN(pN({},this.config),{},{id:t,canvas:n,hasBaseMap:r})),e.bind(OS.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),lN=kT(cN.prototype,"configService",[uN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cN),bN={exports:{}},_N=bN.exports=function(){function e(e){var r=[];return e.AMapUI&&r.push(t(e.AMapUI)),e.Loca&&r.push(n(e.Loca)),Promise.all(r)}function t(e){return new Promise((function(t,n){var s=[];if(e.plugins)for(var u=0;u<e.plugins.length;u+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[u])&&s.push(e.plugins[u]);if(a.AMapUI===r.failed)n("前次请求 AMapUI 失败");else if(a.AMapUI===r.notload){a.AMapUI=r.loading,i.AMapUI.version=e.version||i.AMapUI.version,u=i.AMapUI.version;var c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+u+"/main.js",l.onerror=function(e){a.AMapUI=r.failed,n("请求 AMapUI 失败")},l.onload=function(){if(a.AMapUI=r.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}for(t();o.AMapUI.length;)o.AMapUI.splice(0,1)[0]()}));else for(t();o.AMapUI.length;)o.AMapUI.splice(0,1)[0]()},c.appendChild(l)}else a.AMapUI===r.loaded?e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}t()})):t():e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):o.AMapUI.push((function(e){e?n(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}t()})):t()}))}))}function n(e){return new Promise((function(t,n){if(i.AMap.version.startsWith("2.0"))n("Loca 暂不适配 JSAPI 2.0,请使用 1.4.15");else if(a.Loca===r.failed)n("前次请求 Loca 失败");else if(a.Loca===r.notload){a.Loca=r.loading,i.Loca.version=e.version||i.Loca.version;var s=i.Loca.version,u=i.key,c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+u,l.onerror=function(e){a.Loca=r.failed,n("请求 AMapUI 失败")},l.onload=function(){for(a.Loca=r.loaded,t();o.Loca.length;)o.Loca.splice(0,1)[0]()},c.appendChild(l)}else a.Loca===r.loaded?e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):t():e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):o.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var r;!function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"}(r||(r={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},a={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},o={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(e){"function"==typeof e&&(a.AMap===r.loaded?e(window.AMap):s.push(e))};return{load:function(t){return new Promise((function(n,o){if(a.AMap==r.failed)o("");else if(a.AMap==r.notload){var c=t.key,l=t.version,f=t.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&o("禁止多种API加载方式混用"),i.key=c,i.AMap.version=l||i.AMap.version,i.AMap.plugins=f||i.AMap.plugins,a.AMap=r.loading,l=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)a.AMap=r.failed,o(i);else for(a.AMap=r.loaded,e(t).then((function(){n(window.AMap)})).catch(o);s.length;)s.splice(0,1)[0]()},(f=document.createElement("script")).type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+c+"&plugin="+i.AMap.plugins.join(","),f.onerror=function(e){a.AMap=r.failed,o(e)},l.appendChild(f)):o("请填写key")}else if(a.AMap==r.loaded)if(t.key&&t.key!==i.key)o("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)o("不允许多个版本 JSAPI 混用");else{if(c=[],t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(t.plugins[l])&&c.push(t.plugins[l]);c.length?window.AMap.plugin(c,(function(){e(t).then((function(){n(window.AMap)})).catch(o)})):e(t).then((function(){n(window.AMap)})).catch(o)}else if(t.key&&t.key!==i.key)o("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)o("不允许多个版本 JSAPI 混用");else{var h=[];if(t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(t.plugins[l])&&h.push(t.plugins[l]);u((function(){h.length?window.AMap.plugin(h,(function(){e(t).then((function(){n(window.AMap)})).catch(o)})):e(t).then((function(){n(window.AMap)})).catch(o)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},a={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},o={AMap:[],AMapUI:[],Loca:[]}}}}();function EN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EN(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={top:0,right:0,bottom:0,left:0};if("number"==typeof e)return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(4===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return SN(SN({},t),e)}(gN=mN||(mN={}))["GAODE1.x"]="GAODE1.x",gN["GAODE2.x"]="GAODE2.x",gN.MAPBOX="MAPBOX",gN.L7MAP="L7MAP",gN.GLOBEL="GLOBEL";var xN,AN,wN,ON,CN,kN,RN,PN,IN,NN,LN,MN={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},DN=Math.PI/180,FN=function(){function e(){Bl(this,e),ll(this,"projectionMatrix",$S()),ll(this,"viewMatrix",$S()),ll(this,"viewProjectionMatrix",$S()),ll(this,"ViewProjectionMatrixUncentered",$S()),ll(this,"viewUncenteredMatrix",$S()),ll(this,"zoom",void 0),ll(this,"center",void 0)}return jl(e,[{key:"syncWithMapCamera",value:function(e){var t=e.zoom,n=void 0===t?1:t,r=e.pitch,i=void 0===r?0:r,a=e.bearing,o=void 0===a?0:a,s=e.center,u=void 0===s?[0,0]:s,c=e.offsetOrigin,l=void 0===c?[0,0]:c,f=e.cameraHeight,h=void 0===f?1:f,p=e.aspect,d=void 0===p?1:p,v=e.near,m=void 0===v?.1:v,g=e.far,y=void 0===g?1e3:g,b=e.fov,_=void 0===b?0:b;this.zoom=n,this.center=u;var E=i*DN,S=(360-o)*DN;uT(this.projectionMatrix,_,d,m,y);var T=cT(h*Math.sin(E)*Math.sin(S),-h*Math.sin(E)*Math.cos(S),h*Math.cos(E)),x=cT(-Math.cos(E)*Math.sin(S),Math.cos(E)*Math.cos(S),Math.sin(E));!function(e,t,n,r){var i,a,o,s,u,c,l,f,h,p,d=t[0],v=t[1],m=t[2],g=r[0],y=r[1],b=r[2],_=n[0],E=n[1],S=n[2];Math.abs(d-_)<1e-6&&Math.abs(v-E)<1e-6&&Math.abs(m-S)<1e-6?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(l=d-_,f=v-E,h=m-S,i=y*(h*=p=1/Math.hypot(l,f,h))-b*(f*=p),a=b*(l*=p)-g*h,o=g*f-y*l,(p=Math.hypot(i,a,o))?(i*=p=1/p,a*=p,o*=p):(i=0,a=0,o=0),s=f*o-h*a,u=h*i-l*o,c=l*a-f*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=l,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=h,e[11]=0,e[12]=-(i*d+a*v+o*m),e[13]=-(s*d+u*v+c*m),e[14]=-(l*d+f*v+h*m),e[15]=1)}(this.viewMatrix,T,cT(0,0,0),x),this.viewUncenteredMatrix=function(e){var t=new JS(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}(this.viewMatrix),tT(this.viewMatrix,this.viewMatrix,cT(-l[0],l[1],0)),eT(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),eT(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var e=Ll(this.center,2);return[e[0],e[1]]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e,t){var n=85.0511287798,r=Math.max(Math.min(n,e[1]),-n),i=256<<20,a=Math.PI/180,o=e[0]*a,s=r*a;s=Math.log(Math.tan(Math.PI/4+s/2));return[o=i*(.5/Math.PI*o+.5)-215440491,s=-(i*(-.5/Math.PI*s+(a=.5))-106744817)]}}]),e}(),BN=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function UN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UN(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){var n="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast,r="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o)}}(".amap-logo{\n display: none !important;\n}\n");var VN=0;window.forceWebGL=!0;var HN=!1,GN=[],zN=(xN=xS(),AN=zE(OS.IGlobalConfigService),wN=zE(OS.MapConfig),ON=zE(OS.ICoordinateSystemService),CN=zE(OS.IEventEmitter),xN((RN=function(){function e(){var t=this;Bl(this,e),ll(this,"version",mN["GAODE1.x"]),ll(this,"map",void 0),ll(this,"dragging",!1),ll(this,"bgColor","rgba(0, 0, 0, 0)"),CT(this,"configService",PN,this),CT(this,"config",IN,this),CT(this,"coordinateSystemService",NN,this),CT(this,"eventEmitter",LN,this),ll(this,"markerContainer",void 0),ll(this,"$mapContainer",void 0),ll(this,"viewport",void 0),ll(this,"cameraChangedCallback",void 0),ll(this,"handleCameraChanged",(function(e){var n=e.camera,r=n.fov,i=n.near,a=n.far,o=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=t.getCenter(),h=f.lng,p=f.lat;if(t.emit("mapchange"),t.cameraChangedCallback){t.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:a,fov:r,cameraHeight:o,near:i,pitch:s,zoom:t.map.getZoom()-1,center:[h,p],offsetOrigin:[l.x,l.y]});var d=t.config.offsetZoom,v=void 0===d?12:d;t.viewport.getZoom()>v?t.coordinateSystemService.setCoordinateSystem(RT.P20_OFFSET):t.coordinateSystemService.setCoordinateSystem(RT.P20),t.cameraChangedCallback(t.viewport)}}))}var t;return jl(e,[{key:"setBgColor",value:function(e){this.bgColor=e}},{key:"addMarkerContainer",value:function(){var e=this.map.getContainer();if(null!==e){var t=e.getElementsByClassName("amap-maps")[0];this.markerContainer=ph("div","l7-marker-container",t)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(e,t){-1!==kk.indexOf(e)?this.eventEmitter.on(e,t):this.map.on(e,t)}},{key:"off",value:function(e,t){-1!==kk.indexOf(e)?this.eventEmitter.off(e,t):this.map.off(e,t)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var e;return null===(e=this.map.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var e=this.map.getSize();return[e.getWidth(),e.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(e){return this.map.setZoom(e)}},{key:"getCenter",value:function(e){if(null!=e&&e.padding){var t=this.getCenter(),n=Ll(this.getSize(),2);n[0],n[1];var r=TN(e.padding),i=this.lngLatToPixel([t.lng,t.lat]),a=[(r.right-r.left)/2,(r.bottom-r.top)/2];return this.pixelToLngLat([i.x-a[0],i.y-a[1]])}var o=this.map.getCenter();return{lng:o.getLng(),lat:o.getLat()}}},{key:"setCenter",value:function(e,t){if(null!=t&&t.padding){var n=TN(t.padding),r=this.lngLatToPixel(e),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],a=this.pixelToLngLat([r.x+i[0],r.y+i[1]]);this.map.setCenter([a.lng,a.lat])}else this.map.setCenter(e)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var e=this.map.getBounds().toBounds(),t=e.getNorthEast(),n=e.getSouthWest(),r=this.getCenter(),i=r.lng>t.getLng()||r.lng<n.getLng()?180-t.getLng():t.getLng();return[[r.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[i,t.getLat()]]}},{key:"getMinZoom",value:function(){return this.map.get("zooms")[0]-1}},{key:"getMaxZoom",value:function(){return this.map.get("zooms")[1]-1}},{key:"setRotation",value:function(e){return this.map.setRotation(e)}},{key:"setPitch",value:function(e){return this.map.setPitch(e)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"panBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.map.panBy(e,t)}},{key:"fitBounds",value:function(e){this.map.setBounds(new AMap.Bounds([e[0][0],e[0][1],e[1][0],e[1][1]]))}},{key:"setZoomAndCenter",value:function(e,t){this.map.setZoomAndCenter(e,t)}},{key:"setMapStyle",value:function(e){this.map.setMapStyle(this.getMapStyle(e))}},{key:"setMapStatus",value:function(e){this.map.setStatus(e)}},{key:"pixelToLngLat",value:function(e){var t=this.map.pixelToLngLat(new AMap.Pixel(e[0],e[1]));return{lng:t.getLng(),lat:t.getLat()}}},{key:"lngLatToPixel",value:function(e){var t=this.map.lnglatToPixel(new AMap.LngLat(e[0],e[1]));return{x:t.getX(),y:t.getY()}}},{key:"containerToLngLat",value:function(e){var t=new AMap.Pixel(e[0],e[1]),n=this.map.containerToLngLat(t);return{lng:null==n?void 0:n.getLng(),lat:null==n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(e){var t=new AMap.LngLat(e[0],e[1]),n=this.map.lngLatToContainer(t);return{x:n.getX(),y:n.getY()}}},{key:"lngLatToCoord",value:function(e){var t=this.map.lngLatToGeodeticCoord(e);return[t.x,-t.y]}},{key:"lngLatToMercator",value:function(e,t){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(e),a=$S();return tT(a,a,cT(i[0],i[1],t)),nT(a,a,cT(r[0],r[1],r[2])),rT(a,a,n[0]),iT(a,a,n[1]),aT(a,a,n[2]),a}},{key:"init",value:(t=ex(vx.mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h,p,d,v=this;return vx.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config,n=t.id,r=t.style,i=void 0===r?"light":r,a=t.minZoom,o=void 0===a?0:a,s=t.maxZoom,u=void 0===s?18:s,c=t.token,l=void 0===c?"15cd8a57710d40c9b7c0e3cc120f1200":c,f=t.mapInstance,h=t.plugin,p=void 0===h?[]:h,d=Nx(t,BN),e.next=3,new Promise((function(e){var t=function(){if(f)v.map=f,v.$mapContainer=v.map.getContainer(),setTimeout((function(){v.map.on("camerachange",v.handleCameraChanged),e()}),30);else{v.$mapContainer=v.creatAmapContainer(n);var t=new AMap.Map(v.$mapContainer,jN({mapStyle:v.getMapStyle(i),zooms:[o,u],viewMode:"3D"},d));t.on("camerachange",v.handleCameraChanged),v.map=t,setTimeout((function(){e()}),10)}};HN||f?HN&&window.AMap||f?t():GN.push(t):("15cd8a57710d40c9b7c0e3cc120f1200"===l&&console.warn(v.configService.getSceneWarninfo("MapToken")),HN=!0,p.push("Map3D"),_N.load({key:l,version:"1.4.15",plugins:p}).then((function(e){t(),GN.length&&(GN.forEach((function(e){return e()})),GN=[])})).catch((function(e){throw new Error(e)})))}));case 3:this.map.on("dragstart",(function(){return v.dragging=!0,""})),this.map.on("dragend",(function(){return v.dragging=!1,""})),this.viewport=new FN;case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"exportMap",value:function(e){var t,n=null===(t=this.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-layer")[0];return"jpg"===e?null==n?void 0:n.toDataURL("image/jpeg"):null==n?void 0:n.toDataURL("image/png")}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).emit.apply(t,[e].concat(r))}},{key:"once",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).once.apply(t,[e].concat(r))}},{key:"destroy",value:function(){var e,t;this.map.destroy(),null===(e=this.$mapContainer)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$mapContainer),delete window.initAMap;var n=document.getElementById("amap-script");n&&document.head.removeChild(n)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"getMapStyle",value:function(e){return MN[e]?MN[e]:e}},{key:"creatAmapContainer",value:function(e){var t=e;"string"==typeof e&&(t=document.getElementById(e));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_amap_div"+VN++,t.appendChild(n),n}}]),e}(),PN=kT(RN.prototype,"configService",[AN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IN=kT(RN.prototype,"config",[wN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NN=kT(RN.prototype,"coordinateSystemService",[ON],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LN=kT(RN.prototype,"eventEmitter",[CN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kN=RN))||kN);function XN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var i=Kl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}var WN=function(e){Xl(n,yN);var t=XN(n);function n(){return Bl(this,n),t.apply(this,arguments)}return jl(n,[{key:"getServiceConstructor",value:function(){return zN}}]),n}();function qN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qN(Object(n),!0).forEach((function(t){KN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JN=U.memo((function(e){var t=e.style,r=e.className,i=e.map,a=e.option,o=e.onSceneLoaded,s=e.children,u=n.exports.useRef(null),c=ZN(n.exports.useState(),2),l=c[0],f=c[1];return n.exports.useEffect((function(){var e=new fN(YN(YN({id:u.current},a),{},{map:new WN(i)}));return e.on("loaded",(function(){f(e),o&&o(e)})),function(){e.destroy()}}),[]),n.exports.useEffect((function(){l&&i.style&&l.setMapStyle(i.style)}),[JSON.stringify(i.style)]),n.exports.useEffect((function(){l&&i.zoom&&l.setZoom(i.zoom)}),[i.zoom]),n.exports.useEffect((function(){l&&i.center&&l.setCenter(i.center)}),[JSON.stringify(i.center)]),n.exports.useEffect((function(){l&&i.pitch&&l.setPitch(i.pitch)}),[i.pitch]),n.exports.useEffect((function(){l&&i.rotation&&l.setRotation(i.rotation)}),[i.rotation]),U.createElement(Qc.Provider,{value:l},U.createElement("div",{ref:u,className:r,style:t},l&&s))}));function $N(e){return($N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tL(e,t){return(tL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iL(e);if(t){var i=iL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rL(this,n)}}function rL(e,t){if(t&&("object"===$N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function iL(e){return(iL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tL(e,t)}(o,n.exports.PureComponent);var t,r,i,a=nL(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).el=void 0,t.scene=void 0,t.marker=void 0,t.el=document.createElement("div"),t}return t=o,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.lnglat,n=e.children,r=e.option,i=e.onMarkerLoaded,a=new zk(r);t&&a.setLnglat(t),n&&a.setElement(this.el),this.marker=a,i&&i(a),this.scene.addMarker(a)}},{key:"componentDidUpdate",value:function(e){var t;(null==e?void 0:e.lnglat.toString())!==(null===(t=this.props)||void 0===t?void 0:t.lnglat.toString())&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var e=this;return n.exports.createElement(Qc.Consumer,{},(function(t){return t&&(e.scene=t),j.exports.createPortal(e.props.children,e.el)}))}}])&&eL(t.prototype,r),i&&eL(t,i),o}();export{JN as A,aL as M,U as R,Zc as a,n as r};
